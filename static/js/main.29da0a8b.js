/*! For license information please see main.29da0a8b.js.LICENSE.txt */
!function(){var e={694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var u in n)r.call(n,u)&&n[u]&&e.push(u)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),m=0;m<o.length;++m){var y=o[m];if(!a[y]&&(!r||!r[y])&&(!v||!v[y])&&(!u||!u[y])){var g=h(n,y);try{c(t,y,g)}catch(b){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,k=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case v:case s:return e;default:return t}}case i:return t}}}function x(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return x(e)||w(e)===l},t.isConcurrentMode=x,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===b||e.$$typeof===k||e.$$typeof===y)},t.typeOf=w},309:function(e,t,n){"use strict";e.exports=n(746)},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),C=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var L,F=Object.assign;function M(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?M(e):""}function z(e){switch(e.tag){case 5:return M(e.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case E:return"Profiler";case S:return"StrictMode";case T:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){X(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function ae(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ke=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Se=null;function Ee(e){if(e=bi(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Ne(e){_e?Se?Se.push(e):Se=[e]:_e=e}function Ce(){if(_e){var e=_e,t=Se;if(Se=_e=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ie(e,t){return e(t)}function Te(){}var De=!1;function Ae(e,t,n){if(De)return e(t,n);De=!0;try{return Ie(e,t,n)}finally{De=!1,(null!==_e||null!==Se)&&(Te(),Ce())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Pe=!1}function je(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Le=!1,Fe=null,Me=!1,Ue=null,Ve={onError:function(e){Le=!0,Fe=e}};function ze(e,t,n,r,i,a,o,u,s){Le=!1,Fe=null,je.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(Be(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ge(i),e;if(o===r)return Ge(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function kt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,_t,St,Et,Nt=!1,Ct=[],It=null,Tt=null,Dt=null,At=new Map,Rt=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Lt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Et(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ke=r,n.target.dispatchEvent(r),ke=null,t.shift()}return!0}function Ut(e,t,n){Mt(e)&&n.delete(t)}function Vt(){Nt=!1,null!==It&&Mt(It)&&(It=null),null!==Tt&&Mt(Tt)&&(Tt=null),null!==Dt&&Mt(Dt)&&(Dt=null),At.forEach(Ut),Rt.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Nt||(Nt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&zt(It,e),null!==Tt&&zt(Tt,e),null!==Dt&&zt(Dt,e),At.forEach(t),Rt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var qt=k.ReactCurrentBatchConfig,Gt=!0;function Kt(e,t,n,r){var i=bt,a=qt.transition;qt.transition=null;try{bt=1,Wt(e,t,n,r)}finally{bt=i,qt.transition=a}}function Ht(e,t,n,r){var i=bt,a=qt.transition;qt.transition=null;try{bt=4,Wt(e,t,n,r)}finally{bt=i,qt.transition=a}}function Wt(e,t,n,r){if(Gt){var i=$t(e,t,n,r);if(null===i)Gr(e,t,r,Qt,n),jt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Lt(It,e,t,n,r,i),!0;case"dragenter":return Tt=Lt(Tt,e,t,n,r,i),!0;case"mouseover":return Dt=Lt(Dt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return At.set(a,Lt(At.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Lt(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(jt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=bi(i);if(null!==a&&wt(a),null===(a=$t(e,t,n,r))&&Gr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(gn),kn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function En(){return Sn}var Nn=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=an(Nn),In=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Dn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(An),Pn=[9,13,27,32],On=l&&"CompositionEvent"in window,jn=null;l&&"documentMode"in document&&(jn=document.documentMode);var Ln=l&&"TextEvent"in window&&!jn,Fn=l&&(!On||jn&&8<jn&&11>=jn),Mn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Kn(e,t,n,r){Ne(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function Qn(e){Mr(e,0)}function $n(e){if(W(ki(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Wn=Hn=null)}function nr(e){if("value"===e.propertyName&&$n(Wn)){var t=[];Kn(t,Wn,e,we(e)),Ae(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Wn)}function ar(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,br=!1;function kr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Sr={};function Er(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return _r[e]=n[t];return e}l&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Nr=Er("animationend"),Cr=Er("animationiteration"),Ir=Er("animationstart"),Tr=Er("transitionend"),Dr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Dr.set(e,t),s(t,[e])}for(var Pr=0;Pr<Ar.length;Pr++){var Or=Ar[Pr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(Nr,"onAnimationEnd"),Rr(Cr,"onAnimationIteration"),Rr(Ir,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Tr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(jr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(ze.apply(this,arguments),Le){if(!Le)throw Error(a(198));var l=Fe;Le=!1,Fe=null,Me||(Me=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function Mr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Me)throw e=Ue,Me=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Kt;break;case 4:i=Ht;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Ae((function(){var r=a,i=we(n),o=[];e:{var u=Dr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Cn;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Tn;break;case Nr:case Cr:case Ir:s=yn;break;case Tr:s=Dn;break;case"scroll":s=hn;break;case"wheel":s=Rn;break;case"copy":case"cut":case"paste":s=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=In}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Re(p,h))&&l.push(Kr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===ke||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=In,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:ki(s),d=null==c?u:ki(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Wr(d))p++;for(d=0,v=h;v;v=Wr(v))d++;for(;0<p-d;)l=Wr(l),p--;for(;0<d-p;)h=Wr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Wr(l),h=Wr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?ki(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Yn;else if(Gn(u))if(Xn)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Kn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?ki(r):window,e){case"focusin":(Gn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,kr(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":kr(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(g=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(y=Hr(r,b)).length&&(b=new kn(b,e,null,n,i),o.push({event:b,listeners:y}),g?b.data=g:null!==(g=zn(n))&&(b.data=g))),(g=Ln?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,Mn);case"textInput":return(e=t.data)===Mn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new kn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Mr(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=Re(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Re(n,a))&&o.unshift(Kr(n,s,u)):i||null!=(s=Re(n,a))&&o.push(Kr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ki(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var xi=[],_i=-1;function Si(e){return{current:e}}function Ei(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Ni(e,t){_i++,xi[_i]=e.current,e.current=t}var Ci={},Ii=Si(Ci),Ti=Si(!1),Di=Ci;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Ei(Ti),Ei(Ii)}function Oi(e,t,n){if(Ii.current!==Ci)throw Error(a(168));Ni(Ii,t),Ni(Ti,n)}function ji(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Di=Ii.current,Ni(Ii,e),Ni(Ti,Ti.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=ji(e,t,Di),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ti),Ei(Ii),Ni(Ii,e)):Ei(Ti),Ni(Ti,n)}var Mi=null,Ui=!1,Vi=!1;function zi(e){null===Mi?Mi=[e]:Mi.push(e)}function Bi(){if(!Vi&&null!==Mi){Vi=!0;var e=0,t=bt;try{var n=Mi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Mi=null,Ui=!1}catch(i){throw null!==Mi&&(Mi=Mi.slice(e+1)),We(Ze,Bi),i}finally{bt=t,Vi=!1}}return null}var qi=[],Gi=0,Ki=null,Hi=0,Wi=[],Qi=0,$i=null,Yi=1,Xi="";function Ji(e,t){qi[Gi++]=Hi,qi[Gi++]=Ki,Ki=e,Hi=t}function Zi(e,t,n){Wi[Qi++]=Yi,Wi[Qi++]=Xi,Wi[Qi++]=$i,$i=e;var r=Yi;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else Yi=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Ki;)Ki=qi[--Gi],qi[Gi]=null,Hi=qi[--Gi],qi[Gi]=null;for(;e===$i;)$i=Wi[--Qi],Wi[Qi]=null,Xi=Wi[--Qi],Wi[Qi]=null,Yi=Wi[--Qi],Wi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Yi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=k.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Si(null),ga=null,ba=null,ka=null;function wa(){ka=ba=ga=null}function xa(e){var t=ya.current;Ei(ya),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ga=e,ka=ba=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ku=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(ka!==e)if(e={context:e,memoizedValue:t,next:null},null===ba){if(null===ga)throw Error(a(308));ba=e,ga.dependencies={lanes:0,firstContext:e}}else ba=ba.next=e;return t}var Na=null;function Ca(e){null===Na?Na=[e]:Na.push(e)}function Ia(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ca(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ta(e,r)}function Ta(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Da=!1;function Aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ts)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ta(e,n)}return null===(i=r.interleaved)?(t.next=t,Ca(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ta(e,n)}function ja(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function La(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Da=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Da=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=f}}function Ma(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Pa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),ja(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Pa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),ja(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Pa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(rc(t,e,r,n),ja(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ci,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Ri(t)?Di:Ii.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ci),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ga(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Ka(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Aa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Ri(t)?Di:Ii.current,i.context=Ai(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&za.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function $a(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=jc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=jc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case x:return(t=Uc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||j(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Wa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||j(n))return null!==i?null:f(e,t,n,r,null);Wa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||j(r))return f(t,e=e.get(n)||null,r,i,null);Wa(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),ia&&Ji(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),c}function m(i,u,s,c){var l=j(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var b=d(i,v,g.value,c);if(null===b){null===v&&(v=y);break}e&&v&&null===b.alternate&&t(i,v),u=o(b,u,m),null===f?l=b:f.sibling=b,f=b,v=y}if(g.done)return n(i,v),ia&&Ji(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Ji(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Lc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=jc(o.type,o.key,o.props,null,r.mode,s)).ref=Ha(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,s)).return=r,r=a}return u(r);case R:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(j(o))return m(r,a,o,s);Wa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Mc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ya=$a(!0),Xa=$a(!1),Ja={},Za=Si(Ja),eo=Si(Ja),to=Si(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ni(to,t),Ni(eo,e),Ni(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Za),Ni(Za,t)}function io(){Ei(Za),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ni(eo,e),Ni(Za,n))}function oo(e){eo.current===e&&(Ei(Za),Ei(eo))}var uo=Si(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=k.ReactCurrentDispatcher,ho=k.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,bo=!1,ko=0,wo=0;function xo(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),bo){o=0;do{if(bo=!1,ko=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(bo)}if(fo.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==ko;return ko=0,e}function No(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function Co(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Io(e,t){return"function"===typeof t?t(e):t}function To(e){var t=Co(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Fs|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(ku=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Do(e){var t=Co(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(ku=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ao(){}function Ro(e,t){var n=vo,r=Co(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,ku=!0),r=r.queue,Go(jo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Uo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Ds)throw Error(a(349));0!==(30&po)||Po(n,t,i)}return i}function Po(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Lo(t)&&Fo(e)}function jo(e,t,n){return n((function(){Lo(t)&&Fo(e)}))}function Lo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Ta(e,1);null!==t&&rc(t,e,1,-1)}function Mo(e){var t=No();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return Co().memoizedState}function zo(e,t,n,r){var i=No();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=Co();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function qo(e,t){return zo(8390656,8,e,t)}function Go(e,t){return Bo(2048,8,e,t)}function Ko(e,t){return Bo(4,2,e,t)}function Ho(e,t){return Bo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Wo.bind(null,t,e),n)}function $o(){}function Yo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ku=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Fs|=n,e.baseState=!0),t)}function Zo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{bt=n,ho.transition=r}}function eu(){return Co().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ia(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ca(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ia(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){bo=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ea,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},uu={readContext:Ea,useCallback:function(e,t){return No().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=No();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=No();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},No().memoizedState=e},useState:Mo,useDebugValue:$o,useDeferredValue:function(e){return No().memoizedState=e},useTransition:function(){var e=Mo(!1),t=e[0];return e=Zo.bind(null,e[1]),No().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=No();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ds)throw Error(a(349));0!==(30&po)||Po(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(jo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=No(),t=Ds.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=ko++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ea,useCallback:Yo,useContext:Ea,useEffect:Go,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Xo,useReducer:To,useRef:Vo,useState:function(){return To(Io)},useDebugValue:$o,useDeferredValue:function(e){return Jo(Co(),mo.memoizedState,e)},useTransition:function(){return[To(Io)[0],Co().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ea,useCallback:Yo,useContext:Ea,useEffect:Go,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Xo,useReducer:Do,useRef:Vo,useState:function(){return Do(Io)},useDebugValue:$o,useDeferredValue:function(e){var t=Co();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[Do(Io)[0],Co().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Pa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ks||(Ks=!0,Hs=r),hu(0,t)},n}function vu(e,t,n){(n=Pa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Ws?Ws=new Set([this]):Ws.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Nc.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Pa(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var bu=k.ReactCurrentOwner,ku=!1;function wu(e,t,n,r){t.child=null===e?Xa(t,null,n,r):Ya(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Sa(t,i),r=So(e,t,n,r,a,i),n=Eo(),null===e||ku?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function _u(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=jc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Su(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Ku(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Su(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(ku=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ku(e,t,i);0!==(131072&e.flags)&&(ku=!0)}}return Cu(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ni(Os,Ps),Ps|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ni(Os,Ps),Ps|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ni(Os,Ps),Ps|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ni(Os,Ps),Ps|=r;return wu(e,t,i,n),t.child}function Nu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cu(e,t,n,r,i){var a=Ri(n)?Di:Ii.current;return a=Ai(t,a),Sa(t,i),n=So(e,t,n,r,a,i),r=Eo(),null===e||ku?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Iu(e,t,n,r,i){if(Ri(n)){var a=!0;Li(t)}else a=!1;if(Sa(t,i),null===t.stateNode)Gu(e,t),qa(t,n,r),Ka(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Ai(t,c=Ri(n)?Di:Ii.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ga(t,o,r,c),Da=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ti.current||Da?("function"===typeof l&&(Va(t,n,l,r),s=t.memoizedState),(u=Da||Ba(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ra(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ea(s):s=Ai(t,s=Ri(n)?Di:Ii.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ga(t,o,r,s),Da=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ti.current||Da?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Da||Ba(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Tu(e,t,n,r,a,i)}function Tu(e,t,n,r,i,a){Nu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ku(e,t,a);r=t.stateNode,bu.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Du(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Au(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Ru,Pu,Ou,ju,Lu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ni(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fc(s,i,0,null),e=Lc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Lu,e):Uu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Vu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ya(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Lu,o);if(0===(1&t.mode))return Vu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Vu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),ku||s){if(null!==(r=Ds)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ta(e,i),rc(r,e,i,-1))}return mc(),Vu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Wi[Qi++]=Yi,Wi[Qi++]=Xi,Wi[Qi++]=$i,Yi=e.id,Xi=e.overflow,$i=t),t=Uu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Oc(r,u):(u=Lc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Lu,i}return e=(u=e.child).sibling,i=Oc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uu(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vu(e,t,n,r){return null!==r&&pa(r),Ya(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function Bu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zu(e,n,t);else if(19===e.tag)zu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ni(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bu(t,!0,n,null,a);break;case"together":Bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ku(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wu(t),null;case 1:case 17:return Ri(t.type)&&Pi(),Wu(t),null;case 3:return r=t.stateNode,io(),Ei(Ti),Ei(Ii),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Pu(e,t),Wu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ou(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Wu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<jr.length;i++)Ur(jr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Ur("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Ru(e,t,!1,!1),t.stateNode=e;e:{switch(s=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<jr.length;i++)Ur(jr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Y(e,r),i=$(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&b(e,o,l,s))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wu(t),null;case 6:if(e&&null!=t.stateNode)ju(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wu(t),null;case 13:if(Ei(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===js&&(js=3):mc())),null!==t.updateQueue&&(t.flags|=4),Wu(t),null);case 4:return io(),Pu(e,t),null===e&&Br(t.stateNode.containerInfo),Wu(t),null;case 10:return xa(t.type._context),Wu(t),null;case 19:if(Ei(uo),null===(o=t.memoizedState))return Wu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Hu(o,!1);else{if(0!==js||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Hu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ni(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>qs&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Wu(t),null}else 2*Xe()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=uo.current,Ni(uo,r?1&n|2:1&n),t):(Wu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ps)&&(Wu(t),6&t.subtreeFlags&&(t.flags|=8192)):Wu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function $u(e,t){switch(ta(t),t.tag){case 1:return Ri(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ti),Ei(Ii),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(uo),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ru=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pu=function(){},Ou=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},ju=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yu=!1,Xu=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Xu||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),Bt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Xu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Xu&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ec(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Xu=(r=Xu)||null!==n.memoizedState,ds(e,t,n),Xu=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ms(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));ps(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ec(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ms(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(m){Ec(e,e.return,m)}try{rs(5,e,e.return)}catch(m){Ec(e,e.return,m)}}break;case 1:ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Ec(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&X(i,o),be(s,u);var l=be(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):b(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ec(e,e.return,m)}}break;case 6:if(ms(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ec(e,e.return,m)}}break;case 3:if(ms(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Ec(e,e.return,m)}break;case 4:default:ms(t,e),gs(e);break;case 13:ms(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bs=Xe())),4&r&&vs(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Xu=(l=Xu)||f,ms(t,e),Xu=l):ms(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(p=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Ec(r,n,m)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){xs(h);continue}}null!==p?(p.return=d,Zu=p):xs(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){Ec(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Ec(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ms(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Ec(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bs(e,t,n){Zu=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Yu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Xu;u=Yu;var c=Xu;if(Yu=o,(Xu=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?_s(i):null!==s?(s.return=o,Zu=s):_s(i);for(;null!==a;)Zu=a,ks(a,t,n),a=a.sibling;Zu=i,Yu=u,Xu=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):ws(e)}}function ws(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xu||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ma(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ma(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}Xu||512&t.flags&&as(t)}catch(d){Ec(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function _s(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Ec(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ec(t,i,s)}}var a=t.return;try{as(t)}catch(s){Ec(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Ec(t,o,s)}}}catch(s){Ec(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Ss,Es=Math.ceil,Ns=k.ReactCurrentDispatcher,Cs=k.ReactCurrentOwner,Is=k.ReactCurrentBatchConfig,Ts=0,Ds=null,As=null,Rs=0,Ps=0,Os=Si(0),js=0,Ls=null,Fs=0,Ms=0,Us=0,Vs=null,zs=null,Bs=0,qs=1/0,Gs=null,Ks=!1,Hs=null,Ws=null,Qs=!1,$s=null,Ys=0,Xs=0,Js=null,Zs=-1,ec=0;function tc(){return 0!==(6&Ts)?Xe():-1!==Zs?Zs:Zs=Xe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Ts)&&0!==Rs?Rs&-Rs:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<Xs)throw Xs=0,Js=null,Error(a(185));yt(e,n,r),0!==(2&Ts)&&e===Ds||(e===Ds&&(0===(2&Ts)&&(Ms|=n),4===js&&sc(e,Rs)),ic(e,r),1===n&&0===Ts&&0===(1&t.mode)&&(qs=Xe()+500,Ui&&Bi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ds?Rs:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,zi(e)}(cc.bind(null,e)):zi(cc.bind(null,e)),oi((function(){0===(6&Ts)&&Bi()})),n=null;else{switch(kt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Dc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&Ts))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Ds?Rs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Ts;Ts|=2;var o=vc();for(Ds===e&&Rs===t||(Gs=null,qs=Xe()+500,dc(e,t));;)try{bc();break}catch(s){pc(e,s)}wa(),Ns.current=o,Ts=i,null!==As?t=0:(Ds=null,Rs=0,t=js)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ls,dc(e,0),sc(e,r),ic(e,Xe()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ls,dc(e,0),sc(e,r),ic(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xc(e,zs,Gs);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Bs+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,zs,Gs),t);break}xc(e,zs,Gs);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Es(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,zs,Gs),r);break}xc(e,zs,Gs);break;default:throw Error(a(329))}}}return ic(e,Xe()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Vs;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=zs,zs=n,null!==t&&uc(t)),e}function uc(e){null===zs?zs=e:zs.push.apply(zs,e)}function sc(e,t){for(t&=~Us,t&=~Ms,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Ts))throw Error(a(327));_c();var t=ht(e,0);if(0===(1&t))return ic(e,Xe()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ls,dc(e,0),sc(e,t),ic(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,zs,Gs),ic(e,Xe()),null}function lc(e,t){var n=Ts;Ts|=1;try{return e(t)}finally{0===(Ts=n)&&(qs=Xe()+500,Ui&&Bi())}}function fc(e){null!==$s&&0===$s.tag&&0===(6&Ts)&&_c();var t=Ts;Ts|=1;var n=Is.transition,r=bt;try{if(Is.transition=null,bt=1,e)return e()}finally{bt=r,Is.transition=n,0===(6&(Ts=t))&&Bi()}}function hc(){Ps=Os.current,Ei(Os)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:io(),Ei(Ti),Ei(Ii),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(uo);break;case 10:xa(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Ds=e,As=e=Oc(e.current,null),Rs=Ps=t,js=0,Ls=null,Us=Ms=Fs=0,zs=Vs=null,null!==Na){for(t=0;t<Na.length;t++)if(null!==(r=(n=Na[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Na=null}return e}function pc(e,t){for(;;){var n=As;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,bo=!1,ko=0,Cs.current=null,null===n||null===n.return){js=1,Ls=t,As=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Rs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==js&&(js=2),null===Vs?Vs=[o]:Vs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,La(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Ws||!Ws.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,La(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(k){t=k,As===n&&null!==n&&(As=n=n.return);continue}break}}function vc(){var e=Ns.current;return Ns.current=ou,null===e?ou:e}function mc(){0!==js&&3!==js&&2!==js||(js=4),null===Ds||0===(268435455&Fs)&&0===(268435455&Ms)||sc(Ds,Rs)}function yc(e,t){var n=Ts;Ts|=2;var r=vc();for(Ds===e&&Rs===t||(Gs=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(wa(),Ts=n,Ns.current=r,null!==As)throw Error(a(261));return Ds=null,Rs=0,js}function gc(){for(;null!==As;)kc(As)}function bc(){for(;null!==As&&!$e();)kc(As)}function kc(e){var t=Ss(e.alternate,e,Ps);e.memoizedProps=e.pendingProps,null===t?wc(e):As=t,Cs.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qu(n,t,Ps)))return void(As=n)}else{if(null!==(n=$u(n,t)))return n.flags&=32767,void(As=n);if(null===e)return js=6,void(As=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===js&&(js=5)}function xc(e,t,n){var r=bt,i=Is.transition;try{Is.transition=null,bt=1,function(e,t,n,r){do{_c()}while(null!==$s);if(0!==(6&Ts))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ds&&(As=Ds=null,Rs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qs||(Qs=!0,Dc(tt,(function(){return _c(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Is.transition,Is.transition=null;var u=bt;bt=1;var s=Ts;Ts|=4,Cs.current=null,function(e,t){if(ei=Gt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,b=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var k=t.stateNode.containerInfo;1===k.nodeType?k.textContent="":9===k.nodeType&&k.documentElement&&k.removeChild(k.documentElement);break;default:throw Error(a(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}v=ns,ns=!1}(e,n),ys(n,e),pr(ti),Gt=!!ei,ti=ei=null,e.current=n,bs(n,e,i),Ye(),Ts=s,bt=u,Is.transition=o}else e.current=n;if(Qs&&(Qs=!1,$s=e,Ys=i),o=e.pendingLanes,0===o&&(Ws=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ks)throw Ks=!1,e=Hs,Hs=null,e;0!==(1&Ys)&&0!==e.tag&&_c(),o=e.pendingLanes,0!==(1&o)?e===Js?Xs++:(Xs=0,Js=e):Xs=0,Bi()}(e,t,n,r)}finally{Is.transition=i,bt=r}return null}function _c(){if(null!==$s){var e=kt(Ys),t=Is.transition,n=bt;try{if(Is.transition=null,bt=16>e?16:e,null===$s)var r=!1;else{if(e=$s,$s=null,Ys=0,0!==(6&Ts))throw Error(a(331));var i=Ts;for(Ts|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,p=f.return;if(os(f),f===l){Zu=null;break}if(null!==d){d.return=p,Zu=d;break}Zu=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var b=e.current;for(Zu=b;null!==Zu;){var k=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==k)k.return=u,Zu=k;else e:for(u=b;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(x){Ec(s,s.return,x)}if(s===u){Zu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Zu=w;break e}Zu=s.return}}if(Ts=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{bt=n,Is.transition=t}}return!1}function Sc(e,t,n){e=Oa(e,t=pu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ws||!Ws.has(r))){t=Oa(t,e=vu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Nc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Ds===e&&(Rs&n)===n&&(4===js||3===js&&(130023424&Rs)===Rs&&500>Xe()-Bs?dc(e,0):Us|=n),ic(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Ta(e,t))&&(yt(e,t,n),ic(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Cc(e,n)}function Dc(e,t){return We(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Ac(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function jc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Pc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Lc(n.children,i,o,t);case S:u=8,i|=8;break;case E:return(e=Rc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case T:return(e=Rc(13,n,t,i)).elementType=T,e.lanes=o,e;case D:return(e=Rc(19,n,t,i)).elementType=D,e.lanes=o,e;case P:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:u=10;break e;case C:u=9;break e;case I:u=11;break e;case A:u=14;break e;case R:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,a,o,u,s){return e=new Vc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Aa(a),e}function Bc(e){if(!e)return Ci;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return ji(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=zc(n,r,!0,e,0,a,0,u,s)).context=Bc(null),n=e.current,(a=Pa(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Gc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Pa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(rc(e,i,o,a),ja(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Ss=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ti.current)ku=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ku=!1,function(e,t,n){switch(t.tag){case 3:Du(t),da();break;case 5:ao(t);break;case 1:Ri(t.type)&&Li(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ni(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ni(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mu(e,t,n):(Ni(uo,1&uo.current),null!==(e=Ku(e,t,n))?e.sibling:null);Ni(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ni(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return Ku(e,t,n)}(e,t,n);ku=0!==(131072&e.flags)}else ku=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Gu(e,t),e=t.pendingProps;var i=Ai(t,Ii.current);Sa(t,n),i=So(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Aa(t),i.updater=za,t.stateNode=i,i._reactInternals=t,Ka(t,r,e,n),t=Tu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Gu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===A)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Cu(null,t,r,e,n);break e;case 1:t=Iu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=_u(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Iu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Du(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ra(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Au(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Au(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ku(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Nu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Mu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ni(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ti.current){t=Ku(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Pa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_a(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),_a(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sa(t,n),r=r(i=Ea(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),_u(e,t,r,i=ma(r.type,i),n);case 15:return Su(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Gu(e,t),t.tag=1,Ri(r)?(e=!0,Li(t)):e=!1,Sa(t,n),qa(t,r,i),Ka(t,r,i,n),Tu(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Kc(o);u.call(e)}}Gc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Kc(s);u.call(e)}}var s=zc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),fc((function(){Gc(t,s,n,r)})),s}(n,t,e,i,r);return Kc(o)}Yc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Gc(e,t,null,null)},Yc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Gc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Xe()),0===(6&Ts)&&(qs=Xe()+500,Bi()))}break;case 13:fc((function(){var t=Ta(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Wc(e,1)}},xt=function(e){if(13===e.tag){var t=Ta(e,134217728);if(null!==t)rc(t,e,134217728,tc());Wc(e,134217728)}},_t=function(e){if(13===e.tag){var t=nc(e),n=Ta(e,t);if(null!==n)rc(n,e,t,tc());Wc(e,t)}},St=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));W(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=lc,Te=fc;var tl={usingClientEntryPoint:!1,Events:[bi,ki,wi,Ne,Ce,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},459:function(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case u:case o:case h:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case v:case p:case s:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},900:function(e,t,n){"use strict";n(459)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var k=b.prototype=new g;k.constructor=b,v(k,y.prototype),k.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:_.current}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+I(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),T(o,t,i,"",(function(e){return e}))):null!=o&&(N(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+I(u=e[c],c);s+=T(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=T(u=u.value,t,i,l=a+I(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function D(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},P={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:P,ReactCurrentOwner:_};t.Children={map:D,forEach:function(e,t,n){D(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return D(e,(function(){t++})),t},toArray:function(e){return D(e,(function(e){return e}))||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function k(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,k(e),!v)if(null!==r(c))v=!0,P(x);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function x(e,n){v=!1,m&&(m=!1,g(N),N=-1),p=!0;var a=d;try{for(k(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!T());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),k(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,S=!1,E=null,N=-1,C=5,I=-1;function T(){return!(t.unstable_now()-I<C)}function D(){if(null!==E){var e=t.unstable_now();I=e;var n=!0;try{n=E(!0,e)}finally{n?_():(S=!1,E=null)}}else S=!1}if("function"===typeof b)_=function(){b(D)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,R=A.port2;A.port1.onmessage=D,_=function(){R.postMessage(null)}}else _=function(){y(D,0)};function P(e){E=e,S||(S=!0,_())}function O(e,n){N=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,P(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(N),N=-1):m=!0,O(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,P(x))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},561:function(e,t,n){"use strict";var r=n(791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,u=r.useLayoutEffect,s=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return u((function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,n,t]),o((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),s(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},595:function(e,t,n){"use strict";var r=n(791),i=n(248);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,u=r.useRef,s=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var f=u(null);if(null===f.current){var h={hasValue:!1,value:null};f.current=h}else h=f.current;f=c((function(){function e(e){if(!s){if(s=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return u=t}return u=e}if(t=u,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,u=n)}var o,u,s=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var d=o(e,f[0],f[1]);return s((function(){h.hasValue=!0,h.value=d}),[d]),l(d),d}},248:function(e,t,n){"use strict";e.exports=n(561)},327:function(e,t,n){"use strict";e.exports=n(595)},391:function(e){"use strict";var t=function(){};e.exports=t}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".f4810603.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="readbook:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/readbook/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkreadbook=self.webpackChunkreadbook||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Jr},SDK_VERSION:function(){return aa},_DEFAULT_ENTRY_NAME:function(){return Hi},_addComponent:function(){return Yi},_addOrOverwriteComponent:function(){return Xi},_apps:function(){return Qi},_clearComponents:function(){return ta},_components:function(){return $i},_getProvider:function(){return Zi},_registerComponent:function(){return Ji},_removeServiceInstance:function(){return ea},deleteApp:function(){return ca},getApp:function(){return ua},getApps:function(){return sa},initializeApp:function(){return oa},onLog:function(){return ha},registerVersion:function(){return fa},setLogLevel:function(){return da}});var t,r=n(791),i=n.t(r,2),a=n(250);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function s(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function c(e){return function(e){if(Array.isArray(e))return o(e)}(e)||u(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){var t=g();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}(this,n)}}function w(e,t,n){return w=g()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&v(i,n.prototype),i},w.apply(null,arguments)}function x(e){var t="function"===typeof Map?new Map:void 0;return x=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return w(e,arguments,y(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),v(n,e)},x(e)}function _(e){if(Array.isArray(e))return e}function S(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(e,t){return _(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||s(e,t)||S()}function N(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var I,T="popstate";function D(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function A(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function R(e,t){return{usr:e.state,key:e.key,idx:t}}function P(e,t,n,r){return void 0===n&&(n=null),C({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?j(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function O(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function j(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function L(e,n,r,i){void 0===i&&(i={});var a=i,o=a.window,u=void 0===o?document.defaultView:o,s=a.v5Compat,c=void 0!==s&&s,l=u.history,f=t.Pop,h=null,d=p();function p(){return(l.state||{idx:null}).idx}function v(){f=t.Pop;var e=p(),n=null==e?null:e-d;d=e,h&&h({action:f,location:y.location,delta:n})}function m(e){var t="null"!==u.location.origin?u.location.origin:u.location.href,n="string"===typeof e?e:O(e);return D(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==d&&(d=0,l.replaceState(C({},l.state,{idx:d}),""));var y={get action(){return f},get location(){return e(u,l)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return u.addEventListener(T,v),h=e,function(){u.removeEventListener(T,v),h=null}},createHref:function(e){return n(u,e)},createURL:m,encodeLocation:function(e){var t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){f=t.Push;var i=P(y.location,e,n);r&&r(i,e);var a=R(i,d=p()+1),o=y.createHref(i);try{l.pushState(a,"",o)}catch(s){if(s instanceof DOMException&&"DataCloneError"===s.name)throw s;u.location.assign(o)}c&&h&&h({action:f,location:y.location,delta:1})},replace:function(e,n){f=t.Replace;var i=P(y.location,e,n);r&&r(i,e);var a=R(i,d=p()),o=y.createHref(i);l.replaceState(a,"",o),c&&h&&h({action:f,location:y.location,delta:0})},go:function(e){return l.go(e)}};return y}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(I||(I={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function F(e,t,n){void 0===n&&(n="/");var r=X(("string"===typeof t?j(t):t).pathname||"/",n);if(null==r)return null;var i=M(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=Q(i[o],Y(r));return a}function M(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(D(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var u=J([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(D(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),M(e.children,t,s,u)),(null!=e.path||e.index)&&t.push({path:u,score:W(u,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=N(U(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(u){a.e(u)}finally{a.f()}}else i(e,t)})),t}function U(e){var t=e.split("/");if(0===t.length)return[];var n,r=_(n=t)||u(n)||s(n)||S(),i=r[0],a=r.slice(1),o=i.endsWith("?"),l=i.replace(/\?$/,"");if(0===a.length)return o?[l,""]:[l];var f=U(a.join("/")),h=[];return h.push.apply(h,c(f.map((function(e){return""===e?l:[l,e].join("/")})))),o&&h.push.apply(h,c(f)),h.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var V=/^:\w+$/,z=3,B=2,q=1,G=10,K=-2,H=function(e){return"*"===e};function W(e,t){var n=e.split("/"),r=n.length;return n.some(H)&&(r+=K),t&&(r+=B),n.filter((function(e){return!H(e)})).reduce((function(e,t){return e+(V.test(t)?z:""===t?q:G)}),r)}function Q(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=$({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:J([i,l.pathname]),pathnameBase:Z(J([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=J([i,l.pathnameBase]))}return a}function $(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);A("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=E(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return A(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(c[n]||"",t),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function Y(e){try{return decodeURI(e)}catch(t){return A(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function X(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}var J=function(e){return e.join("/").replace(/\/\/+/g,"/")},Z=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},ee=function(e){m(n,e);var t=k(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n)}(x(Error));function te(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var ne=["post","put","patch","delete"],re=(new Set(ne),["get"].concat(ne));new Set(re),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function ie(){return ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ie.apply(this,arguments)}var ae=r.createContext(null);var oe=r.createContext(null);var ue=r.createContext(null);var se=r.createContext(null);var ce=r.createContext(null);var le=r.createContext({outlet:null,matches:[],isDataRoute:!1});var fe=r.createContext(null);function he(){return null!=r.useContext(ce)}function de(){return he()||D(!1),r.useContext(ce).location}function pe(e,n,i){he()||D(!1);var a,o=r.useContext(se).navigator,u=r.useContext(le).matches,s=u[u.length-1],c=s?s.params:{},l=(s&&s.pathname,s?s.pathnameBase:"/"),f=(s&&s.route,de());if(n){var h,d="string"===typeof n?j(n):n;"/"===l||(null==(h=d.pathname)?void 0:h.startsWith(l))||D(!1),a=d}else a=f;var p=a.pathname||"/",v=F(e,{pathname:"/"===l?p:p.slice(l.length)||"/"});var m=be(v&&v.map((function(e){return Object.assign({},e,{params:Object.assign({},c,e.params),pathname:J([l,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:J([l,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),u,i);return n&&m?r.createElement(ce.Provider,{value:{location:ie({pathname:"/",search:"",hash:"",state:null,key:"default"},a),navigationType:t.Pop}},m):m}function ve(){var e=function(){var e,t=r.useContext(fe),n=we(ke.UseRouteError),i=xe(ke.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=te(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:a},n):null,null)}var me=r.createElement(ve,null),ye=function(e){m(n,e);var t=k(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},r}return p(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?r.createElement(le.Provider,{value:this.props.routeContext},r.createElement(fe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),n}(r.Component);function ge(e){var t=e.routeContext,n=e.match,i=e.children,a=r.useContext(ae);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(le.Provider,{value:t},i)}function be(e,t,n){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),null==e){var a;if(null==(a=n)||!a.errors)return null;e=n.matches}var o=e,u=null==(i=n)?void 0:i.errors;if(null!=u){var s=o.findIndex((function(e){return e.route.id&&(null==u?void 0:u[e.route.id])}));s>=0||D(!1),o=o.slice(0,Math.min(o.length,s+1))}return o.reduceRight((function(e,i,a){var s=i.route.id?null==u?void 0:u[i.route.id]:null,c=null;n&&(c=i.route.errorElement||me);var l=t.concat(o.slice(0,a+1)),f=function(){var t;return t=s?c:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(ge,{match:i,routeContext:{outlet:e,matches:l,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?r.createElement(ye,{location:n.location,revalidation:n.revalidation,component:c,error:s,children:f(),routeContext:{outlet:null,matches:l,isDataRoute:!0}}):f()}),null)}var ke=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ke||{});function we(e){var t=r.useContext(oe);return t||D(!1),t}function xe(e){var t=function(e){var t=r.useContext(le);return t||D(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||D(!1),n.route.id}i.startTransition;function _e(e){D(!1)}function Se(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,u=e.location,s=e.navigationType,c=void 0===s?t.Pop:s,l=e.navigator,f=e.static,h=void 0!==f&&f;he()&&D(!1);var d=i.replace(/^\/*/,"/"),p=r.useMemo((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof u&&(u=j(u));var v=u,m=v.pathname,y=void 0===m?"/":m,g=v.search,b=void 0===g?"":g,k=v.hash,w=void 0===k?"":k,x=v.state,_=void 0===x?null:x,S=v.key,E=void 0===S?"default":S,N=r.useMemo((function(){var e=X(y,d);return null==e?null:{location:{pathname:e,search:b,hash:w,state:_,key:E},navigationType:c}}),[d,y,b,w,_,E,c]);return null==N?null:r.createElement(se.Provider,{value:p},r.createElement(ce.Provider,{children:o,value:N}))}function Ee(e){var t=e.children,n=e.location;return pe(Ie(t),n)}var Ne=function(e){return e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error",e}(Ne||{}),Ce=new Promise((function(){}));r.Component;function Ie(e,t){void 0===t&&(t=[]);var n=[];return r.Children.forEach(e,(function(e,i){if(r.isValidElement(e)){var a=[].concat(c(t),[i]);if(e.type!==r.Fragment){e.type!==_e&&D(!1),e.props.index&&e.props.children&&D(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Ie(e.props.children,a)),n.push(o)}else n.push.apply(n,Ie(e.props.children,a))}})),n}var Te=n(248),De=n(327),Ae=n(164);var Re=function(e){e()},Pe=function(){return Re};function Oe(e,t,n){return(t=h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var je=Symbol.for("react-redux-context"),Le="undefined"!==typeof globalThis?globalThis:{};function Fe(){var e;if(!r.createContext)return{};var t=null!=(e=Le[je])?e:Le[je]=new Map,n=t.get(r.createContext);return n||(n=r.createContext(null),t.set(r.createContext,n)),n}var Me=Fe();function Ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me;return function(){return(0,r.useContext)(e)}}var Ve=Ue(),ze=function(){throw new Error("uSES not initialized!")},Be=function(e,t){return e===t};function qe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=e===Me?Ve:Ue(e);return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i="function"===typeof n?{equalityFn:n}:n,a=i.equalityFn,o=void 0===a?Be:a,u=i.stabilityCheck,s=void 0===u?void 0:u;i.noopCheck;var c=t(),l=c.store,f=c.subscription,h=c.getServerState,d=c.stabilityCheck,p=(c.noopCheck,(0,r.useRef)(!0),(0,r.useCallback)(Oe({},e.name,(function(t){return e(t)}))[e.name],[e,d,s])),v=ze(f.addNestedSub,l.getState,h||l.getState,p,o);return(0,r.useDebugValue)(v),v}}var Ge=qe();n(110),n(900);var Ke={notify:function(){},get:function(){return[]}};function He(e,t){var n,r=Ke;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=Pe(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=Ke)},getListeners:function(){return r}};return o}var We=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?r.useLayoutEffect:r.useEffect;var Qe=function(e){var t=e.store,n=e.context,i=e.children,a=e.serverState,o=e.stabilityCheck,u=void 0===o?"once":o,s=e.noopCheck,c=void 0===s?"once":s,l=r.useMemo((function(){var e=He(t);return{store:t,subscription:e,getServerState:a?function(){return a}:void 0,stabilityCheck:u,noopCheck:c}}),[t,a,u,c]),f=r.useMemo((function(){return t.getState()}),[t]);We((function(){var e=l.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),f!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[l,f]);var h=n||Me;return r.createElement(h.Provider,{value:l},i)};function $e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=e===Me?Ve:Ue(e);return function(){return t().store}}var Ye=$e();function Xe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=e===Me?Ye:$e(e);return function(){return t().dispatch}}var Je,Ze=Xe();function et(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function tt(e){return!!e&&!!e[Gt]}function nt(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Kt}(e)||Array.isArray(e)||!!e[qt]||!!(null===(t=e.constructor)||void 0===t?void 0:t[qt])||ct(e)||lt(e))}function rt(e,t,n){void 0===n&&(n=!1),0===it(e)?(n?Object.keys:Ht)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function it(e){var t=e[Gt];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:ct(e)?2:lt(e)?3:0}function at(e,t){return 2===it(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ot(e,t){return 2===it(e)?e.get(t):e[t]}function ut(e,t,n){var r=it(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function st(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function ct(e){return Ut&&e instanceof Map}function lt(e){return Vt&&e instanceof Set}function ft(e){return e.o||e.t}function ht(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Wt(e);delete t[Gt];for(var n=Ht(t),r=0;r<n.length;r++){var i=n[r],a=t[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function dt(e,t){return void 0===t&&(t=!1),vt(e)||tt(e)||!nt(e)||(it(e)>1&&(e.set=e.add=e.clear=e.delete=pt),Object.freeze(e),t&&rt(e,(function(e,t){return dt(t,!0)}),!0)),e}function pt(){et(2)}function vt(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function mt(e){var t=Qt[e];return t||et(18,e),t}function yt(e,t){Qt[e]||(Qt[e]=t)}function gt(){return Ft}function bt(e,t){t&&(mt("Patches"),e.u=[],e.s=[],e.v=t)}function kt(e){wt(e),e.p.forEach(_t),e.p=null}function wt(e){e===Ft&&(Ft=e.l)}function xt(e){return Ft={p:[],l:Ft,h:e,m:!0,_:0}}function _t(e){var t=e[Gt];0===t.i||1===t.i?t.j():t.g=!0}function St(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.O||mt("ES5").S(t,e,r),r?(n[Gt].P&&(kt(t),et(4)),nt(e)&&(e=Et(t,e),t.l||Ct(t,e)),t.u&&mt("Patches").M(n[Gt].t,e,t.u,t.s)):e=Et(t,n,[]),kt(t),t.u&&t.v(t.u,t.s),e!==Bt?e:void 0}function Et(e,t,n){if(vt(t))return t;var r=t[Gt];if(!r)return rt(t,(function(i,a){return Nt(e,r,t,i,a,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return Ct(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=ht(r.k):r.o,a=i,o=!1;3===r.i&&(a=new Set(i),i.clear(),o=!0),rt(a,(function(t,a){return Nt(e,r,i,t,a,n,o)})),Ct(e,i,!1),n&&e.u&&mt("Patches").N(r,n,e.u,e.s)}return r.o}function Nt(e,t,n,r,i,a,o){if(tt(i)){var u=Et(e,i,a&&t&&3!==t.i&&!at(t.R,r)?a.concat(r):void 0);if(ut(n,r,u),!tt(u))return;e.m=!1}else o&&n.add(i);if(nt(i)&&!vt(i)){if(!e.h.D&&e._<1)return;Et(e,i),t&&t.A.l||Ct(e,i)}}function Ct(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e.m&&dt(t,n)}function It(e,t){var n=e[Gt];return(n?ft(n):e)[t]}function Tt(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Dt(e){e.P||(e.P=!0,e.l&&Dt(e.l))}function At(e){e.o||(e.o=ht(e.t))}function Rt(e,t,n){var r=ct(t)?mt("MapSet").F(t,n):lt(t)?mt("MapSet").T(t,n):e.O?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:gt(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,a=$t;n&&(i=[r],a=Yt);var o=Proxy.revocable(i,a),u=o.revoke,s=o.proxy;return r.k=s,r.j=u,s}(t,n):mt("ES5").J(t,n);return(n?n.A:gt()).p.push(r),r}function Pt(e){return tt(e)||et(22,e),function e(t){if(!nt(t))return t;var n,r=t[Gt],i=it(t);if(r){if(!r.P&&(r.i<4||!mt("ES5").K(r)))return r.t;r.I=!0,n=Ot(t,i),r.I=!1}else n=Ot(t,i);return rt(n,(function(t,i){r&&ot(r.t,t)===i||ut(n,t,e(i))})),3===i?new Set(n):n}(e)}function Ot(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return ht(e)}function jt(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[Gt];return $t.get(t,e)},set:function(t){var n=this[Gt];$t.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][Gt];if(!i.P)switch(i.i){case 5:r(i)&&Dt(i);break;case 4:n(i)&&Dt(i)}}}function n(e){for(var t=e.t,n=e.k,r=Ht(n),i=r.length-1;i>=0;i--){var a=r[i];if(a!==Gt){var o=t[a];if(void 0===o&&!at(t,a))return!0;var u=n[a],s=u&&u[Gt];if(s?s.t!==o:!st(u,o))return!0}}var c=!!t[Gt];return r.length!==Ht(t).length+(c?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};yt("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var a=Wt(n);delete a[Gt];for(var o=Ht(a),u=0;u<o.length;u++){var s=o[u];a[s]=e(s,t||!!a[s].enumerable)}return Object.create(Object.getPrototypeOf(n),a)}(r,t),a={i:r?5:4,A:n?n.A:gt(),P:!1,I:!1,R:{},l:n,t:t,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,Gt,{value:a,writable:!0}),i},S:function(e,n,i){i?tt(n)&&n[Gt].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[Gt];if(n){var i=n.t,a=n.k,o=n.R,u=n.i;if(4===u)rt(a,(function(t){t!==Gt&&(void 0!==i[t]||at(i,t)?o[t]||e(a[t]):(o[t]=!0,Dt(n)))})),rt(i,(function(e){void 0!==a[e]||at(a,e)||(o[e]=!1,Dt(n))}));else if(5===u){if(r(n)&&(Dt(n),o.length=!0),a.length<i.length)for(var s=a.length;s<i.length;s++)o[s]=!1;else for(var c=i.length;c<a.length;c++)o[c]=!0;for(var l=Math.min(a.length,i.length),f=0;f<l;f++)a.hasOwnProperty(f)||(o[f]=!0),void 0===o[f]&&e(a[f])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}!function(e){ze=e}(De.useSyncExternalStoreWithSelector),function(e){e}(Te.useSyncExternalStore),Je=Ae.unstable_batchedUpdates,Re=Je;var Lt,Ft,Mt="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Ut="undefined"!=typeof Map,Vt="undefined"!=typeof Set,zt="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Bt=Mt?Symbol.for("immer-nothing"):((Lt={})["immer-nothing"]=!0,Lt),qt=Mt?Symbol.for("immer-draftable"):"__$immer_draftable",Gt=Mt?Symbol.for("immer-state"):"__$immer_state",Kt=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),Ht="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Wt=Object.getOwnPropertyDescriptors||function(e){var t={};return Ht(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},Qt={},$t={get:function(e,t){if(t===Gt)return e;var n=ft(e);if(!at(n,t))return function(e,t,n){var r,i=Tt(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!nt(r)?r:r===It(e.t,t)?(At(e),e.o[t]=Rt(e.A.h,r,e)):r},has:function(e,t){return t in ft(e)},ownKeys:function(e){return Reflect.ownKeys(ft(e))},set:function(e,t,n){var r=Tt(ft(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=It(ft(e),t),a=null==i?void 0:i[Gt];if(a&&a.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(st(n,i)&&(void 0!==n||at(e.t,t)))return!0;At(e),Dt(e)}return e.o[t]===n&&(void 0!==n||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==It(e.t,t)||t in e.t?(e.R[t]=!1,At(e),Dt(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=ft(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){et(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){et(12)}},Yt={};rt($t,(function(e,t){Yt[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Yt.deleteProperty=function(e,t){return Yt.set.call(this,e,t,void 0)},Yt.set=function(e,t,n){return $t.set.call(this,e[0],t,n,e[0])};var Xt=function(){function e(e){var t=this;this.O=zt,this.D=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var a=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,o=Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=arguments[u];return a.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(o))}))}}var o;if("function"!=typeof n&&et(6),void 0!==r&&"function"!=typeof r&&et(7),nt(e)){var u=xt(t),s=Rt(t,e,void 0),c=!0;try{o=n(s),c=!1}finally{c?kt(u):wt(u)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return bt(u,r),St(e,u)}),(function(e){throw kt(u),e})):(bt(u,r),St(o,u))}if(!e||"object"!=typeof e){if(void 0===(o=n(e))&&(o=e),o===Bt&&(o=void 0),t.D&&dt(o,!0),r){var l=[],f=[];mt("Patches").M(e,o,l,f),r(l,f)}return o}et(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,a=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return[e,r,i]})):[a,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){nt(e)||et(8),tt(e)&&(e=Pt(e));var t=xt(this),n=Rt(this,e,void 0);return n[Gt].C=!0,wt(t),n},t.finishDraft=function(e,t){var n=(e&&e[Gt]).A;return bt(n,t),St(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!zt&&et(20),this.O=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=mt("Patches").$;return tt(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),Jt=new Xt,Zt=Jt.produce,en=(Jt.produceWithPatches.bind(Jt),Jt.setAutoFreeze.bind(Jt),Jt.setUseProxies.bind(Jt),Jt.applyPatches.bind(Jt),Jt.createDraft.bind(Jt),Jt.finishDraft.bind(Jt),Zt);function tn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tn(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rn(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var an="function"===typeof Symbol&&Symbol.observable||"@@observable",on=function(){return Math.random().toString(36).substring(7).split("").join(".")},un={INIT:"@@redux/INIT"+on(),REPLACE:"@@redux/REPLACE"+on(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+on()}};function sn(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function cn(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(rn(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(rn(1));return n(cn)(e,t)}if("function"!==typeof e)throw new Error(rn(2));var i=e,a=t,o=[],u=o,s=!1;function c(){u===o&&(u=o.slice())}function l(){if(s)throw new Error(rn(3));return a}function f(e){if("function"!==typeof e)throw new Error(rn(4));if(s)throw new Error(rn(5));var t=!0;return c(),u.push(e),function(){if(t){if(s)throw new Error(rn(6));t=!1,c();var n=u.indexOf(e);u.splice(n,1),o=null}}}function h(e){if(!sn(e))throw new Error(rn(7));if("undefined"===typeof e.type)throw new Error(rn(8));if(s)throw new Error(rn(9));try{s=!0,a=i(a,e)}finally{s=!1}for(var t=o=u,n=0;n<t.length;n++){(0,t[n])()}return e}return h({type:un.INIT}),(r={dispatch:h,subscribe:f,getState:l,replaceReducer:function(e){if("function"!==typeof e)throw new Error(rn(10));i=e,h({type:un.REPLACE})}})[an]=function(){var e,t=f;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(rn(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[an]=function(){return this},e},r}function ln(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:un.INIT}))throw new Error(rn(12));if("undefined"===typeof n(void 0,{type:un.PROBE_UNKNOWN_ACTION()}))throw new Error(rn(13))}))}(n)}catch(u){a=u}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},u=0;u<o.length;u++){var s=o[u],c=n[s],l=e[s],f=c(l,t);if("undefined"===typeof f){t&&t.type;throw new Error(rn(14))}i[s]=f,r=r||f!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}function fn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function hn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(rn(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=fn.apply(void 0,a)(n.dispatch),nn(nn({},n),{},{dispatch:r})}}}function dn(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var pn=dn();pn.withExtraArgument=dn;var vn=pn,mn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yn=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},gn=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},bn=Object.defineProperty,kn=Object.defineProperties,wn=Object.getOwnPropertyDescriptors,xn=Object.getOwnPropertySymbols,_n=Object.prototype.hasOwnProperty,Sn=Object.prototype.propertyIsEnumerable,En=function(e,t,n){return t in e?bn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Nn=function(e,t){for(var n in t||(t={}))_n.call(t,n)&&En(e,n,t[n]);if(xn)for(var r=0,i=xn(t);r<i.length;r++){n=i[r];Sn.call(t,n)&&En(e,n,t[n])}return e},Cn=function(e,t){return kn(e,wn(t))},In=function(e,t,n){return new Promise((function(r,i){var a=function(e){try{u(n.next(e))}catch(t){i(t)}},o=function(e){try{u(n.throw(e))}catch(t){i(t)}},u=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(a,o)};u((n=n.apply(e,t)).next())}))},Tn="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?fn:fn.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function Dn(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}var An=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return mn(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,gn([void 0],e[0].concat(this)))):new(t.bind.apply(t,gn([void 0],e.concat(this))))},t}(Array),Rn=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return mn(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,gn([void 0],e[0].concat(this)))):new(t.bind.apply(t,gn([void 0],e.concat(this))))},t}(Array);function Pn(e){return nt(e)?en(e,(function(){})):e}function On(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,new An);n&&(!function(e){return"boolean"===typeof e}(n)?r.push(vn.withExtraArgument(n.extraArgument)):r.push(vn));0;return r}(e)}}function jn(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return Nn(Nn({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function Ln(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"===typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}function Fn(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:Pn(e.initialState),i=e.reducers||{},a=Object.keys(i),o={},u={},s={};function c(){var t="function"===typeof e.extraReducers?Ln(e.extraReducers):[e.extraReducers],n=t[0],i=void 0===n?{}:n,a=t[1],o=void 0===a?[]:a,s=t[2],c=void 0===s?void 0:s,l=Nn(Nn({},i),u);return function(e,t,n,r){void 0===n&&(n=[]);var i,a="function"===typeof t?Ln(t):[t,n,r],o=a[0],u=a[1],s=a[2];if(function(e){return"function"===typeof e}(e))i=function(){return Pn(e())};else{var c=Pn(e);i=function(){return c}}function l(e,t){void 0===e&&(e=i());var n=gn([o[t.type]],u.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[s]),n.reduce((function(e,n){if(n){var r;if(tt(e))return void 0===(r=n(e,t))?e:r;if(nt(e))return en(e,(function(e){return n(e,t)}));if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return l.getInitialState=i,l}(r,(function(e){for(var t in l)e.addCase(t,l[t]);for(var n=0,r=o;n<r.length;n++){var i=r[n];e.addMatcher(i.matcher,i.reducer)}c&&e.addDefaultCase(c)}))}return a.forEach((function(e){var n,r,a=i[e],c=t+"/"+e;"reducer"in a?(n=a.reducer,r=a.prepare):n=a,o[e]=n,u[c]=n,s[e]=r?jn(c,r):jn(c)})),{name:t,reducer:function(e,t){return n||(n=c()),n(e,t)},actions:s,caseReducers:o,getInitialState:function(){return n||(n=c()),n.getInitialState()}}}var Mn=function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},Un=["name","message","stack","code"],Vn=function(e,t){this.payload=e,this.meta=t},zn=function(e,t){this.payload=e,this.meta=t},Bn=function(e){if("object"===typeof e&&null!==e){for(var t={},n=0,r=Un;n<r.length;n++){var i=r[n];"string"===typeof e[i]&&(t[i]=e[i])}return t}return{message:String(e)}};!function(){function e(e,t,n){var r=jn(e+"/fulfilled",(function(e,t,n,r){return{payload:e,meta:Cn(Nn({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}})),i=jn(e+"/pending",(function(e,t,n){return{payload:void 0,meta:Cn(Nn({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),a=jn(e+"/rejected",(function(e,t,r,i,a){return{payload:i,error:(n&&n.serializeError||Bn)(e||"Rejected"),meta:Cn(Nn({},a||{}),{arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),o="undefined"!==typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){0},e}();return Object.assign((function(e){return function(u,s,c){var l,f=(null==n?void 0:n.idGenerator)?n.idGenerator(e):Mn(),h=new o;function d(e){l=e,h.abort()}var p=function(){return In(this,null,(function(){var o,p,v,m,y,g;return yn(this,(function(b){switch(b.label){case 0:return b.trys.push([0,4,,5]),m=null==(o=null==n?void 0:n.condition)?void 0:o.call(n,e,{getState:s,extra:c}),null===(k=m)||"object"!==typeof k||"function"!==typeof k.then?[3,2]:[4,m];case 1:m=b.sent(),b.label=2;case 2:if(!1===m||h.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return!0,y=new Promise((function(e,t){return h.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:l||"Aborted"})}))})),u(i(f,e,null==(p=null==n?void 0:n.getPendingMeta)?void 0:p.call(n,{requestId:f,arg:e},{getState:s,extra:c}))),[4,Promise.race([y,Promise.resolve(t(e,{dispatch:u,getState:s,extra:c,requestId:f,signal:h.signal,abort:d,rejectWithValue:function(e,t){return new Vn(e,t)},fulfillWithValue:function(e,t){return new zn(e,t)}})).then((function(t){if(t instanceof Vn)throw t;return t instanceof zn?r(t.payload,f,e,t.meta):r(t,f,e)}))])];case 3:return v=b.sent(),[3,5];case 4:return g=b.sent(),v=g instanceof Vn?a(null,f,e,g.payload,g.meta):a(g,f,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&a.match(v)&&v.meta.condition||u(v),[2,v]}var k}))}))}();return Object.assign(p,{abort:d,requestId:f,arg:e,unwrap:function(){return p.then(qn)}})}}),{pending:i,rejected:a,fulfilled:r,typePrefix:e})}e.withTypes=function(){return e}}();function qn(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}Object.assign;var Gn="listenerMiddleware";jn(Gn+"/add"),jn(Gn+"/removeAll"),jn(Gn+"/remove");"function"===typeof queueMicrotask&&queueMicrotask.bind("undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:globalThis);var Kn,Hn=function(e){return function(t){setTimeout(t,e)}};"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Hn(10);jt();var Wn=Fn({name:"loading",initialState:{isShowing:!1},reducers:{setIsShowing:function(e,t){e.isShowing=t.payload}}}),Qn=function(e){return e.loading.isShowing},$n=Wn.actions.setIsShowing,Yn=Wn.reducer,Xn=n(184);function Jn(e){return!1===Ge(Qn)?null:(0,Xn.jsx)("div",{className:"flex items-center justify-center absolute inset-0 z-20",children:(0,Xn.jsx)("div",{className:"loader"})})}function Zn(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var er=n(694),tr=n.n(er),nr=["as","disabled"];function rr(e){var t=e.tagName,n=e.disabled,r=e.href,i=e.target,a=e.rel,o=e.role,u=e.onClick,s=e.tabIndex,c=void 0===s?0:s,l=e.type;t||(t=null!=r||null!=i||null!=a?"a":"button");var f={tagName:t};if("button"===t)return[{type:l||"button",disabled:n},f];var h=function(e){(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==u||u(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:null!=o?o:"button",disabled:void 0,tabIndex:n?void 0:c,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?a:void 0,onClick:h,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),h(e))}},f]}var ir=r.forwardRef((function(e,t){var n=e.as,r=e.disabled,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,nr),a=E(rr(Object.assign({tagName:n,disabled:r},i)),2),o=a[0],u=a[1].tagName;return(0,Xn.jsx)(u,Object.assign({},i,o,{ref:t}))}));ir.displayName="Button";var ar=["xxl","xl","lg","md","sm","xs"],or=r.createContext({prefixes:{},breakpoints:ar,minBreakpoint:"xs"});or.Consumer,or.Provider;function ur(e,t){var n=(0,r.useContext)(or).prefixes;return e||n[t]||t}function sr(){return(0,r.useContext)(or).breakpoints}function cr(){return(0,r.useContext)(or).minBreakpoint}var lr=["as","bsPrefix","variant","size","active","disabled","className"],fr=r.forwardRef((function(e,t){var n=e.as,r=e.bsPrefix,i=e.variant,a=void 0===i?"primary":i,o=e.size,u=e.active,s=void 0!==u&&u,c=e.disabled,l=void 0!==c&&c,f=e.className,h=Zn(e,lr),d=ur(r,"btn"),p=E(rr(nn({tagName:n,disabled:l},h)),2),v=p[0],m=p[1].tagName;return(0,Xn.jsx)(m,nn(nn(nn({},v),h),{},{ref:t,disabled:l,className:tr()(f,d,s&&"active",a&&"".concat(d,"-").concat(a),o&&"".concat(d,"-").concat(o),h.href&&l&&"disabled")}))}));fr.displayName="Button";var hr=fr,dr=/-(.)/g;var pr=["className","bsPrefix","as"],vr=function(e){return e[0].toUpperCase()+(t=e,t.replace(dr,(function(e,t){return t.toUpperCase()}))).slice(1);var t};function mr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.displayName,i=void 0===n?vr(e):n,a=t.Component,o=t.defaultProps,u=r.forwardRef((function(t,n){var r=t.className,i=t.bsPrefix,u=t.as,s=void 0===u?a||"div":u,c=Zn(t,pr),l=nn(nn({},o),c),f=ur(i,e);return(0,Xn.jsx)(s,nn({ref:n,className:tr()(r,f)},l))}));return u.displayName=i,u}var yr=function(e){return r.forwardRef((function(t,n){return(0,Xn.jsx)("div",nn(nn({},t),{},{ref:n,className:tr()(t.className,e)}))}))},gr=["bsPrefix","className","variant","as"],br=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.variant,a=e.as,o=void 0===a?"img":a,u=Zn(e,gr),s=ur(n,"card-img");return(0,Xn.jsx)(o,nn({ref:t,className:tr()(i?"".concat(s,"-").concat(i):s,r)},u))}));br.displayName="CardImg";var kr=br,wr=r.createContext(null);wr.displayName="CardHeaderContext";var xr=wr,_r=["bsPrefix","className","as"],Sr=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.className,a=e.as,o=void 0===a?"div":a,u=Zn(e,_r),s=ur(n,"card-header"),c=(0,r.useMemo)((function(){return{cardHeaderBsPrefix:s}}),[s]);return(0,Xn.jsx)(xr.Provider,{value:c,children:(0,Xn.jsx)(o,nn(nn({ref:t},u),{},{className:tr()(i,s)}))})}));Sr.displayName="CardHeader";var Er=Sr,Nr=["bsPrefix","className","bg","text","border","body","children","as"],Cr=yr("h5"),Ir=yr("h6"),Tr=mr("card-body"),Dr=mr("card-title",{Component:Cr}),Ar=mr("card-subtitle",{Component:Ir}),Rr=mr("card-link",{Component:"a"}),Pr=mr("card-text",{Component:"p"}),Or=mr("card-footer"),jr=mr("card-img-overlay"),Lr=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.bg,a=e.text,o=e.border,u=e.body,s=void 0!==u&&u,c=e.children,l=e.as,f=void 0===l?"div":l,h=Zn(e,Nr),d=ur(n,"card");return(0,Xn.jsx)(f,nn(nn({ref:t},h),{},{className:tr()(r,d,i&&"bg-".concat(i),a&&"text-".concat(a),o&&"border-".concat(o)),children:s?(0,Xn.jsx)(Tr,{children:c}):c}))}));Lr.displayName="Card";var Fr=Object.assign(Lr,{Img:kr,Title:Dr,Subtitle:Ar,Body:Tr,Link:Rr,Text:Pr,Header:Er,Footer:Or,ImgOverlay:jr}),Mr=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ur={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Mr(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new Vr;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Vr=function(e){m(n,e);var t=k(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return p(n)}(x(Error)),zr=function(e){return function(e){var t=Mr(e);return Ur.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Br=function(e){try{return Ur.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function qr(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=qr(e[n],t[n]));return e}var Gr=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},Kr=function(){try{return Gr()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/readbook",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&Br(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Hr=function(){var e;return null===(e=Kr())||void 0===e?void 0:e.config},Wr=function(){function e(){var t=this;l(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return p(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Qr(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[zr(JSON.stringify({alg:"none",type:"JWT"})),zr(JSON.stringify(a)),""].join(".")}function $r(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Yr(){var e,t=null===(e=Kr())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function Xr(){try{return"object"===typeof indexedDB}catch(e){return!1}}var Jr=function(e){m(n,e);var t=k(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(b(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(b(a),Zr.prototype.create),a}return p(n)}(x(Error)),Zr=function(){function e(t,n,r){l(this,e),this.service=t,this.serviceName=n,this.errors=r}return p(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(ei,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Jr(n,a,t)}}]),e}();var ei=/\{\$([^}]+)}/g;function ti(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ni(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(ri(u)&&ri(s)){if(!ni(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function ri(e){return null!==e&&"object"===typeof e}function ii(e,t){var n=new ai(e,t);return n.subscribe.bind(n)}var ai=function(){function e(t,n){var r=this;l(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return p(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=N(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=oi),void 0===r.error&&(r.error=oi),void 0===r.complete&&(r.complete=oi);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function oi(){}function ui(e){return e&&e._delegate?e._delegate:e}function si(){si=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(I){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),u=new N(i||[]);return r(o,"_invoke",{value:x(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var h={};function d(){}function p(){}function v(){}var m={};s(m,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(C([])));g&&g!==t&&n.call(g,a)&&(m=g);var b=v.prototype=d.prototype=Object.create(m);function k(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==f(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function x(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=_(o,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function _(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function C(e){if(e||""===e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}throw new TypeError(f(e)+" is not iterable")}return p.prototype=v,r(b,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},k(w.prototype),s(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(b),s(b,u,"Generator"),s(b,a,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function ci(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function li(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){ci(a,r,i,o,u,"next",e)}function u(e){ci(a,r,i,o,u,"throw",e)}o(void 0)}))}}var fi=function(){function e(t,n,r){l(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return p(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),hi="[DEFAULT]",di=function(){function e(t,n){l(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return p(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Wr;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:hi})}catch(s){}var t,n=N(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=E(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hi;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=li(si().mark((function e(){var t;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(c(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),c(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hi;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hi;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=N(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=E(i.value,2),s=u[0],c=u[1];r===this.normalizeInstanceIdentifier(s)&&c.resolve(a)}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=N(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(u){i.e(u)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===hi?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hi;return this.component?this.component.multipleInstances?e:hi:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var pi,vi,mi=function(){function e(t){l(this,e),this.name=t,this.providers=new Map}return p(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new di(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),yi=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(vi||(vi={}));var gi={debug:vi.DEBUG,verbose:vi.VERBOSE,info:vi.INFO,warn:vi.WARN,error:vi.ERROR,silent:vi.SILENT},bi=vi.INFO,ki=(Oe(pi={},vi.DEBUG,"log"),Oe(pi,vi.VERBOSE,"log"),Oe(pi,vi.INFO,"info"),Oe(pi,vi.WARN,"warn"),Oe(pi,vi.ERROR,"error"),pi),wi=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=ki[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},xi=function(){function e(t){l(this,e),this.name=t,this._logLevel=bi,this._logHandler=wi,this._userLogHandler=null,yi.push(this)}return p(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in vi))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?gi[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,vi.DEBUG].concat(t)),this._logHandler.apply(this,[this,vi.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,vi.VERBOSE].concat(t)),this._logHandler.apply(this,[this,vi.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,vi.INFO].concat(t)),this._logHandler.apply(this,[this,vi.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,vi.WARN].concat(t)),this._logHandler.apply(this,[this,vi.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,vi.ERROR].concat(t)),this._logHandler.apply(this,[this,vi.ERROR].concat(t))}}]),e}();var _i,Si,Ei=function(e,t){return t.some((function(t){return e instanceof t}))};var Ni=new WeakMap,Ci=new WeakMap,Ii=new WeakMap,Ti=new WeakMap,Di=new WeakMap;var Ai={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ci.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ii.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Oi(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Ri(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Si||(Si=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ji(this),n),Oi(Ni.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Oi(e.apply(ji(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[ji(this),t].concat(r));return Ii.set(a,t.sort?t.sort():[t]),Oi(a)}}function Pi(e){return"function"===typeof e?Ri(e):(e instanceof IDBTransaction&&function(e){if(!Ci.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Ci.set(e,t)}}(e),Ei(e,_i||(_i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Ai):e)}function Oi(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Oi(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Ni.set(t,e)})).catch((function(){})),Di.set(t,e),t}(e);if(Ti.has(e))return Ti.get(e);var t=Pi(e);return t!==e&&(Ti.set(e,t),Di.set(t,e)),t}var ji=function(e){return Di.get(e)};var Li,Fi,Mi=["get","getKey","getAll","getAllKeys","count"],Ui=["put","add","delete","clear"],Vi=new Map;function zi(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Vi.get(t))return Vi.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Ui.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Mi.includes(n))){var a=function(){var e=li(si().mark((function e(t){var a,o,u,s,c,l,f=arguments;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Vi.set(t,a),a}}}Ai=function(e){return nn(nn({},e),{},{get:function(t,n,r){return zi(t,n)||e.get(t,n,r)},has:function(t,n){return!!zi(t,n)||e.has(t,n)}})}(Ai);var Bi=function(){function e(t){l(this,e),this.container=t}return p(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var qi="@firebase/app",Gi="0.9.15",Ki=new xi("@firebase/app"),Hi="[DEFAULT]",Wi=(Oe(Li={},qi,"fire-core"),Oe(Li,"@firebase/app-compat","fire-core-compat"),Oe(Li,"@firebase/analytics","fire-analytics"),Oe(Li,"@firebase/analytics-compat","fire-analytics-compat"),Oe(Li,"@firebase/app-check","fire-app-check"),Oe(Li,"@firebase/app-check-compat","fire-app-check-compat"),Oe(Li,"@firebase/auth","fire-auth"),Oe(Li,"@firebase/auth-compat","fire-auth-compat"),Oe(Li,"@firebase/database","fire-rtdb"),Oe(Li,"@firebase/database-compat","fire-rtdb-compat"),Oe(Li,"@firebase/functions","fire-fn"),Oe(Li,"@firebase/functions-compat","fire-fn-compat"),Oe(Li,"@firebase/installations","fire-iid"),Oe(Li,"@firebase/installations-compat","fire-iid-compat"),Oe(Li,"@firebase/messaging","fire-fcm"),Oe(Li,"@firebase/messaging-compat","fire-fcm-compat"),Oe(Li,"@firebase/performance","fire-perf"),Oe(Li,"@firebase/performance-compat","fire-perf-compat"),Oe(Li,"@firebase/remote-config","fire-rc"),Oe(Li,"@firebase/remote-config-compat","fire-rc-compat"),Oe(Li,"@firebase/storage","fire-gcs"),Oe(Li,"@firebase/storage-compat","fire-gcs-compat"),Oe(Li,"@firebase/firestore","fire-fst"),Oe(Li,"@firebase/firestore-compat","fire-fst-compat"),Oe(Li,"fire-js","fire-js"),Oe(Li,"firebase","fire-js-all"),Li),Qi=new Map,$i=new Map;function Yi(e,t){try{e.container.addComponent(t)}catch(n){Ki.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Xi(e,t){e.container.addOrOverwriteComponent(t)}function Ji(e){var t=e.name;if($i.has(t))return Ki.debug("There were multiple attempts to register component ".concat(t,".")),!1;$i.set(t,e);var n,r=N(Qi.values());try{for(r.s();!(n=r.n()).done;){Yi(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Zi(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ea(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Hi;Zi(e,t).clearInstance(n)}function ta(){$i.clear()}var na=(Oe(Fi={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),Oe(Fi,"bad-app-name","Illegal App name: '{$appName}"),Oe(Fi,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Oe(Fi,"app-deleted","Firebase App named '{$appName}' already deleted"),Oe(Fi,"no-options","Need to provide options, when not being deployed to hosting via source."),Oe(Fi,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Oe(Fi,"invalid-log-argument","First argument to `onLog` must be null or a function."),Oe(Fi,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),Oe(Fi,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),Oe(Fi,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),Oe(Fi,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Fi),ra=new Zr("app","Firebase",na),ia=function(){function e(t,n,r){var i=this;l(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fi("app",(function(){return i}),"PUBLIC"))}return p(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw ra.create("app-deleted",{appName:this._name})}}]),e}(),aa="10.1.0";function oa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:Hi,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw ra.create("bad-app-name",{appName:String(i)});if(n||(n=Hr()),!n)throw ra.create("no-options");var a=Qi.get(i);if(a){if(ni(n,a.options)&&ni(r,a.config))return a;throw ra.create("duplicate-app",{appName:i})}var o,u=new mi(i),s=N($i.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new ia(n,r,u);return Qi.set(i,l),l}function ua(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hi,t=Qi.get(e);if(!t&&e===Hi&&Hr())return oa();if(!t)throw ra.create("no-app",{appName:e});return t}function sa(){return Array.from(Qi.values())}function ca(e){return la.apply(this,arguments)}function la(){return(la=li(si().mark((function e(t){var n;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Qi.has(n)){e.next=6;break}return Qi.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fa(e,t,n){var r,i=null!==(r=Wi[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ki.warn(u.join(" "))}Ji(new fi("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function ha(e,t){if(null!==e&&"function"!==typeof e)throw ra.create("invalid-log-argument");!function(e,t){var n,r=N(yi);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=gi[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:vi[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function da(e){var t;t=e,yi.forEach((function(e){e.setLogLevel(t)}))}var pa="firebase-heartbeat-database",va=1,ma="firebase-heartbeat-store",ya=null;function ga(){return ya||(ya=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Oi(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Oi(u.result),e.oldVersion,e.newVersion,Oi(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}(pa,va,{upgrade:function(e,t){if(0===t)e.createObjectStore(ma)}}).catch((function(e){throw ra.create("idb-open",{originalErrorMessage:e.message})}))),ya}function ba(e){return ka.apply(this,arguments)}function ka(){return ka=li(si().mark((function e(t){var n,r,i;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ga();case 3:return n=e.sent,e.next=6,n.transaction(ma).objectStore(ma).get(_a(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof Jr?Ki.warn(e.t0.message):(i=ra.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Ki.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),ka.apply(this,arguments)}function wa(e,t){return xa.apply(this,arguments)}function xa(){return xa=li(si().mark((function e(t,n){var r,i,a,o;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ga();case 3:return r=e.sent,i=r.transaction(ma,"readwrite"),a=i.objectStore(ma),e.next=8,a.put(n,_a(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof Jr?Ki.warn(e.t0.message):(o=ra.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Ki.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),xa.apply(this,arguments)}function _a(e){return"".concat(e.name,"!").concat(e.options.appId)}var Sa=function(){function e(t){var n=this;l(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Ta(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return p(e,[{key:"triggerHeartbeat",value:function(){var e=li(si().mark((function e(){var t,n,r;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Ea(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=li(si().mark((function e(){var t,n,r,i,a;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Ea(),n=Na(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=zr(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ea(){return(new Date).toISOString().substring(0,10)}function Na(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=N(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Da(r)>n)return a.dates.pop(),0}else if(r.push({agent:e.agent,dates:[e.date]}),Da(r)>n)return r.pop(),0;i=i.slice(1)};for(a.s();!(t=a.n()).done&&0!==o(););}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Ca,Ia,Ta=function(){function e(t){l(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return p(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=li(si().mark((function e(){return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Xr()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=li(si().mark((function e(){var t;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,ba(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=li(si().mark((function e(t){var n,r;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",wa(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=li(si().mark((function e(t){var n,r;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",wa(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(c(r.heartbeats),c(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Da(e){return zr(JSON.stringify({version:2,heartbeats:e})).length}Ca="",Ji(new fi("platform-logger",(function(e){return new Bi(e)}),"PRIVATE")),Ji(new fi("heartbeat",(function(e){return new Sa(e)}),"PRIVATE")),fa(qi,Gi,Ca),fa(qi,Gi,"esm2017"),fa("fire-js","");var Aa=function(){function e(t,n){var r=this;l(this,e),this._delegate=t,this.firebase=n,Yi(t,new fi("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return p(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),ca(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hi;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hi;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Yi(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Xi(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Ra=(Oe(Ia={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Oe(Ia,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Ia),Pa=new Zr("app-compat","Firebase",Ra);var Oa=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=oa(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(ti(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:fa,setLogLevel:da,onLog:ha,apps:null,SDK_VERSION:aa,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Ji(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Pa.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&qr(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!ti(n,e=e||Hi))throw Pa.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Aa);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){qr(n,e)},createSubscribe:ii,ErrorFactory:Zr,deepExtend:qr}),n}(),ja=new xi("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){ja.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var La=self.firebase.SDK_VERSION;La&&La.indexOf("LITE")>=0&&ja.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Fa=Oa;!function(e){fa("@firebase/app-compat","0.2.15",e)}();function Ma(){return Ma="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Ma.apply(this,arguments)}Fa.registerVersion("firebase","10.1.0","app-compat");var Ua,Va="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},za={},Ba=Ba||{},qa=Va||self;function Ga(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Ka(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Ha="closure_uid_"+(1e9*Math.random()>>>0),Wa=0;function Qa(e,t,n){return e.call.apply(e.bind,arguments)}function $a(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Ya(e,t,n){return(Ya=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Qa:$a).apply(null,arguments)}function Xa(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Ja(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Za(){this.s=this.s,this.o=this.o}Za.prototype.s=!1,Za.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,Ha)&&e[Ha]||(e[Ha]=++Wa)}(this)},Za.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var eo=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function to(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function no(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Ga(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function ro(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ro.prototype.h=function(){this.defaultPrevented=!0};var io=function(){if(!qa.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{qa.addEventListener("test",(function(){}),t),qa.removeEventListener("test",(function(){}),t)}catch(st){}return e}();function ao(e){return/^[\s\xa0]*$/.test(e)}function oo(){var e=qa.navigator;return e&&(e=e.userAgent)?e:""}function uo(e){return-1!=oo().indexOf(e)}function so(e){return so[" "](e),e}so[" "]=function(){};var co,lo,fo=uo("Opera"),ho=uo("Trident")||uo("MSIE"),po=uo("Edge"),vo=po||ho,mo=uo("Gecko")&&!(-1!=oo().toLowerCase().indexOf("webkit")&&!uo("Edge"))&&!(uo("Trident")||uo("MSIE"))&&!uo("Edge"),yo=-1!=oo().toLowerCase().indexOf("webkit")&&!uo("Edge");function go(){var e=qa.document;return e?e.documentMode:void 0}e:{var bo="",ko=function(){var e=oo();return mo?/rv:([^\);]+)(\)|;)/.exec(e):po?/Edge\/([\d\.]+)/.exec(e):ho?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):yo?/WebKit\/(\S+)/.exec(e):fo?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(ko&&(bo=ko?ko[1]:""),ho){var wo=go();if(null!=wo&&wo>parseFloat(bo)){co=String(wo);break e}}co=bo}if(qa.document&&ho){var xo=go();lo=xo||(parseInt(co,10)||void 0)}else lo=void 0;var _o=lo;function So(e,t){if(ro.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(mo){e:{try{so(t.nodeName);var i=!0;break e}catch(ut){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Eo[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&So.$.h.call(this)}}Ja(So,ro);var Eo={2:"touch",3:"pen",4:"mouse"};So.prototype.h=function(){So.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var No="closure_listenable_"+(1e6*Math.random()|0),Co=0;function Io(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Co,this.fa=this.ia=!1}function To(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Do(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Ao(e){var t={};for(var n in e)t[n]=e[n];return t}var Ro="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Po(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Ro.length;a++)n=Ro[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Oo(e){this.src=e,this.g={},this.h=0}function jo(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=eo(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(To(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Lo(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}Oo.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Lo(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Io(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var Fo="closure_lm_"+(1e6*Math.random()|0),Mo={};function Uo(e,t,n,r,i){if(r&&r.once)return zo(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Uo(e,t[a],n,r,i);return null}return n=Qo(n),e&&e[No]?e.O(t,n,Ka(r)?!!r.capture:!!r,i):Vo(e,t,n,!1,r,i)}function Vo(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Ka(i)?!!i.capture:!!i,u=Ho(e);if(u||(e[Fo]=u=new Oo(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Ko;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)io||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Go(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function zo(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)zo(e,t[a],n,r,i);return null}return n=Qo(n),e&&e[No]?e.P(t,n,Ka(r)?!!r.capture:!!r,i):Vo(e,t,n,!0,r,i)}function Bo(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Bo(e,t[a],n,r,i);else r=Ka(r)?!!r.capture:!!r,n=Qo(n),e&&e[No]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Lo(a=e.g[t],n,r,i))&&(To(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Ho(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Lo(t,n,r,i)),(n=-1<e?t[e]:null)&&qo(n))}function qo(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[No])jo(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Go(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ho(t))?(jo(n,e),0==n.h&&(n.src=null,t[Fo]=null)):To(e)}}}function Go(e){return e in Mo?Mo[e]:Mo[e]="on"+e}function Ko(e,t){if(e.fa)e=!0;else{t=new So(t,this);var n=e.listener,r=e.la||e.src;e.ia&&qo(e),e=n.call(r,t)}return e}function Ho(e){return(e=e[Fo])instanceof Oo?e:null}var Wo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qo(e){return"function"===typeof e?e:(e[Wo]||(e[Wo]=function(t){return e.handleEvent(t)}),e[Wo])}function $o(){Za.call(this),this.i=new Oo(this),this.S=this,this.J=null}function Yo(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new ro(t,e);else if(t instanceof ro)t.target=t.target||e;else{var i=t;Po(t=new ro(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Xo(o,r,!0,t)&&i}if(i=Xo(o=t.g=e,r,!0,t)&&i,i=Xo(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Xo(o=t.g=n[a],r,!1,t)&&i}function Xo(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&jo(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Ja($o,Za),$o.prototype[No]=!0,$o.prototype.removeEventListener=function(e,t,n,r){Bo(this,e,t,n,r)},$o.prototype.N=function(){if($o.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)To(n[r]);delete t.g[e],t.h--}}this.J=null},$o.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},$o.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Jo=qa.JSON.stringify,Zo=function(){function e(t,n){l(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return p(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function eu(){var e=su,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var tu=function(){function e(){l(this,e),this.h=this.g=null}return p(e,[{key:"add",value:function(e,t){var n=nu.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),nu=new Zo((function(){return new ru}),(function(e){return e.reset()})),ru=function(){function e(){l(this,e),this.next=this.g=this.h=null}return p(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function iu(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function au(e){qa.setTimeout((function(){throw e}),0)}var ou,uu=!1,su=new tu,cu=function(){var e=qa.Promise.resolve(void 0);ou=function(){e.then(lu)}},lu=function(){for(var e;e=eu();){try{e.h.call(e.g)}catch(st){au(st)}var t=nu;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}uu=!1};function fu(e,t){$o.call(this),this.h=e||1,this.g=t||qa,this.j=Ya(this.qb,this),this.l=Date.now()}function hu(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function du(e,t,n){if("function"===typeof e)n&&(e=Ya(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Ya(e.handleEvent,e)}return 2147483647<Number(t)?-1:qa.setTimeout(e,t||0)}function pu(e){e.g=du((function(){e.g=null,e.i&&(e.i=!1,pu(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Ja(fu,$o),(Ua=fu.prototype).ga=!1,Ua.T=null,Ua.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Yo(this,"tick"),this.ga&&(hu(this),this.start()))}},Ua.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ua.N=function(){fu.$.N.call(this),hu(this),delete this.g};var vu=function(e){m(n,e);var t=k(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return p(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:pu(this)}},{key:"N",value:function(){Ma(y(n.prototype),"N",this).call(this),this.g&&(qa.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Za);function mu(e){Za.call(this),this.h=e,this.g={}}Ja(mu,Za);var yu=[];function gu(e,t,n,r){Array.isArray(n)||(n&&(yu[0]=n.toString()),n=yu);for(var i=0;i<n.length;i++){var a=Uo(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function bu(e){Do(e.g,(function(e,t){this.g.hasOwnProperty(t)&&qo(e)}),e),e.g={}}function ku(){this.g=!0}function wu(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Jo(n)}catch(et){return t}}(e,n)+(r?" "+r:"")}))}mu.prototype.N=function(){mu.$.N.call(this),bu(this)},mu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ku.prototype.Ea=function(){this.g=!1},ku.prototype.info=function(){};var xu={},_u=null;function Su(){return _u=_u||new $o}function Eu(e){ro.call(this,xu.Ta,e)}function Nu(e){var t=Su();Yo(t,new Eu(t))}function Cu(e,t){ro.call(this,xu.STAT_EVENT,e),this.stat=t}function Iu(e){var t=Su();Yo(t,new Cu(t,e))}function Tu(e,t){ro.call(this,xu.Ua,e),this.size=t}function Du(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return qa.setTimeout((function(){e()}),t)}xu.Ta="serverreachability",Ja(Eu,ro),xu.STAT_EVENT="statevent",Ja(Cu,ro),xu.Ua="timingevent",Ja(Tu,ro);var Au={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ru={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Pu(){}function Ou(e){return e.h||(e.h=e.i())}function ju(){}Pu.prototype.h=null;var Lu,Fu={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Mu(){ro.call(this,"d")}function Uu(){ro.call(this,"c")}function Vu(){}function zu(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new mu(this),this.P=qu,e=vo?125:void 0,this.V=new fu(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Bu}function Bu(){this.i=null,this.g="",this.h=!1}Ja(Mu,ro),Ja(Uu,ro),Ja(Vu,Pu),Vu.prototype.g=function(){return new XMLHttpRequest},Vu.prototype.i=function(){return{}},Lu=new Vu;var qu=45e3,Gu={},Ku={};function Hu(e,t,n){e.L=1,e.v=fs(os(t)),e.s=n,e.S=!0,Wu(e,null)}function Wu(e,t){e.G=Date.now(),Xu(e),e.A=os(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Ss(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Bu,e.g=Sc(e.l,n?t:null,!e.s),0<e.O&&(e.M=new vu(Ya(e.Pa,e,e.g),e.O)),gu(e.U,e.g,"readystatechange",e.nb),t=e.I?Ao(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Nu(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function Qu(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function $u(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=Yu(e,n))==Ku){4==t&&(e.o=4,Iu(14),i=!1),wu(e.j,e.m,null,"[Incomplete Response]");break}if(r==Gu){e.o=4,Iu(15),wu(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}wu(e.j,e.m,r,null),ns(e,r)}Qu(e)&&r!=Ku&&r!=Gu&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Iu(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),mc(t),t.M=!0,Iu(11))):(wu(e.j,e.m,n,"[Invalid Chunked Response]"),ts(e),es(e))}function Yu(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ku:(n=Number(t.substring(n,r)),isNaN(n)?Gu:(r+=1)+n>t.length?Ku:(t=t.slice(r,r+n),e.C=r+n,t))}function Xu(e){e.Y=Date.now()+e.P,Ju(e,e.P)}function Ju(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Du(Ya(e.lb,e),t)}function Zu(e){e.B&&(qa.clearTimeout(e.B),e.B=null)}function es(e){0==e.l.H||e.J||bc(e.l,e)}function ts(e){Zu(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,hu(e.V),bu(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function ns(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||As(n.i,e)))if(!e.K&&As(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;gc(n),sc(n)}vc(n),Iu(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Du(Ya(n.ib,n),6e3));if(1>=Ds(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else wc(n,11)}else if((e.K||n.g==e)&&gc(n),!ao(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var u=a[4];null!=u&&(n.Ga=u,n.l.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Rs(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,ls(r.I,r.F,h))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=_c(r,r.J?r.pa:null,r.Y),d.K){Ps(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.B&&(Zu(p),Xu(p)),r.g=d}else pc(r);0<n.j.length&&lc(n)}else"stop"!=a[0]&&"close"!=a[0]||wc(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?wc(n,7):uc(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}Nu()}catch(a){}}function rs(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Ga(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Ga(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Ga(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Ua=zu.prototype).setTimeout=function(e){this.P=e},Ua.nb=function(e){e=e.target;var t=this.M;t&&3==tc(e)?t.l():this.Pa(e)},Ua.Pa=function(e){try{if(e==this.g)e:{var t=tc(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||vo||this.g&&(this.h.h||this.g.ja()||nc(this.g)))){this.J||4!=t||7==n||Nu(),Zu(this);var r=this.g.da();this.ca=r;t:if(Qu(this)){var i=nc(this.g);e="";var a=i.length,o=4==tc(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ts(this),es(this);var u="";break t}this.h.i=new qa.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ao(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Iu(12),ts(this),es(this);break e}wu(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ns(this,r)}this.S?($u(this,t,u),vo&&this.i&&3==t&&(gu(this.U,this.V,"tick",this.mb),this.V.start())):(wu(this.j,this.m,u,null),ns(this,u)),4==t&&ts(this),this.i&&!this.J&&(4==t?bc(this.l,this):(this.i=!1,Xu(this)))}else(function(e){var t={};e=(e.g&&2<=tc(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!ao(e[n])){var r=iu(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<u.indexOf("Unknown SID")?(this.o=3,Iu(12)):(this.o=0,Iu(13)),ts(this),es(this)}}}catch(t){}},Ua.mb=function(){if(this.g){var e=tc(this.g),t=this.g.ja();this.C<t.length&&(Zu(this),$u(this,e,t),this.i&&4!=e&&Xu(this))}},Ua.cancel=function(){this.J=!0,ts(this)},Ua.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Nu(),Iu(17)),ts(this),this.o=2,es(this)):Ju(this,this.Y-e)};var is=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function as(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof as){this.h=e.h,us(this,e.j),this.s=e.s,this.g=e.g,ss(this,e.m),this.l=e.l;var t=e.i,n=new ks;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),cs(this,n),this.o=e.o}else e&&(t=String(e).match(is))?(this.h=!1,us(this,t[1]||"",!0),this.s=hs(t[2]||""),this.g=hs(t[3]||"",!0),ss(this,t[4]),this.l=hs(t[5]||"",!0),cs(this,t[6]||"",!0),this.o=hs(t[7]||"")):(this.h=!1,this.i=new ks(null,this.h))}function os(e){return new as(e)}function us(e,t,n){e.j=n?hs(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ss(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function cs(e,t,n){t instanceof ks?(e.i=t,function(e,t){t&&!e.j&&(ws(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(xs(this,t),Ss(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ds(t,gs)),e.i=new ks(t,e.h))}function ls(e,t,n){e.i.set(t,n)}function fs(e){return ls(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function hs(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ds(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ps),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ps(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}as.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ds(t,vs,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ds(t,vs,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ds(n,"/"==n.charAt(0)?ys:ms,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ds(n,bs)),e.join("")};var vs=/[#\/\?@]/g,ms=/[#\?:]/g,ys=/[#\?]/g,gs=/[#\?@]/g,bs=/#/g;function ks(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ws(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function xs(e,t){ws(e),t=Es(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function _s(e,t){return ws(e),t=Es(e,t),e.g.has(t)}function Ss(e,t,n){xs(e,t),0<n.length&&(e.i=null,e.g.set(Es(e,t),to(n)),e.h+=n.length)}function Es(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Ua=ks.prototype).add=function(e,t){ws(this),this.i=null,e=Es(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Ua.forEach=function(e,t){ws(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Ua.ta=function(){ws(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Ua.Z=function(e){ws(this);var t=[];if("string"===typeof e)_s(this,e)&&(t=t.concat(this.g.get(Es(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Ua.set=function(e,t){return ws(this),this.i=null,_s(this,e=Es(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Ua.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Ua.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Ns=p((function e(t,n){l(this,e),this.g=t,this.map=n}));function Cs(e){this.l=e||Is,qa.PerformanceNavigationTiming?e=0<(e=qa.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(qa.g&&qa.g.Ka&&qa.g.Ka()&&qa.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Is=10;function Ts(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ds(e){return e.h?1:e.g?e.g.size:0}function As(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Rs(e,t){e.g?e.g.add(t):e.h=t}function Ps(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Os(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=N(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return to(e.i)}Cs.prototype.cancel=function(){if(this.i=Os(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=N(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var js=function(){function e(){l(this,e)}return p(e,[{key:"stringify",value:function(e){return qa.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return qa.JSON.parse(e,void 0)}}]),e}();function Ls(){this.g=new js}function Fs(e,t,n){var r=n||"";try{rs(e,(function(e,n){var i=e;Ka(e)&&(i=Jo(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ms(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(ut){}}function Us(e){this.l=e.fc||null,this.j=e.ob||!1}function Vs(e,t){$o.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=zs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ja(Us,Pu),Us.prototype.g=function(){return new Vs(this.l,this.j)},Us.prototype.i=function(e){return function(){return e}}({}),Ja(Vs,$o);var zs=0;function Bs(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function qs(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Gs(e)}function Gs(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Ua=Vs.prototype).open=function(e,t){if(this.readyState!=zs)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Gs(this)},Ua.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||qa).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Ua.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qs(this)),this.readyState=zs},Ua.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Gs(this)),this.g&&(this.readyState=3,Gs(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof qa.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Bs(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Ua.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?qs(this):Gs(this),3==this.readyState&&Bs(this)}},Ua.Za=function(e){this.g&&(this.response=this.responseText=e,qs(this))},Ua.Ya=function(e){this.g&&(this.response=e,qs(this))},Ua.ka=function(){this.g&&qs(this)},Ua.setRequestHeader=function(e,t){this.v.append(e,t)},Ua.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Ua.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Vs.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Ks=qa.JSON.parse;function Hs(e){$o.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ws,this.L=this.M=!1}Ja(Hs,$o);var Ws="",Qs=/^https?$/i,$s=["POST","PUT"];function Ys(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Xs(e),Zs(e)}function Xs(e){e.F||(e.F=!0,Yo(e,"complete"),Yo(e,"error"))}function Js(e){if(e.h&&"undefined"!=typeof Ba&&(!e.C[1]||4!=tc(e)||2!=e.da()))if(e.v&&4==tc(e))du(e.La,0,e);else if(Yo(e,"readystatechange"),4==tc(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(is)[1]||null;!a&&qa.self&&qa.self.location&&(a=qa.self.location.protocol.slice(0,-1)),i=!Qs.test(a?a.toLowerCase():"")}t=i}if(t)Yo(e,"complete"),Yo(e,"success");else{e.m=6;try{var o=2<tc(e)?e.g.statusText:""}catch(et){o=""}e.j=o+" ["+e.da()+"]",Xs(e)}}finally{Zs(e)}}}function Zs(e,t){if(e.g){ec(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||Yo(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function ec(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(qa.clearTimeout(e.A),e.A=null)}function tc(e){return e.g?e.g.readyState:0}function nc(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Ws:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(mt){return null}}function rc(e){var t="";return Do(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function ic(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=rc(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ls(e,t,n))}function ac(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function oc(e){this.Ga=0,this.j=[],this.l=new ku,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ac("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ac("baseRetryDelayMs",5e3,e),this.hb=ac("retryDelaySeedMs",1e4,e),this.eb=ac("forwardChannelMaxRetries",2,e),this.xa=ac("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Cs(e&&e.concurrentRequestLimit),this.Ja=new Ls,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function uc(e){if(cc(e),3==e.H){var t=e.W++,n=os(e.I);if(ls(n,"SID",e.K),ls(n,"RID",t),ls(n,"TYPE","terminate"),hc(e,n),(t=new zu(e,e.l,t)).L=2,t.v=fs(os(n)),n=!1,qa.navigator&&qa.navigator.sendBeacon)try{n=qa.navigator.sendBeacon(t.v.toString(),"")}catch(dt){}!n&&qa.Image&&((new Image).src=t.v,n=!0),n||(t.g=Sc(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Xu(t)}xc(e)}function sc(e){e.g&&(mc(e),e.g.cancel(),e.g=null)}function cc(e){sc(e),e.u&&(qa.clearTimeout(e.u),e.u=null),gc(e),e.i.cancel(),e.m&&("number"===typeof e.m&&qa.clearTimeout(e.m),e.m=null)}function lc(e){if(!Ts(e.i)&&!e.m){e.m=!0;var t=e.Na;ou||cu(),uu||(ou(),uu=!0),su.add(t,e),e.C=0}}function fc(e,t){var n;n=t?t.m:e.W++;var r=os(e.I);ls(r,"SID",e.K),ls(r,"RID",n),ls(r,"AID",e.V),hc(e,r),e.o&&e.s&&ic(r,e.o,e.s),n=new zu(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=dc(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Rs(e.i,n),Hu(n,r,t)}function hc(e,t){e.na&&Do(e.na,(function(e,n){ls(t,n,e)})),e.h&&rs({},(function(e,n){ls(t,n,e)}))}function dc(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Ya(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].g,l=i[s].map;if(0>(c-=a))a=Math.max(0,i[s].g-100),u=!1;else try{Fs(l,o,"req"+c+"_")}catch(qt){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function pc(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;ou||cu(),uu||(ou(),uu=!0),su.add(t,e),e.A=0}}function vc(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Du(Ya(e.Ma,e),kc(e,e.A)),e.A++,!0)}function mc(e){null!=e.B&&(qa.clearTimeout(e.B),e.B=null)}function yc(e){e.g=new zu(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=os(e.wa);ls(t,"RID","rpc"),ls(t,"SID",e.K),ls(t,"AID",e.V),ls(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&ls(t,"TO",e.qa),ls(t,"TYPE","xmlhttp"),hc(e,t),e.o&&e.s&&ic(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=fs(os(t)),n.s=null,n.S=!0,Wu(n,e)}function gc(e){null!=e.v&&(qa.clearTimeout(e.v),e.v=null)}function bc(e,t){var n=null;if(e.g==t){gc(e),mc(e),e.g=null;var r=2}else{if(!As(e.i,t))return;n=t.F,Ps(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Yo(r=Su(),new Tu(r,n)),lc(e)}else pc(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Ds(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Du(Ya(e.Na,e,t),kc(e,e.C)),e.C++,!0))}(e,t)||2==r&&vc(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:wc(e,5);break;case 4:wc(e,10);break;case 3:wc(e,6);break;default:wc(e,2)}}function kc(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function wc(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Ya(e.pb,e);n||(n=new as("//www.google.com/images/cleardot.gif"),qa.location&&"http"==qa.location.protocol||us(n,"https"),fs(n)),function(e,t){var n=new ku;if(qa.Image){var r=new Image;r.onload=Xa(Ms,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Xa(Ms,n,r,"TestLoadImage: error",!1,t),r.onabort=Xa(Ms,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Xa(Ms,n,r,"TestLoadImage: timeout",!1,t),qa.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Iu(2);e.H=0,e.h&&e.h.za(t),xc(e),cc(e)}function xc(e){if(e.H=0,e.ma=[],e.h){var t=Os(e.i);0==t.length&&0==e.j.length||(no(e.ma,t),no(e.ma,e.j),e.i.i.length=0,to(e.j),e.j.length=0),e.h.ya()}}function _c(e,t,n){var r=n instanceof as?os(n):new as(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ss(r,r.m);else{var i=qa.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new as(null);r&&us(a,r),t&&(a.g=t),i&&ss(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&ls(r,n,t),ls(r,"VER",e.ra),hc(e,r),r}function Sc(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Hs(new Us({ob:!0})):new Hs(e.va)).Oa(e.J),t}function Ec(){}function Nc(){if(ho&&!(10<=Number(_o)))throw Error("Environmental error: no available transport.")}function Cc(e,t){$o.call(this),this.g=new oc(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!ao(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ao(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Dc(this)}function Ic(e){Mu.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Tc(){Uu.call(this),this.status=1}function Dc(e){this.g=e}function Ac(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Rc(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function Pc(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(Ua=Hs.prototype).Oa=function(e){this.M=e},Ua.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Lu.g(),this.C=this.u?Ou(this.u):Ou(Lu),this.g.onreadystatechange=Ya(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(u){return void Ys(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=N(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(d){o.e(d)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=qa.FormData&&e instanceof qa.FormData,!(0<=eo($s,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=N(n);try{for(c.s();!(s=c.n()).done;){var l=E(s.value,2),f=l[0],h=l[1];this.g.setRequestHeader(f,h)}}catch(d){c.e(d)}finally{c.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ec(this),0<this.B&&((this.L=function(e){return ho&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ya(this.ua,this)):this.A=du(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){Ys(this,u)}},Ua.ua=function(){"undefined"!=typeof Ba&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Yo(this,"timeout"),this.abort(8))},Ua.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Yo(this,"complete"),Yo(this,"abort"),Zs(this))},Ua.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Zs(this,!0)),Hs.$.N.call(this)},Ua.La=function(){this.s||(this.G||this.v||this.l?Js(this):this.kb())},Ua.kb=function(){Js(this)},Ua.isActive=function(){return!!this.g},Ua.da=function(){try{return 2<tc(this)?this.g.status:-1}catch(ot){return-1}},Ua.ja=function(){try{return this.g?this.g.responseText:""}catch(ot){return""}},Ua.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ks(t)}},Ua.Ia=function(){return this.m},Ua.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Ua=oc.prototype).ra=8,Ua.H=1,Ua.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new zu(this,this.l,e),n=this.s;if(this.U&&(n?Po(n=Ao(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=dc(this,t,r),ls(i=os(this.I),"RID",e),ls(i,"CVER",22),this.F&&ls(i,"X-HTTP-Session-Id",this.F),hc(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(rc(n)))+"&"+r:this.o&&ic(i,this.o,n)),Rs(this.i,t),this.bb&&ls(i,"TYPE","init"),this.P?(ls(i,"$req",r),ls(i,"SID","null"),t.aa=!0,Hu(t,i,null)):Hu(t,i,r),this.H=2}}else 3==this.H&&(e?fc(this,e):0==this.j.length||Ts(this.i)||fc(this))},Ua.Ma=function(){if(this.u=null,yc(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Du(Ya(this.jb,this),e)}},Ua.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Iu(10),sc(this),yc(this))},Ua.ib=function(){null!=this.v&&(this.v=null,sc(this),vc(this),Iu(19))},Ua.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Iu(2)):(this.l.info("Failed to ping google.com"),Iu(1))},Ua.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ua=Ec.prototype).Ba=function(){},Ua.Aa=function(){},Ua.za=function(){},Ua.ya=function(){},Ua.isActive=function(){return!0},Ua.Va=function(){},Nc.prototype.g=function(e,t){return new Cc(e,t)},Ja(Cc,$o),Cc.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Iu(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=_c(e,null,e.Y),lc(e)},Cc.prototype.close=function(){uc(this.g)},Cc.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Jo(e),e=n);t.j.push(new Ns(t.fb++,e)),3==t.H&&lc(t)},Cc.prototype.N=function(){this.g.h=null,delete this.j,uc(this.g),delete this.g,Cc.$.N.call(this)},Ja(Ic,Mu),Ja(Tc,Uu),Ja(Dc,Ec),Dc.prototype.Ba=function(){Yo(this.g,"a")},Dc.prototype.Aa=function(e){Yo(this.g,new Ic(e))},Dc.prototype.za=function(e){Yo(this.g,new Tc)},Dc.prototype.ya=function(){Yo(this.g,"b")},Ja(Ac,(function(){this.blockSize=-1})),Ac.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ac.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)Rc(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){Rc(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){Rc(this,r),i=0;break}}this.h=i,this.i+=t},Ac.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Oc={};function jc(e){return-128<=e&&128>e?function(e,t){var n=Oc;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Pc([0|e],0>e?-1:0)})):new Pc([0|e],0>e?-1:0)}function Lc(e){if(isNaN(e)||!isFinite(e))return Mc;if(0>e)return qc(Lc(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Fc;return new Pc(t,0)}var Fc=4294967296,Mc=jc(0),Uc=jc(1),Vc=jc(16777216);function zc(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Bc(e){return-1==e.h}function qc(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Pc(n,~e.h).add(Uc)}function Gc(e,t){return e.add(qc(t))}function Kc(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Hc(e,t){this.g=e,this.h=t}function Wc(e,t){if(zc(t))throw Error("division by zero");if(zc(e))return new Hc(Mc,Mc);if(Bc(e))return t=Wc(qc(e),t),new Hc(qc(t.g),qc(t.h));if(Bc(t))return t=Wc(e,qc(t)),new Hc(qc(t.g),t.h);if(30<e.g.length){if(Bc(e)||Bc(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Uc,r=t;0>=r.X(e);)n=Qc(n),r=Qc(r);var i=$c(n,1),a=$c(r,1);for(r=$c(r,2),n=$c(n,2);!zc(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=$c(r,1),n=$c(n,1)}return t=Gc(e,i.R(t)),new Hc(i,t)}for(i=Mc;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=Lc(n)).R(t);Bc(o)||0<o.X(e);)o=(a=Lc(n-=r)).R(t);zc(a)&&(a=Uc),i=i.add(a),e=Gc(e,o)}return new Hc(i,e)}function Qc(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Pc(n,e.h)}function $c(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new Pc(i,e.h)}(Ua=Pc.prototype).ea=function(){if(Bc(this))return-qc(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Fc+r)*t,t*=Fc}return e},Ua.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(zc(this))return"0";if(Bc(this))return"-"+qc(this).toString(e);for(var t=Lc(Math.pow(e,6)),n=this,r="";;){var i=Wc(n,t).g,a=((0<(n=Gc(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(zc(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Ua.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Ua.X=function(e){return Bc(e=Gc(this,e))?-1:zc(e)?0:1},Ua.abs=function(){return Bc(this)?qc(this):this},Ua.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new Pc(n,-2147483648&n[n.length-1]?-1:0)},Ua.R=function(e){if(zc(this)||zc(e))return Mc;if(Bc(this))return Bc(e)?qc(this).R(qc(e)):qc(qc(this).R(e));if(Bc(e))return qc(this.R(qc(e)));if(0>this.X(Vc)&&0>e.X(Vc))return Lc(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,Kc(n,2*r+2*i),n[2*r+2*i+1]+=a*s,Kc(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,Kc(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,Kc(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Pc(n,0)},Ua.gb=function(e){return Wc(this,e).h},Ua.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Pc(n,this.h&e.h)},Ua.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Pc(n,this.h|e.h)},Ua.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Pc(n,this.h^e.h)},Nc.prototype.createWebChannel=Nc.prototype.g,Cc.prototype.send=Cc.prototype.u,Cc.prototype.open=Cc.prototype.m,Cc.prototype.close=Cc.prototype.close,Au.NO_ERROR=0,Au.TIMEOUT=8,Au.HTTP_ERROR=6,Ru.COMPLETE="complete",ju.EventType=Fu,Fu.OPEN="a",Fu.CLOSE="b",Fu.ERROR="c",Fu.MESSAGE="d",$o.prototype.listen=$o.prototype.O,Hs.prototype.listenOnce=Hs.prototype.P,Hs.prototype.getLastError=Hs.prototype.Sa,Hs.prototype.getLastErrorCode=Hs.prototype.Ia,Hs.prototype.getStatus=Hs.prototype.da,Hs.prototype.getResponseJson=Hs.prototype.Wa,Hs.prototype.getResponseText=Hs.prototype.ja,Hs.prototype.send=Hs.prototype.ha,Hs.prototype.setWithCredentials=Hs.prototype.Oa,Ac.prototype.digest=Ac.prototype.l,Ac.prototype.reset=Ac.prototype.reset,Ac.prototype.update=Ac.prototype.j,Pc.prototype.add=Pc.prototype.add,Pc.prototype.multiply=Pc.prototype.R,Pc.prototype.modulo=Pc.prototype.gb,Pc.prototype.compare=Pc.prototype.X,Pc.prototype.toNumber=Pc.prototype.ea,Pc.prototype.toString=Pc.prototype.toString,Pc.prototype.getBits=Pc.prototype.D,Pc.fromNumber=Lc,Pc.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return qc(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Lc(Math.pow(n,8)),i=Mc,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=Lc(Math.pow(n,o)),i=i.R(o).add(Lc(u))):i=(i=i.R(r)).add(Lc(u))}return i};var Yc=za.createWebChannelTransport=function(){return new Nc},Xc=za.getStatEventTarget=function(){return Su()},Jc=za.ErrorCode=Au,Zc=za.EventType=Ru,el=za.Event=xu,tl=za.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},nl=za.FetchXmlHttpFactory=Us,rl=za.WebChannel=ju,il=za.XhrIo=Hs,al=za.Md5=Ac,ol=za.Integer=Pc,ul="@firebase/firestore",sl=function(){function e(t){l(this,e),this.uid=t}return p(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();sl.UNAUTHENTICATED=new sl(null),sl.GOOGLE_CREDENTIALS=new sl("google-credentials-uid"),sl.FIRST_PARTY=new sl("first-party-uid"),sl.MOCK_USER=new sl("mock-user");var cl="10.1.0",ll=new xi("@firebase/firestore");function fl(){return ll.logLevel}function hl(e){if(ll.logLevel<=vi.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(vl);ll.debug.apply(ll,["Firestore (".concat(cl,"): ").concat(e)].concat(c(i)))}}function dl(e){if(ll.logLevel<=vi.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(vl);ll.error.apply(ll,["Firestore (".concat(cl,"): ").concat(e)].concat(c(i)))}}function pl(e){if(ll.logLevel<=vi.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(vl);ll.warn.apply(ll,["Firestore (".concat(cl,"): ").concat(e)].concat(c(i)))}}function vl(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(nt){return e}}function ml(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(cl,") INTERNAL ASSERTION FAILED: ")+e;throw dl(t),new Error(t)}function yl(e,t){e||ml()}function gl(e,t){return e}var bl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},kl=function(e){m(n,e);var t=k(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return p(n)}(Jr),wl=p((function e(){var t=this;l(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),xl=p((function e(t,n){l(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),_l=function(){function e(){l(this,e)}return p(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(sl.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Sl=function(){function e(t){l(this,e),this.token=t,this.changeListener=null}return p(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),El=function(){function e(t){l(this,e),this.t=t,this.currentUser=sl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return p(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new wl;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new wl,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(li(si().mark((function e(){return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){hl("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(hl("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new wl)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(hl("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(yl("string"==typeof n.accessToken),new xl(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return yl(null===e||"string"==typeof e),new sl(e)}}]),e}(),Nl=function(){function e(t,n,r){l(this,e),this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=sl.FIRST_PARTY,this.I=new Map}return p(e,[{key:"T",value:function(){return this.P?this.P():null}},{key:"headers",get:function(){this.I.set("X-Goog-AuthUser",this.l);var e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}]),e}(),Cl=function(){function e(t,n,r){l(this,e),this.l=t,this.h=n,this.P=r}return p(e,[{key:"getToken",value:function(){return Promise.resolve(new Nl(this.l,this.h,this.P))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(sl.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Il=p((function e(t){l(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Tl=function(){function e(t){l(this,e),this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}return p(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&hl("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.R;return n.R=e.token,hl("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){hl("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.A.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.A.getImmediate({optional:!0});e?i(e):hl("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(yl("string"==typeof t.token),e.R=t.token,new Il(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Dl(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Al=function(){function e(){l(this,e)}return p(e,null,[{key:"V",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=Dl(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function Rl(e,t){return e<t?-1:e>t?1:0}function Pl(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Ol(e){return e+"\0"}var jl=function(){function e(t,n){if(l(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new kl(bl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new kl(bl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new kl(bl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new kl(bl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return p(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Rl(this.nanoseconds,e.nanoseconds):Rl(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Ll=function(){function e(t){l(this,e),this.timestamp=t}return p(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new jl(0,0))}},{key:"max",value:function(){return new e(new jl(253402300799,999999999))}}]),e}(),Fl=function(){function e(t,n,r){l(this,e),void 0===n?n=0:n>t.length&&ml(),void 0===r?r=t.length-n:r>t.length-n&&ml(),this.segments=t,this.offset=n,this.len=r}return p(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Ml=function(e){m(n,e);var t=k(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new kl(bl.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,c(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Fl),Ul=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Vl=function(e){m(n,e);var t=k(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Ul.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new kl(bl.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new kl(bl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new kl(bl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new kl(bl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Fl),zl=function(){function e(t){l(this,e),this.path=t}return p(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Ml.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Ml.fromString(t))}},{key:"fromName",value:function(t){return new e(Ml.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Ml.emptyPath())}},{key:"comparator",value:function(e,t){return Ml.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Ml(t.slice()))}}]),e}(),Bl=p((function e(t,n,r,i){l(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function ql(e){return e.fields.find((function(e){return 2===e.kind}))}function Gl(e){return e.fields.filter((function(e){return 2!==e.kind}))}Bl.UNKNOWN_ID=-1;var Kl=p((function e(t,n){l(this,e),this.fieldPath=t,this.kind=n}));var Hl=function(){function e(t,n){l(this,e),this.sequenceNumber=t,this.offset=n}return p(e,null,[{key:"empty",value:function(){return new e(0,$l.min())}}]),e}();function Wl(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Ll.fromTimestamp(1e9===r?new jl(n+1,0):new jl(n,r));return new $l(i,zl.empty(),t)}function Ql(e){return new $l(e.readTime,e.key,-1)}var $l=function(){function e(t,n,r){l(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return p(e,null,[{key:"min",value:function(){return new e(Ll.min(),zl.empty(),-1)}},{key:"max",value:function(){return new e(Ll.max(),zl.empty(),-1)}}]),e}();function Yl(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=zl.comparator(e.documentKey,t.documentKey))?n:Rl(e.largestBatchId,t.largestBatchId)}var Xl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Jl=function(){function e(){l(this,e),this.onCommittedListeners=[]}return p(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Zl(e){return ef.apply(this,arguments)}function ef(){return ef=li(si().mark((function e(t){return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===bl.FAILED_PRECONDITION&&t.message===Xl){e.next=2;break}throw t;case 2:hl("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),ef.apply(this,arguments)}var tf=function(){function e(t){var n=this;l(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return p(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&ml(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=N(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),nf=function(){function e(t,n){var r=this;l(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.m=new wl,this.transaction.oncomplete=function(){r.m.resolve()},this.transaction.onabort=function(){n.error?r.m.reject(new of(t,n.error)):r.m.resolve()},this.transaction.onerror=function(e){var n=ff(e.target.error);r.m.reject(new of(t,n))}}return p(e,[{key:"g",get:function(){return this.m.promise}},{key:"abort",value:function(e){e&&this.m.reject(e),this.aborted||(hl("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"p",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new sf(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new of(n,t)}}}]),e}(),rf=function(){function e(t,n,r){l(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D($r())&&dl("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return p(e,[{key:"N",value:function(){var e=li(si().mark((function e(t){var n=this;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return hl("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new of(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new kl(bl.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new kl(bl.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new of(t,n))},i.onupgradeneeded=function(e){hl("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.B(t,i.transaction,e.oldVersion,n.version).next((function(){hl("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.L&&(this.db.onversionchange=function(e){return n.L(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"k",value:function(e){this.L=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=li(si().mark((function e(t,n,r,i){var a,o,u,s,c=this;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=si().mark((function e(){var n,u,s,l;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.N(t);case 4:return c.db=e.sent,n=nf.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.p(),e})).catch((function(e){return n.abort(e),tf.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.g;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,hl("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if(!(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return hl("SimpleDb","Removing database:",e),cf(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"v",value:function(){if(!Xr())return!1;if(e.C())return!0;var t=$r(),n=e.D(t),r=0<n&&n<10,i=e.F(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/readbook",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.M)}},{key:"O",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"F",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),af=function(){function e(t){l(this,e),this.q=t,this.K=!1,this.$=null}return p(e,[{key:"isDone",get:function(){return this.K}},{key:"U",get:function(){return this.$}},{key:"cursor",set:function(e){this.q=e}},{key:"done",value:function(){this.K=!0}},{key:"W",value:function(e){this.$=e}},{key:"delete",value:function(){return cf(this.q.delete())}}]),e}(),of=function(e){m(n,e);var t=k(n);function n(e,r){var i;return l(this,n),(i=t.call(this,bl.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return p(n)}(kl);function uf(e){return"IndexedDbTransactionError"===e.name}var sf=function(){function e(t){l(this,e),this.store=t}return p(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(hl("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(hl("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),cf(n)}},{key:"add",value:function(e){return hl("SimpleDb","ADD",this.store.name,e,e),cf(this.store.add(e))}},{key:"get",value:function(e){var t=this;return cf(this.store.get(e)).next((function(n){return void 0===n&&(n=null),hl("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return hl("SimpleDb","DELETE",this.store.name,e),cf(this.store.delete(e))}},{key:"count",value:function(){return hl("SimpleDb","COUNT",this.store.name),cf(this.store.count())}},{key:"G",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.j(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new tf((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new tf((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){hl("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.j(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.j(r,t)}},{key:"X",value:function(e){var t=this.cursor({});return new tf((function(n,r){t.onerror=function(e){var t=ff(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"j",value:function(e,t){var n=[];return new tf((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new af(i),o=t(i.primaryKey,i.value,a);if(o instanceof tf){var u=o.catch((function(e){return a.done(),tf.reject(e)}));n.push(u)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return tf.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function cf(e){return new tf((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=ff(e.target.error);n(t)}}))}var lf=!1;function ff(e){var t=rf.D($r());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new kl("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return lf||(lf=!0,setTimeout((function(){throw r}),0)),r}}return e}var hf=function(){function e(t,n){l(this,e),this.asyncQueue=t,this.ee=n,this.task=null}return p(e,[{key:"start",value:function(){this.te(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"te",value:function(e){var t=this;hl("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,li(si().mark((function e(){return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=hl,e.t1="Documents written: ",e.next=6,t.ee.ne();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!uf(e.t4)){e.next=17;break}hl("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Zl(e.t4);case 19:return e.next=21,t.te(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),df=function(){function e(t,n){l(this,e),this.localStore=t,this.persistence=n}return p(e,[{key:"ne",value:function(){var e=li(si().mark((function e(){var t,n=this,r=arguments;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.re(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"re",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return tf.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return hl("IndexBackiller","Processing collection: ".concat(t)),n.ie(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"ie",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.se(i,n)})).next((function(n){return hl("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"se",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Ql(t);Yl(r,n)>0&&(n=r)})),new $l(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),pf=function(){function e(t,n){var r=this;l(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.oe(e)},this._e=function(e){return n.writeSequenceNumber(e)})}return p(e,[{key:"oe",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this._e&&this._e(e),e}}]),e}();function vf(e){return null==e}function mf(e){return 0===e&&1/e==-1/0}function yf(e){return"number"==typeof e&&Number.isInteger(e)&&!mf(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function gf(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=kf(t)),t=bf(e.get(n),t);return kf(t)}function bf(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function kf(e){return e+"\x01\x01"}function wf(e){var t=e.length;if(yl(t>=2),2===t)return yl("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Ml.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&ml(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:ml()}a=o+2}return new Ml(r)}pf.ae=-1;var xf=["userId","batchId"];function _f(e,t){return[e,gf(t)]}function Sf(e,t,n){return[e,gf(t),n]}var Ef={},Nf=["prefixPath","collectionGroup","readTime","documentId"],Cf=["prefixPath","collectionGroup","documentId"],If=["collectionGroup","readTime","prefixPath","documentId"],Tf=["canonicalId","targetId"],Df=["targetId","path"],Af=["path","targetId"],Rf=["collectionId","parent"],Pf=["indexId","uid"],Of=["uid","sequenceNumber"],jf=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Lf=["indexId","uid","orderedDocumentKey"],Ff=["userId","collectionPath","documentId"],Mf=["userId","collectionPath","largestBatchId"],Uf=["userId","collectionGroup","largestBatchId"],Vf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),zf=[].concat(c(Vf),["documentOverlays"]),Bf=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],qf=Bf,Gf=[].concat(qf,["indexConfiguration","indexState","indexEntries"]),Kf=function(e){m(n,e);var t=k(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).ue=e,i.currentSequenceNumber=r,i}return p(n)}(Jl);function Hf(e,t){var n=gl(e);return rf.O(n.ue,t)}function Wf(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Qf(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function $f(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Yf=function(){function e(t,n){l(this,e),this.comparator=t,this.root=n||Jf.EMPTY}return p(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Jf.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Jf.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Xf(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Xf(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Xf(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Xf(this.root,e,this.comparator,!0)}}]),e}(),Xf=function(){function e(t,n,r,i){l(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return p(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Jf=function(){function e(t,n,r,i,a){l(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return p(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw ml();if(this.right.isRed())throw ml();var e=this.left.check();if(e!==this.right.check())throw ml();return e+(this.isRed()?0:1)}}]),e}();Jf.EMPTY=null,Jf.RED=!0,Jf.BLACK=!1,Jf.EMPTY=new(function(){function e(){l(this,e),this.size=0}return p(e,[{key:"key",get:function(){throw ml()}},{key:"value",get:function(){throw ml()}},{key:"color",get:function(){throw ml()}},{key:"left",get:function(){throw ml()}},{key:"right",get:function(){throw ml()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Jf(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Zf=function(){function e(t){l(this,e),this.comparator=t,this.data=new Yf(this.comparator)}return p(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new eh(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new eh(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),eh=function(){function e(t){l(this,e),this.iter=t}return p(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function th(e){return e.hasNext()?e.getNext():void 0}var nh=function(){function e(t){l(this,e),this.fields=t,t.sort(Vl.comparator)}return p(e,[{key:"unionWith",value:function(t){var n,r=new Zf(Vl.comparator),i=N(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=N(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=N(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Pl(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),rh=function(e){m(n,e);var t=k(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return p(n)}(x(Error));var ih=function(e){function t(e){l(this,t),this.binaryString=e}return p(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return function(e){return btoa(e)}(this.binaryString)}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Rl(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new rh("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();ih.EMPTY_BYTE_STRING=new ih("");var ah=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oh(e){if(yl(!!e),"string"==typeof e){var t=0,n=ah.exec(e);if(yl(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:uh(e.seconds),nanos:uh(e.nanos)}}function uh(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function sh(e){return"string"==typeof e?ih.fromBase64String(e):ih.fromUint8Array(e)}function ch(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function lh(e){var t=e.mapValue.fields.__previous_value__;return ch(t)?lh(t):t}function fh(e){var t=oh(e.mapValue.fields.__local_write_time__.timestampValue);return new jl(t.seconds,t.nanos)}var hh=p((function e(t,n,r,i,a,o,u,s,c){l(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=s,this.useFetchStreams=c})),dh=function(){function e(t,n){l(this,e),this.projectId=t,this.database=n||"(default)"}return p(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),ph={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},vh={nullValue:"NULL_VALUE"};function mh(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ch(e)?4:Dh(e)?9007199254740991:10:ml()}function yh(e,t){if(e===t)return!0;var n=mh(e);if(n!==mh(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return fh(e).isEqual(fh(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=oh(e.timestampValue),r=oh(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return sh(e.bytesValue).isEqual(sh(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return uh(e.geoPointValue.latitude)===uh(t.geoPointValue.latitude)&&uh(e.geoPointValue.longitude)===uh(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return uh(e.integerValue)===uh(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=uh(e.doubleValue),r=uh(t.doubleValue);return n===r?mf(n)===mf(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Pl(e.arrayValue.values||[],t.arrayValue.values||[],yh);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Wf(n)!==Wf(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!yh(n[i],r[i])))return!1;return!0}(e,t);default:return ml()}}function gh(e,t){return void 0!==(e.values||[]).find((function(e){return yh(e,t)}))}function bh(e,t){if(e===t)return 0;var n=mh(e),r=mh(t);if(n!==r)return Rl(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Rl(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=uh(e.integerValue||e.doubleValue),r=uh(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return kh(e.timestampValue,t.timestampValue);case 4:return kh(fh(e),fh(t));case 5:return Rl(e.stringValue,t.stringValue);case 6:return function(e,t){var n=sh(e),r=sh(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Rl(n[i],r[i]);if(0!==a)return a}return Rl(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Rl(uh(e.latitude),uh(t.latitude));return 0!==n?n:Rl(uh(e.longitude),uh(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=bh(n[i],r[i]);if(a)return a}return Rl(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===ph.mapValue&&t===ph.mapValue)return 0;if(e===ph.mapValue)return 1;if(t===ph.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Rl(r[o],a[o]);if(0!==u)return u;var s=bh(n[r[o]],i[a[o]]);if(0!==s)return s}return Rl(r.length,a.length)}(e.mapValue,t.mapValue);default:throw ml()}}function kh(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Rl(e,t);var n=oh(e),r=oh(t),i=Rl(n.seconds,r.seconds);return 0!==i?i:Rl(n.nanos,r.nanos)}function wh(e){return xh(e)}function xh(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=oh(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return sh(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return zl.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){var t,n="[",r=!0,i=N(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=xh(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=N(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(xh(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):ml()}function _h(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Sh(e){return!!e&&"integerValue"in e}function Eh(e){return!!e&&"arrayValue"in e}function Nh(e){return!!e&&"nullValue"in e}function Ch(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ih(e){return!!e&&"mapValue"in e}function Th(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Qf(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Th(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Th(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Dh(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ah(e){return"nullValue"in e?vh:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?_h(dh.empty(),zl.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:ml()}function Rh(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?_h(dh.empty(),zl.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?ph:ml()}function Ph(e,t){var n=bh(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Oh(e,t){var n=bh(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var jh=function(){function e(t){l(this,e),this.value=t}return p(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Ih(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Th(t)}},{key:"setAll",value:function(e){var t=this,n=Vl.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Th(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Ih(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return yh(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Ih(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Qf(t,(function(t,n){return e[t]=n}));var r,i=N(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Th(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Lh(e){var t=[];return Qf(e.fields,(function(e,n){var r=new Vl([e]);if(Ih(n)){var i=Lh(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=N(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new nh(t)}var Fh=function(){function e(t,n,r,i,a,o,u){l(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return p(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Ll.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=jh.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=jh.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Ll.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Ll.min(),Ll.min(),Ll.min(),jh.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Ll.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Ll.min(),Ll.min(),jh.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Ll.min(),Ll.min(),jh.empty(),2)}}]),e}(),Mh=p((function e(t,n){l(this,e),this.position=t,this.inclusive=n}));function Uh(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?zl.comparator(zl.fromName(o.referenceValue),n.key):bh(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Vh(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!yh(e.position[n],t.position[n]))return!1;return!0}var zh=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";l(this,e),this.field=t,this.dir=n}));function Bh(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var qh=p((function e(){l(this,e)})),Gh=function(e){m(n,e);var t=k(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return p(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(bh(t,this.value)):null!==t&&mh(this.value)===mh(t)&&this.matchesComparison(bh(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ml()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new ed(e,t,r):"array-contains"===t?new id(e,r):"in"===t?new ad(e,r):"not-in"===t?new od(e,r):"array-contains-any"===t?new ud(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new td(e,n):new nd(e,n)}}]),n}(qh),Kh=function(e){m(n,e);var t=k(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).filters=e,i.op=r,i.ce=null,i}return p(n,[{key:"matches",value:function(e){return Hh(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ce||(this.ce=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ce}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.le((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"le",value:function(e){var t,n=N(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(qh);function Hh(e){return"and"===e.op}function Wh(e){return"or"===e.op}function Qh(e){return $h(e)&&Hh(e)}function $h(e){var t,n=N(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Kh)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Yh(e){if(e instanceof Gh)return e.field.canonicalString()+e.op.toString()+wh(e.value);if(Qh(e))return e.filters.map((function(e){return Yh(e)})).join(",");var t=e.filters.map((function(e){return Yh(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Xh(e,t){return e instanceof Gh?function(e,t){return t instanceof Gh&&e.op===t.op&&e.field.isEqual(t.field)&&yh(e.value,t.value)}(e,t):e instanceof Kh?function(e,t){return t instanceof Kh&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Xh(n,t.filters[r])}),!0)}(e,t):void ml()}function Jh(e,t){var n=e.filters.concat(t);return Kh.create(n,e.op)}function Zh(e){return e instanceof Gh?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(wh(e.value))}(e):e instanceof Kh?function(e){return e.op.toString()+" {"+e.getFilters().map(Zh).join(" ,")+"}"}(e):"Filter"}var ed=function(e){m(n,e);var t=k(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this,e,r,i)).key=zl.fromName(i.referenceValue),a}return p(n,[{key:"matches",value:function(e){var t=zl.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Gh),td=function(e){m(n,e);var t=k(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,"in",r)).keys=rd("in",r),i}return p(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Gh),nd=function(e){m(n,e);var t=k(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,"not-in",r)).keys=rd("not-in",r),i}return p(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Gh);function rd(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return zl.fromName(e.referenceValue)}))}var id=function(e){m(n,e);var t=k(n);function n(e,r){return l(this,n),t.call(this,e,"array-contains",r)}return p(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Eh(t)&&gh(t.arrayValue,this.value)}}]),n}(Gh),ad=function(e){m(n,e);var t=k(n);function n(e,r){return l(this,n),t.call(this,e,"in",r)}return p(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&gh(this.value.arrayValue,t)}}]),n}(Gh),od=function(e){m(n,e);var t=k(n);function n(e,r){return l(this,n),t.call(this,e,"not-in",r)}return p(n,[{key:"matches",value:function(e){if(gh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!gh(this.value.arrayValue,t)}}]),n}(Gh),ud=function(e){m(n,e);var t=k(n);function n(e,r){return l(this,n),t.call(this,e,"array-contains-any",r)}return p(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Eh(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return gh(t.value.arrayValue,e)}))}}]),n}(Gh),sd=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;l(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.he=null}));function cd(e){return new sd(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function ld(e){var t=gl(e);if(null===t.he){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Yh(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),vf(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return wh(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return wh(e)})).join(",")),t.he=n}return t.he}function fd(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Bh(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Xh(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Vh(e.startAt,t.startAt)&&Vh(e.endAt,t.endAt)}function hd(e){return zl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function dd(e,t){return e.filters.filter((function(e){return e instanceof Gh&&e.field.isEqual(t)}))}function pd(e,t,n){var r,i=vh,a=!0,o=N(dd(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=vh,c=!0;switch(u.op){case"<":case"<=":s=Ah(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=vh}Ph({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Ph({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function vd(e,t,n){var r,i=ph,a=!0,o=N(dd(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=ph,c=!0;switch(u.op){case">=":case">":s=Rh(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=ph}Oh({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Oh({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var md=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;l(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.Pe=null,this.Ie=null,this.startAt,this.endAt}));function yd(e,t,n,r,i,a,o,u){return new md(e,t,n,r,i,a,o,u)}function gd(e){return new md(e)}function bd(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function kd(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function wd(e){var t,n=N(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function xd(e){return null!==e.collectionGroup}function _d(e){var t=gl(e);if(null===t.Pe){t.Pe=[];var n=wd(t),r=kd(t);if(null!==n&&null===r)n.isKeyField()||t.Pe.push(new zh(n)),t.Pe.push(new zh(Vl.keyField(),"asc"));else{var i,a=!1,o=N(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.Pe.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.Pe.push(new zh(Vl.keyField(),s))}}}return t.Pe}function Sd(e){var t=gl(e);if(!t.Ie)if("F"===t.limitType)t.Ie=cd(t.path,t.collectionGroup,_d(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=N(_d(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new zh(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Mh(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Mh(t.startAt.position,t.startAt.inclusive):null;t.Ie=cd(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.Ie}function Ed(e,t){t.getFirstInequalityField(),wd(e);var n=e.filters.concat([t]);return new md(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Nd(e,t,n){return new md(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Cd(e,t){return fd(Sd(e),Sd(t))&&e.limitType===t.limitType}function Id(e){return"".concat(ld(Sd(e)),"|lt:").concat(e.limitType)}function Td(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Zh(e)})).join(", "),"]")),vf(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return wh(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return wh(e)})).join(",")),"Target(".concat(t,")")}(Sd(e)),"; limitType=").concat(e.limitType,")")}function Dd(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):zl.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=N(_d(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=N(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Uh(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,_d(e),t))&&!(e.endAt&&!function(e,t,n){var r=Uh(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,_d(e),t))}(e,t)}function Ad(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Rd(e){return function(t,n){var r,i=!1,a=N(_d(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Pd(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Pd(e,t,n){var r=e.field.isKeyField()?zl.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?bh(r,i):ml()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ml()}}var Od=function(){function e(t,n){l(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return p(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=N(n);try{for(i.s();!(r=i.n()).done;){var a=E(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Qf(this.inner,(function(t,n){var r,i=N(n);try{for(i.s();!(r=i.n()).done;){var a=E(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return $f(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),jd=new Yf(zl.comparator);function Ld(){return jd}var Fd=new Yf(zl.comparator);function Md(){for(var e=Fd,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Ud(e){var t=Fd;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Vd(){return Bd()}function zd(){return Bd()}function Bd(){return new Od((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var qd=new Yf(zl.comparator),Gd=new Zf(zl.comparator);function Kd(){for(var e=Gd,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Hd=new Zf(Rl);function Wd(){return Hd}function Qd(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mf(t)?"-0":t}}function $d(e){return{integerValue:""+e}}function Yd(e,t){return yf(t)?$d(t):Qd(e,t)}var Xd=p((function e(){l(this,e),this._=void 0}));function Jd(e,t,n){return e instanceof tp?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ch(t)&&(t=lh(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof np?rp(e,t):e instanceof ip?ap(e,t):function(e,t){var n=ep(e,t),r=up(n)+up(e.Te);return Sh(n)&&Sh(e.Te)?$d(r):Qd(e.serializer,r)}(e,t)}function Zd(e,t,n){return e instanceof np?rp(e,t):e instanceof ip?ap(e,t):n}function ep(e,t){return e instanceof op?function(e){return Sh(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}var tp=function(e){m(n,e);var t=k(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n)}(Xd),np=function(e){m(n,e);var t=k(n);function n(e){var r;return l(this,n),(r=t.call(this)).elements=e,r}return p(n)}(Xd);function rp(e,t){var n,r=sp(t),i=N(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return yh(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var ip=function(e){m(n,e);var t=k(n);function n(e){var r;return l(this,n),(r=t.call(this)).elements=e,r}return p(n)}(Xd);function ap(e,t){var n,r=sp(t),i=N(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!yh(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var op=function(e){m(n,e);var t=k(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).serializer=e,i.Te=r,i}return p(n)}(Xd);function up(e){return uh(e.integerValue||e.doubleValue)}function sp(e){return Eh(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var cp=p((function e(t,n){l(this,e),this.field=t,this.transform=n}));var lp=p((function e(t,n){l(this,e),this.version=t,this.transformResults=n})),fp=function(){function e(t,n){l(this,e),this.updateTime=t,this.exists=n}return p(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function hp(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var dp=p((function e(){l(this,e)}));function pp(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Np(e.key,fp.none()):new bp(e.key,e.data,fp.none());var n,r=e.data,i=jh.empty(),a=new Zf(Vl.comparator),o=N(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new kp(e.key,i,new nh(a.toArray()),fp.none())}function vp(e,t,n){e instanceof bp?function(e,t,n){var r=e.value.clone(),i=xp(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof kp?function(e,t,n){if(hp(e.precondition,t)){var r=xp(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(wp(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function mp(e,t,n,r){return e instanceof bp?function(e,t,n,r){if(!hp(e.precondition,t))return n;var i=e.value.clone(),a=_p(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof kp?function(e,t,n,r){if(!hp(e.precondition,t))return n;var i=_p(e.fieldTransforms,r,t),a=t.data;return a.setAll(wp(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return hp(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function yp(e,t){var n,r=null,i=N(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=ep(a.transform,o||null);null!=u&&(null===r&&(r=jh.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function gp(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Pl(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof np&&t instanceof np||e instanceof ip&&t instanceof ip?Pl(e.elements,t.elements,yh):e instanceof op&&t instanceof op?yh(e.Te,t.Te):e instanceof tp&&t instanceof tp}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var bp=function(e){m(n,e);var t=k(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return l(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return p(n,[{key:"getFieldMask",value:function(){return null}}]),n}(dp),kp=function(e){m(n,e);var t=k(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return l(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return p(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(dp);function wp(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function xp(e,t,n){var r=new Map;yl(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Zd(o,u,n[i]))}return r}function _p(e,t,n){var r,i=new Map,a=N(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Jd(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Sp,Ep,Np=function(e){m(n,e);var t=k(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return p(n,[{key:"getFieldMask",value:function(){return null}}]),n}(dp),Cp=function(e){m(n,e);var t=k(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return p(n,[{key:"getFieldMask",value:function(){return null}}]),n}(dp),Ip=function(){function e(t,n,r,i){l(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return p(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&vp(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=N(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=mp(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=N(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=mp(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=zd();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=pp(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Ll.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Kd())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Pl(this.mutations,e.mutations,(function(e,t){return gp(e,t)}))&&Pl(this.baseMutations,e.baseMutations,(function(e,t){return gp(e,t)}))}}]),e}(),Tp=function(){function e(t,n,r,i){l(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return p(e,null,[{key:"from",value:function(t,n,r){yl(t.mutations.length===r.length);for(var i=qd,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Dp=function(){function e(t,n){l(this,e),this.largestBatchId=t,this.mutation=n}return p(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Ap=p((function e(t,n){l(this,e),this.count=t,this.unchangedNames=n}));function Rp(e){switch(e){default:return ml();case bl.CANCELLED:case bl.UNKNOWN:case bl.DEADLINE_EXCEEDED:case bl.RESOURCE_EXHAUSTED:case bl.INTERNAL:case bl.UNAVAILABLE:case bl.UNAUTHENTICATED:return!1;case bl.INVALID_ARGUMENT:case bl.NOT_FOUND:case bl.ALREADY_EXISTS:case bl.PERMISSION_DENIED:case bl.FAILED_PRECONDITION:case bl.ABORTED:case bl.OUT_OF_RANGE:case bl.UNIMPLEMENTED:case bl.DATA_LOSS:return!0}}function Pp(e){if(void 0===e)return dl("GRPC error has no .code"),bl.UNKNOWN;switch(e){case Sp.OK:return bl.OK;case Sp.CANCELLED:return bl.CANCELLED;case Sp.UNKNOWN:return bl.UNKNOWN;case Sp.DEADLINE_EXCEEDED:return bl.DEADLINE_EXCEEDED;case Sp.RESOURCE_EXHAUSTED:return bl.RESOURCE_EXHAUSTED;case Sp.INTERNAL:return bl.INTERNAL;case Sp.UNAVAILABLE:return bl.UNAVAILABLE;case Sp.UNAUTHENTICATED:return bl.UNAUTHENTICATED;case Sp.INVALID_ARGUMENT:return bl.INVALID_ARGUMENT;case Sp.NOT_FOUND:return bl.NOT_FOUND;case Sp.ALREADY_EXISTS:return bl.ALREADY_EXISTS;case Sp.PERMISSION_DENIED:return bl.PERMISSION_DENIED;case Sp.FAILED_PRECONDITION:return bl.FAILED_PRECONDITION;case Sp.ABORTED:return bl.ABORTED;case Sp.OUT_OF_RANGE:return bl.OUT_OF_RANGE;case Sp.UNIMPLEMENTED:return bl.UNIMPLEMENTED;case Sp.DATA_LOSS:return bl.DATA_LOSS;default:return ml()}}(Ep=Sp||(Sp={}))[Ep.OK=0]="OK",Ep[Ep.CANCELLED=1]="CANCELLED",Ep[Ep.UNKNOWN=2]="UNKNOWN",Ep[Ep.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ep[Ep.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ep[Ep.NOT_FOUND=5]="NOT_FOUND",Ep[Ep.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ep[Ep.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ep[Ep.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ep[Ep.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ep[Ep.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ep[Ep.ABORTED=10]="ABORTED",Ep[Ep.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ep[Ep.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ep[Ep.INTERNAL=13]="INTERNAL",Ep[Ep.UNAVAILABLE=14]="UNAVAILABLE",Ep[Ep.DATA_LOSS=15]="DATA_LOSS";var Op=function(){function e(){l(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return p(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return jp}},{key:"getOrCreateInstance",value:function(){return null===jp&&(jp=new e),jp}}]),e}(),jp=null;function Lp(){return new TextEncoder}var Fp=new ol([4294967295,4294967295],0);function Mp(e){var t=Lp().encode(e),n=new al;return n.update(t),new Uint8Array(n.digest())}function Up(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new ol([n,r],0),new ol([i,a],0)]}var Vp=function(){function e(t,n,r){if(l(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new zp("Invalid padding: ".concat(n));if(r<0)throw new zp("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new zp("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new zp("Invalid padding when bitmap length is 0: ".concat(n));this.de=8*t.length-n,this.Ae=ol.fromNumber(this.de)}return p(e,[{key:"Re",value:function(e,t,n){var r=e.add(t.multiply(ol.fromNumber(n)));return 1===r.compare(Fp)&&(r=new ol([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ae).toNumber()}},{key:"Ve",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"mightContain",value:function(e){if(0===this.de)return!1;for(var t=E(Up(Mp(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Re(n,r,i);if(!this.Ve(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.de)for(var t=E(Up(Mp(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Re(n,r,i);this.me(a)}}},{key:"me",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),zp=function(e){m(n,e);var t=k(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return p(n)}(x(Error)),Bp=function(){function e(t,n,r,i,a){l(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return p(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,qp.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Ll.min(),i,new Yf(Rl),Ld(),Kd())}}]),e}(),qp=function(){function e(t,n,r,i,a){l(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return p(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Kd(),Kd(),Kd())}}]),e}(),Gp=p((function e(t,n,r,i){l(this,e),this.fe=t,this.removedTargetIds=n,this.key=r,this.ge=i})),Kp=p((function e(t,n){l(this,e),this.targetId=t,this.pe=n})),Hp=p((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ih.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;l(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Wp=function(){function e(){l(this,e),this.ye=0,this.we=Yp(),this.Se=ih.EMPTY_BYTE_STRING,this.be=!1,this.De=!0}return p(e,[{key:"current",get:function(){return this.be}},{key:"resumeToken",get:function(){return this.Se}},{key:"ve",get:function(){return 0!==this.ye}},{key:"Ce",get:function(){return this.De}},{key:"Fe",value:function(e){e.approximateByteSize()>0&&(this.De=!0,this.Se=e)}},{key:"Me",value:function(){var e=Kd(),t=Kd(),n=Kd();return this.we.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ml()}})),new qp(this.Se,this.be,e,t,n)}},{key:"xe",value:function(){this.De=!1,this.we=Yp()}},{key:"Oe",value:function(e,t){this.De=!0,this.we=this.we.insert(e,t)}},{key:"Ne",value:function(e){this.De=!0,this.we=this.we.remove(e)}},{key:"Be",value:function(){this.ye+=1}},{key:"Le",value:function(){this.ye-=1}},{key:"ke",value:function(){this.De=!0,this.be=!0}}]),e}(),Qp=function(){function e(t){l(this,e),this.qe=t,this.Qe=new Map,this.Ke=Ld(),this.$e=$p(),this.Ue=new Yf(Rl)}return p(e,[{key:"We",value:function(e){var t,n=N(e.fe);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.ge&&e.ge.isFoundDocument()?this.Ge(r,e.ge):this.ze(r,e.key,e.ge)}}catch(u){n.e(u)}finally{n.f()}var i,a=N(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ze(o,e.key,e.ge)}}catch(u){a.e(u)}finally{a.f()}}},{key:"je",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.He(n);switch(e.state){case 0:t.Je(n)&&r.Fe(e.resumeToken);break;case 1:r.Le(),r.ve||r.xe(),r.Fe(e.resumeToken);break;case 2:r.Le(),r.ve||t.removeTarget(n);break;case 3:t.Je(n)&&(r.ke(),r.Fe(e.resumeToken));break;case 4:t.Je(n)&&(t.Ye(n),r.Fe(e.resumeToken));break;default:ml()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Qe.forEach((function(e,r){n.Je(r)&&t(r)}))}},{key:"Ze",value:function(e){var t,n,r=e.targetId,i=e.pe.count,a=this.Xe(r);if(a){var o=a.target;if(hd(o))if(0===i){var u=new zl(o.path);this.ze(r,u,Fh.newNoDocument(u,Ll.min()))}else yl(1===i);else{var s=this.et(r);if(s!==i){var c=this.tt(e,s);if(0!==c.status){this.Ye(r);var l=2===c.status?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(r,l)}null===(t=Op.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n,r){var i,a,o,u,s,c,l={localCacheCount:n,existenceFilterCount:r.count},f=r.unchangedNames;return f&&(l.bloomFilter={applied:0===e,hashCount:null!==(i=null==f?void 0:f.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(u=null===(o=null===(a=null==f?void 0:f.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==u?u:0,padding:null!==(c=null===(s=null==f?void 0:f.bits)||void 0===s?void 0:s.padding)&&void 0!==c?c:0},t&&(l.bloomFilter.mightContain=t)),l}(c.status,null!==(n=c.nt)&&void 0!==n?n:null,s,e.pe))}}}}},{key:"tt",value:function(e,t){var n=this,r=e.pe,i=r.unchangedNames,a=r.count;if(!i||!i.bits)return{status:1};var o,u,s=i.bits,c=s.bitmap,l=void 0===c?"":c,f=s.padding,h=void 0===f?0:f,d=i.hashCount,p=void 0===d?0:d;try{o=sh(l).toUint8Array()}catch(e){if(e instanceof rh)return pl("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),{status:1};throw e}try{u=new Vp(o,h,p)}catch(e){return pl(e instanceof zp?"BloomFilter error: ":"Applying bloom filter failed: ",e),{status:1}}var v=function(e){var t=n.qe.rt();return u.mightContain("projects/".concat(t.projectId,"/databases/").concat(t.database,"/documents/").concat(e))};return 0===u.de?{status:1}:{status:a===t-this.it(e.targetId,v)?0:2,nt:v}}},{key:"it",value:function(e,t){var n=this,r=this.qe.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){t(r.path.canonicalString())||(n.ze(e,r,null),i++)})),i}},{key:"st",value:function(e){var t=this,n=new Map;this.Qe.forEach((function(r,i){var a=t.Xe(i);if(a){if(r.current&&hd(a.target)){var o=new zl(a.target.path);null!==t.Ke.get(o)||t.ot(i,o)||t.ze(i,o,Fh.newNoDocument(o,e))}r.Ce&&(n.set(i,r.Me()),r.xe())}}));var r=Kd();this.$e.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Xe(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Ke.forEach((function(t,n){return n.setReadTime(e)}));var i=new Bp(e,n,this.Ue,this.Ke,r);return this.Ke=Ld(),this.$e=$p(),this.Ue=new Yf(Rl),i}},{key:"Ge",value:function(e,t){if(this.Je(e)){var n=this.ot(e,t.key)?2:0;this.He(e).Oe(t.key,n),this.Ke=this.Ke.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e))}}},{key:"ze",value:function(e,t,n){if(this.Je(e)){var r=this.He(e);this.ot(e,t)?r.Oe(t,1):r.Ne(t),this.$e=this.$e.insert(t,this._t(t).delete(e)),n&&(this.Ke=this.Ke.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Qe.delete(e)}},{key:"et",value:function(e){var t=this.He(e).Me();return this.qe.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Be",value:function(e){this.He(e).Be()}},{key:"He",value:function(e){var t=this.Qe.get(e);return t||(t=new Wp,this.Qe.set(e,t)),t}},{key:"_t",value:function(e){var t=this.$e.get(e);return t||(t=new Zf(Rl),this.$e=this.$e.insert(e,t)),t}},{key:"Je",value:function(e){var t=null!==this.Xe(e);return t||hl("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Xe",value:function(e){var t=this.Qe.get(e);return t&&t.ve?null:this.qe.ut(e)}},{key:"Ye",value:function(e){var t=this;this.Qe.set(e,new Wp),this.qe.getRemoteKeysForTarget(e).forEach((function(n){t.ze(e,n,null)}))}},{key:"ot",value:function(e,t){return this.qe.getRemoteKeysForTarget(e).has(t)}}]),e}();function $p(){return new Yf(zl.comparator)}function Yp(){return new Yf(zl.comparator)}var Xp={asc:"ASCENDING",desc:"DESCENDING"},Jp={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Zp={and:"AND",or:"OR"},ev=p((function e(t,n){l(this,e),this.databaseId=t,this.useProto3Json=n}));function tv(e,t){return e.useProto3Json||vf(t)?t:{value:t}}function nv(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function rv(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function iv(e,t){return nv(e,t.toTimestamp())}function av(e){return yl(!!e),Ll.fromTimestamp(function(e){var t=oh(e);return new jl(t.seconds,t.nanos)}(e))}function ov(e,t){return function(e){return new Ml(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function uv(e){var t=Ml.fromString(e);return yl(Dv(t)),t}function sv(e,t){return ov(e.databaseId,t.path)}function cv(e,t){var n=uv(t);if(n.get(1)!==e.databaseId.projectId)throw new kl(bl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new kl(bl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new zl(dv(n))}function lv(e,t){return ov(e.databaseId,t)}function fv(e){var t=uv(e);return 4===t.length?Ml.emptyPath():dv(t)}function hv(e){return new Ml(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function dv(e){return yl(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function pv(e,t,n){return{name:sv(e,t),fields:n.value.mapValue.fields}}function vv(e,t,n){var r=cv(e,t.name),i=av(t.updateTime),a=t.createTime?av(t.createTime):Ll.min(),o=new jh({mapValue:{fields:t.fields}}),u=Fh.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function mv(e,t){return"found"in t?function(e,t){yl(!!t.found),t.found.name,t.found.updateTime;var n=cv(e,t.found.name),r=av(t.found.updateTime),i=t.found.createTime?av(t.found.createTime):Ll.min(),a=new jh({mapValue:{fields:t.found.fields}});return Fh.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){yl(!!t.missing),yl(!!t.readTime);var n=cv(e,t.missing),r=av(t.readTime);return Fh.newNoDocument(n,r)}(e,t):ml()}function yv(e,t){var n;if(t instanceof bp)n={update:pv(e,t.key,t.value)};else if(t instanceof Np)n={delete:sv(e,t.key)};else if(t instanceof kp)n={update:pv(e,t.key,t.data),updateMask:Tv(t.fieldMask)};else{if(!(t instanceof Cp))return ml();n={verify:sv(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof tp)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof np)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ip)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof op)return{fieldPath:t.field.canonicalString(),increment:n.Te};throw ml()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:iv(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ml()}(e,t.precondition)),n}function gv(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?fp.updateTime(av(e.updateTime)):void 0!==e.exists?fp.exists(e.exists):fp.none()}(t.currentDocument):fp.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)yl("REQUEST_TIME"===t.setToServerValue),n=new tp;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new np(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new ip(i)}else"increment"in t?n=new op(e,t.increment):ml();var a=Vl.fromServerFormat(t.fieldPath);return new cp(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=cv(e,t.update.name),a=new jh({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new nh(t.map((function(e){return Vl.fromServerFormat(e)})))}(t.updateMask);return new kp(i,a,o,n,r)}return new bp(i,a,n,r)}if(t.delete){var u=cv(e,t.delete);return new Np(u,n)}if(t.verify){var s=cv(e,t.verify);return new Cp(s,n)}return ml()}function bv(e,t){return{documents:[lv(e,t.path)]}}function kv(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=lv(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=lv(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Iv(Kh.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Nv(e.field),direction:_v(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=tv(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function wv(e){var t=fv(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){yl(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=xv(e);return t instanceof Kh&&Qh(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=function(e){return e.map((function(e){return function(e){return new zh(Cv(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}))}(n.orderBy));var s=null;n.limit&&(s=function(e){var t;return vf(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Mh(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Mh(n,t)}(n.endAt)),yd(t,i,u,o,s,"F",c,l)}function xv(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Cv(e.unaryFilter.field);return Gh.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Cv(e.unaryFilter.field);return Gh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Cv(e.unaryFilter.field);return Gh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Cv(e.unaryFilter.field);return Gh.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ml()}}(e):void 0!==e.fieldFilter?function(e){return Gh.create(Cv(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ml()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Kh.create(e.compositeFilter.filters.map((function(e){return xv(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return ml()}}(e.compositeFilter.op))}(e):ml()}function _v(e){return Xp[e]}function Sv(e){return Jp[e]}function Ev(e){return Zp[e]}function Nv(e){return{fieldPath:e.canonicalString()}}function Cv(e){return Vl.fromServerFormat(e.fieldPath)}function Iv(e){return e instanceof Gh?function(e){if("=="===e.op){if(Ch(e.value))return{unaryFilter:{field:Nv(e.field),op:"IS_NAN"}};if(Nh(e.value))return{unaryFilter:{field:Nv(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ch(e.value))return{unaryFilter:{field:Nv(e.field),op:"IS_NOT_NAN"}};if(Nh(e.value))return{unaryFilter:{field:Nv(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nv(e.field),op:Sv(e.op),value:e.value}}}(e):e instanceof Kh?function(e){var t=e.getFilters().map((function(e){return Iv(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Ev(e.op),filters:t}}}(e):ml()}function Tv(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Dv(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Av=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ll.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ll.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ih.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;l(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=s}return p(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),Rv=p((function e(t){l(this,e),this.ct=t}));function Pv(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ov(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:sv(e,t.key),fields:t.data.value.mapValue.fields,updateTime:nv(e,t.version.toTimestamp()),createTime:nv(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:jv(t.version)};else{if(!t.isUnknownDocument())return ml();r.unknownDocument={path:n.path.toArray(),version:jv(t.version)}}return r}function Ov(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function jv(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Lv(e){var t=new jl(e.seconds,e.nanoseconds);return Ll.fromTimestamp(t)}function Fv(e,t){for(var n=(t.baseMutations||[]).map((function(t){return gv(e.ct,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return gv(e.ct,t)})),u=jl.fromMillis(t.localWriteTimeMs);return new Ip(t.batchId,u,n,o)}function Mv(e){var t,n=Lv(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?Lv(e.lastLimboFreeSnapshotVersion):Ll.min();return t=function(e){return void 0!==e.documents}(e.query)?function(e){return yl(1===e.documents.length),Sd(gd(fv(e.documents[0])))}(e.query):function(e){return Sd(wv(e))}(e.query),new Av(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,n,r,ih.fromBase64String(e.resumeToken))}function Uv(e,t){var n,r=jv(t.snapshotVersion),i=jv(t.lastLimboFreeSnapshotVersion);n=hd(t.target)?bv(e.ct,t.target):kv(e.ct,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ld(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Vv(e){var t=wv({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Nd(t,t.limit,"L"):t}function zv(e,t){return new Dp(t.largestBatchId,gv(e.ct,t.overlayMutation))}function Bv(e,t){var n=t.path.lastSegment();return[e,gf(t.path.popLast()),n]}function qv(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:jv(r.readTime),documentKey:gf(r.documentKey.path),largestBatchId:r.largestBatchId}}var Gv=function(){function e(){l(this,e)}return p(e,[{key:"getBundleMetadata",value:function(e,t){return Kv(e).get(t).next((function(e){if(e)return function(e){return{id:e.bundleId,createTime:Lv(e.createTime),version:e.version}}(e)}))}},{key:"saveBundleMetadata",value:function(e,t){return Kv(e).put(function(e){return{bundleId:e.id,createTime:jv(av(e.createTime)),version:e.version}}(t))}},{key:"getNamedQuery",value:function(e,t){return Hv(e).get(t).next((function(e){if(e)return function(e){return{name:e.name,query:Vv(e.bundledQuery),readTime:Lv(e.readTime)}}(e)}))}},{key:"saveNamedQuery",value:function(e,t){return Hv(e).put(function(e){return{name:e.name,readTime:jv(av(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Kv(e){return Hf(e,"bundles")}function Hv(e){return Hf(e,"namedQueries")}var Wv=function(){function e(t,n){l(this,e),this.serializer=t,this.userId=n}return p(e,[{key:"getOverlay",value:function(e,t){var n=this;return Qv(e).get(Bv(this.userId,t)).next((function(e){return e?zv(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Vd();return tf.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Dp(t,a);i.push(r.ht(e,o))})),tf.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(gf(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Qv(e).J("collectionPathOverlayIndex",i))})),tf.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Vd(),a=gf(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Qv(e).G("collectionPathOverlayIndex",o).next((function(e){var t,n=N(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=zv(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Vd(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Qv(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=zv(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ht",value:function(e,t){return Qv(e).put(function(e,t,n){var r=E(Bv(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:yv(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"lt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Qv(e){return Hf(e,"documentOverlays")}var $v=function(){function e(){l(this,e)}return p(e,[{key:"Pt",value:function(e,t){this.It(e,t),t.Tt()}},{key:"It",value:function(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(uh(e.integerValue));else if("doubleValue"in e){var n=uh(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),mf(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){var r=e.timestampValue;this.Et(t,20),"string"==typeof r?t.At(r):(t.At("".concat(r.seconds||"")),t.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(sh(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.Et(t,45),t.dt(i.latitude||0),t.dt(i.longitude||0)}else"mapValue"in e?Dh(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):ml()}},{key:"Rt",value:function(e,t){this.Et(t,25),this.St(e,t)}},{key:"St",value:function(e,t){t.At(e)}},{key:"yt",value:function(e,t){var n=e.fields||{};this.Et(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Rt(a,t),this.It(n[a],t)}}},{key:"wt",value:function(e,t){var n=e.values||[];this.Et(t,50);var r,i=N(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.It(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"gt",value:function(e,t){var n=this;this.Et(t,37),zl.fromName(e).path.forEach((function(e){n.Et(t,60),n.St(e,t)}))}},{key:"Et",value:function(e,t){e.dt(t)}},{key:"Vt",value:function(e){e.dt(2)}}]),e}();function Yv(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Xv(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Yv(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}$v.bt=new $v;var Jv=function(){function e(){l(this,e),this.buffer=new Uint8Array(1024),this.position=0}return p(e,[{key:"Dt",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.vt(n.value),n=t.next();this.Ct()}},{key:"Ft",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Mt(n.value),n=t.next();this.xt()}},{key:"Ot",value:function(e){var t,n=N(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.vt(i);else if(i<2048)this.vt(960|i>>>6),this.vt(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.vt(480|i>>>12),this.vt(128|63&i>>>6),this.vt(128|63&i);else{var a=r.codePointAt(0);this.vt(240|a>>>18),this.vt(128|63&a>>>12),this.vt(128|63&a>>>6),this.vt(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ct()}},{key:"Nt",value:function(e){var t,n=N(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Mt(i);else if(i<2048)this.Mt(960|i>>>6),this.Mt(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Mt(480|i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i);else{var a=r.codePointAt(0);this.Mt(240|a>>>18),this.Mt(128|63&a>>>12),this.Mt(128|63&a>>>6),this.Mt(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.xt()}},{key:"Bt",value:function(e){var t=this.Lt(e),n=Xv(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"qt",value:function(e){var t=this.Lt(e),n=Xv(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Qt",value:function(){this.Kt(255),this.Kt(255)}},{key:"$t",value:function(){this.Ut(255),this.Ut(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Wt",value:function(){return this.buffer.slice(0,this.position)}},{key:"Lt",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"vt",value:function(e){var t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}},{key:"Mt",value:function(e){var t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}},{key:"Ct",value:function(){this.Kt(0),this.Kt(1)}},{key:"xt",value:function(){this.Ut(0),this.Ut(1)}},{key:"Kt",value:function(e){this.kt(1),this.buffer[this.position++]=e}},{key:"Ut",value:function(e){this.kt(1),this.buffer[this.position++]=~e}},{key:"kt",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Zv=function(){function e(t){l(this,e),this.Gt=t}return p(e,[{key:"ft",value:function(e){this.Gt.Dt(e)}},{key:"At",value:function(e){this.Gt.Ot(e)}},{key:"dt",value:function(e){this.Gt.Bt(e)}},{key:"Tt",value:function(){this.Gt.Qt()}}]),e}(),em=function(){function e(t){l(this,e),this.Gt=t}return p(e,[{key:"ft",value:function(e){this.Gt.Ft(e)}},{key:"At",value:function(e){this.Gt.Nt(e)}},{key:"dt",value:function(e){this.Gt.qt(e)}},{key:"Tt",value:function(){this.Gt.$t()}}]),e}(),tm=function(){function e(){l(this,e),this.Gt=new Jv,this.zt=new Zv(this.Gt),this.jt=new em(this.Gt)}return p(e,[{key:"seed",value:function(e){this.Gt.seed(e)}},{key:"Ht",value:function(e){return 0===e?this.zt:this.jt}},{key:"Wt",value:function(){return this.Gt.Wt()}},{key:"reset",value:function(){this.Gt.reset()}}]),e}(),nm=function(){function e(t,n,r,i){l(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return p(e,[{key:"Jt",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function rm(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=im(e.arrayValue,t.arrayValue))?n:0!==(n=im(e.directionalValue,t.directionalValue))?n:zl.comparator(e.documentKey,t.documentKey)}function im(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var am=function(){function e(t){l(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Yt=t.orderBy,this.Zt=[];var n,r=N(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Xt=i:this.Zt.push(i)}}catch(a){r.e(a)}finally{r.f()}}return p(e,[{key:"en",value:function(e){yl(e.collectionGroup===this.collectionId);var t=ql(e);if(void 0!==t&&!this.tn(t))return!1;for(var n=Gl(e),r=new Set,i=0,a=0;i<n.length&&this.tn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.Xt){if(!r.has(this.Xt.field.canonicalString())){var o=n[i];if(!this.nn(this.Xt,o)||!this.rn(this.Yt[a++],o))return!1}++i}for(;i<n.length;++i){var u=n[i];if(a>=this.Yt.length||!this.rn(this.Yt[a++],u))return!1}return!0}},{key:"tn",value:function(e){var t,n=N(this.Zt);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.nn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"nn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"rn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function om(e){var t,n;if(yl(e instanceof Gh||e instanceof Kh),e instanceof Gh){if(e instanceof ad){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Gh.create(e.field,"==",t)})))||[];return Kh.create(r,"or")}return e}var i=e.filters.map((function(e){return om(e)}));return Kh.create(i,e.op)}function um(e){if(0===e.getFilters().length)return[];var t=fm(om(e));return yl(lm(t)),sm(t)||cm(t)?[t]:t.getFilters()}function sm(e){return e instanceof Gh}function cm(e){return e instanceof Kh&&Qh(e)}function lm(e){return sm(e)||cm(e)||function(e){if(e instanceof Kh&&Wh(e)){var t,n=N(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!sm(r)&&!cm(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function fm(e){if(yl(e instanceof Gh||e instanceof Kh),e instanceof Gh)return e;if(1===e.filters.length)return fm(e.filters[0]);var t=e.filters.map((function(e){return fm(e)})),n=Kh.create(t,e.op);return lm(n=pm(n))?n:(yl(n instanceof Kh),yl(Hh(n)),yl(n.filters.length>1),n.filters.reduce((function(e,t){return hm(e,t)})))}function hm(e,t){var n;return yl(e instanceof Gh||e instanceof Kh),yl(t instanceof Gh||t instanceof Kh),n=e instanceof Gh?t instanceof Gh?function(e,t){return Kh.create([e,t],"and")}(e,t):dm(e,t):t instanceof Gh?dm(t,e):function(e,t){if(yl(e.filters.length>0&&t.filters.length>0),Hh(e)&&Hh(t))return Jh(e,t.getFilters());var n=Wh(e)?e:t,r=Wh(e)?t:e,i=n.filters.map((function(e){return hm(e,r)}));return Kh.create(i,"or")}(e,t),pm(n)}function dm(e,t){if(Hh(t))return Jh(t,e.getFilters());var n=t.filters.map((function(t){return hm(e,t)}));return Kh.create(n,"or")}function pm(e){if(yl(e instanceof Gh||e instanceof Kh),e instanceof Gh)return e;var t=e.getFilters();if(1===t.length)return pm(t[0]);if($h(e))return e;var n=t.map((function(e){return pm(e)})),r=[];return n.forEach((function(t){t instanceof Gh?r.push(t):t instanceof Kh&&(t.op===e.op?r.push.apply(r,c(t.filters)):r.push(t))})),1===r.length?r[0]:Kh.create(r,e.op)}var vm=function(){function e(){l(this,e),this.sn=new mm}return p(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.sn.add(t),tf.resolve()}},{key:"getCollectionParents",value:function(e,t){return tf.resolve(this.sn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return tf.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return tf.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return tf.resolve(null)}},{key:"getIndexType",value:function(e,t){return tf.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return tf.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return tf.resolve(null)}},{key:"getMinOffset",value:function(e,t){return tf.resolve($l.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return tf.resolve($l.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return tf.resolve()}},{key:"updateIndexEntries",value:function(e,t){return tf.resolve()}}]),e}(),mm=function(){function e(){l(this,e),this.index={}}return p(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Zf(Ml.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Zf(Ml.comparator)).toArray()}}]),e}(),ym=new Uint8Array(0),gm=function(){function e(t,n){l(this,e),this.user=t,this.databaseId=n,this.on=new mm,this._n=new Od((function(e){return ld(e)}),(function(e,t){return fd(e,t)})),this.uid=t.uid||""}return p(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.on.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.on.add(t)}));var a={collectionId:r,parent:gf(i)};return bm(e).put(a)}return tf.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Ol(t),""],!1,!0);return bm(e).G(r).next((function(e){var r,i=N(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(wf(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=wm(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=xm(e);return a.next((function(e){o.put(qv(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=wm(e),r=xm(e),i=km(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=km(e),i=!0,a=new Map;return tf.forEach(this.an(t),(function(t){return n.un(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Kd(),o=[];return tf.forEach(a,(function(i,a){hl("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(","))}(i)," to execute ").concat(ld(t)));var u=function(e,t){var n=ql(t);if(void 0===n)return null;var r,i=N(dd(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),s=function(e,t){var n,r=new Map,i=N(Gl(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=N(dd(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=[],i=!0,a=N(Gl(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?pd(e,o.fieldPath,e.startAt):vd(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Mh(r,i)}(a,i),l=function(e,t){var n,r=[],i=!0,a=N(Gl(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?vd(e,o.fieldPath,e.endAt):pd(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Mh(r,i)}(a,i),f=n.cn(i,a,c),h=n.cn(i,a,l),d=n.ln(i,a,s),p=n.hn(i.indexId,u,f,c.inclusive,h,l.inclusive,d);return tf.forEach(p,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=zl.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return tf.resolve(null)}))}},{key:"an",value:function(e){var t=this._n.get(e);return t||(t=0===e.filters.length?[e]:um(Kh.create(e.filters,"and")).map((function(t){return cd(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this._n.set(e,t),t)}},{key:"hn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),l=s/(null!=t?t.length:1),f=[],h=function(){var s=t?u.Pn(t[d/l]):ym,h=u.In(e,s,n[d%l],r),p=u.Tn(e,s,i[d%l],a),v=o.map((function(t){return u.In(e,s,t,!0)}));f.push.apply(f,c(u.createRange(h,p,v)))},d=0;d<s;++d)h();return f}},{key:"In",value:function(e,t,n,r){var i=new nm(e,zl.empty(),t,n);return r?i:i.Jt()}},{key:"Tn",value:function(e,t,n,r){var i=new nm(e,zl.empty(),t,n);return r?i.Jt():i}},{key:"un",value:function(e,t){var n=new am(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=N(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.en(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.an(t);return tf.forEach(i,(function(t){return n.un(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Zf(Vl.comparator),r=!1,i=N(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=N(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=N(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"En",value:function(e,t){var n,r=new tm,i=N(Gl(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ht(a.kind);$v.bt.Pt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Wt()}},{key:"Pn",value:function(e){var t=new tm;return $v.bt.Pt(e,t.Ht(0)),t.Wt()}},{key:"dn",value:function(e,t){var n=new tm;return $v.bt.Pt(_h(this.databaseId,t),n.Ht(function(e){var t=Gl(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}},{key:"ln",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new tm);var i,a=0,o=N(Gl(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=N(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.An(t,s.fieldPath)&&Eh(c))r=this.Rn(r,s,c);else{var h=f.Ht(s.kind);$v.bt.Pt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.Vn(r)}},{key:"cn",value:function(e,t,n){return this.ln(e,t,n.position)}},{key:"Vn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Wt();return t}},{key:"Rn",value:function(e,t,n){var r,i=c(e),a=[],o=N(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,l=N(i);try{for(l.s();!(u=l.n()).done;){var f=u.value,h=new tm;h.seed(f.Wt()),$v.bt.Pt(s,h.Ht(t.kind)),a.push(h)}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"An",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Gh&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=wm(e),i=xm(e);return(t?r.G("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.G()).next((function(e){var t=[];return tf.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Hl(t.sequenceNumber,new $l(Lv(t.readTime),new zl(wf(t.documentKey)),t.largestBatchId)):Hl.empty(),r=e.fields.map((function(e){var t=E(e,2),n=t[0],r=t[1];return new Kl(Vl.fromServerFormat(n),r)}));return new Bl(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Rl(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=wm(e),a=xm(e);return this.mn(e).next((function(e){return i.G("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return tf.forEach(t,(function(t){return a.put(qv(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return tf.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?tf.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),tf.forEach(a,(function(r){return n.fn(e,t,r).next((function(t){var a=n.gn(i,r);return t.isEqual(a)?tf.resolve():n.pn(e,i,r,t,a)}))}))}))}))}},{key:"yn",value:function(e,t,n,r){return km(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.dn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"wn",value:function(e,t,n,r){return km(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.dn(n,t.key),t.key.path.toArray()])}},{key:"fn",value:function(e,t,n){var r=km(e),i=new Zf(rm);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.dn(n,t)])},(function(e,r){i=i.add(new nm(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"gn",value:function(e,t){var n=new Zf(rm),r=this.En(t,e);if(null==r)return n;var i=ql(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Eh(a)){var o,u=N(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new nm(t.indexId,e.key,this.Pn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new nm(t.indexId,e.key,ym,r));return n}},{key:"pn",value:function(e,t,n,r,i){var a=this;hl("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=th(a),s=th(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=th(o)):l?(i(u),u=th(a)):(u=th(a),s=th(o))}}(r,i,rm,(function(r){o.push(a.yn(e,t,n,r))}),(function(r){o.push(a.wn(e,t,n,r))})),tf.waitFor(o)}},{key:"mn",value:function(e){var t=1;return xm(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return rm(e,t)})).filter((function(e,t,n){return!t||0!==rm(e,n[t-1])}));var r=[];r.push(e);var i,a=N(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=rm(o,e),s=rm(o,t);if(0===u)r[0]=e.Jt();else if(u>0&&s<0)r.push(o),r.push(o.Jt());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.Sn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,ym,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,ym,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"Sn",value:function(e,t){return rm(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(_m)}},{key:"getMinOffset",value:function(e,t){var n=this;return tf.mapArray(this.an(t),(function(t){return n.un(e,t).next((function(e){return e||ml()}))})).next(_m)}}]),e}();function bm(e){return Hf(e,"collectionParents")}function km(e){return Hf(e,"indexEntries")}function wm(e){return Hf(e,"indexConfiguration")}function xm(e){return Hf(e,"indexState")}function _m(e){yl(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Yl(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new $l(t.readTime,t.documentKey,n)}var Sm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Em=function(){function e(t,n,r){l(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return p(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Nm(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){yl(1===u)})));var c,l=[],f=N(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Sf(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return tf.waitFor(a).next((function(){return l}))}function Cm(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw ml();t=e.noDocument}return JSON.stringify(t).length}Em.DEFAULT_COLLECTION_PERCENTILE=10,Em.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Em.DEFAULT=new Em(41943040,Em.DEFAULT_COLLECTION_PERCENTILE,Em.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Em.DISABLED=new Em(-1,0,0);var Im=function(){function e(t,n,r,i){l(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.bn={}}return p(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Dm(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Am(e),o=Dm(e);return o.add({}).next((function(u){yl("number"==typeof u);var s,c=new Ip(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return yv(e.ct,t)})),i=n.mutations.map((function(t){return yv(e.ct,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new Zf((function(e,t){return Rl(e.canonicalString(),t.canonicalString())})),d=N(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Sf(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Ef))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.bn[u]=c.keys()})),tf.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Dm(e).get(t).next((function(e){return e?(yl(e.userId===n.userId),Fv(n.serializer,e)):null}))}},{key:"Dn",value:function(e,t){var n=this;return this.bn[t]?tf.resolve(this.bn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.bn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Dm(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(yl(t.batchId>=r),a=Fv(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Dm(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Dm(e).G("userMutationsIndex",n).next((function(e){return e.map((function(e){return Fv(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=_f(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Am(e).Z({range:i},(function(r,i,o){var u=E(r,3),s=u[0],c=u[1],l=u[2],f=wf(c);if(s===n.userId&&t.path.isEqual(f))return Dm(e).get(l).next((function(e){if(!e)throw ml();yl(e.userId===n.userId),a.push(Fv(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Zf(Rl),i=[];return t.forEach((function(t){var a=_f(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Am(e).Z({range:o},(function(e,i,a){var o=E(e,3),u=o[0],s=o[1],c=o[2],l=wf(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),tf.waitFor(i).next((function(){return n.vn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=_f(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Zf(Rl);return Am(e).Z({range:o},(function(e,t,a){var o=E(e,3),s=o[0],c=o[1],l=o[2],f=wf(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.vn(e,u)}))}},{key:"vn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Dm(e).get(t).next((function(e){if(null===e)throw ml();yl(e.userId===n.userId),r.push(Fv(n.serializer,e))})))})),tf.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Nm(e.ue,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Cn(t.batchId)})),tf.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Cn",value:function(e){delete this.bn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return tf.resolve();var r=IDBKeyRange.lowerBound(function(e){return[e]}(t.userId)),i=[];return Am(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=wf(e[1]);i.push(a)}else r.done()})).next((function(){yl(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Tm(e,this.userId,t)}},{key:"Fn",value:function(e){var t=this;return Rm(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"lt",value:function(t,n,r,i){return yl(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Tm(e,t,n){var r=_f(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Am(e).Z({range:a,Y:!0},(function(e,n,r){var a=E(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Dm(e){return Hf(e,"mutations")}function Am(e){return Hf(e,"documentMutations")}function Rm(e){return Hf(e,"mutationQueues")}var Pm=function(){function e(t){l(this,e),this.Mn=t}return p(e,[{key:"next",value:function(){return this.Mn+=2,this.Mn}}],[{key:"xn",value:function(){return new e(0)}},{key:"On",value:function(){return new e(-1)}}]),e}(),Om=function(){function e(t,n){l(this,e),this.referenceDelegate=t,this.serializer=n}return p(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Nn(e).next((function(n){var r=new Pm(n.highestTargetId);return n.highestTargetId=r.next(),t.Bn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Nn(e).next((function(e){return Ll.fromTimestamp(new jl(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Nn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Nn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Bn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Ln(e,t).next((function(){return n.Nn(e).next((function(r){return r.targetCount+=1,n.kn(t,r),n.Bn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Ln(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return jm(e).delete(t.targetId)})).next((function(){return n.Nn(e)})).next((function(t){return yl(t.targetCount>0),t.targetCount-=1,n.Bn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return jm(e).Z((function(o,u){var s=Mv(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return tf.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return jm(e).Z((function(e,n){var r=Mv(n);t(r)}))}},{key:"Nn",value:function(e){return Lm(e).get("targetGlobalKey").next((function(e){return yl(null!==e),e}))}},{key:"Bn",value:function(e,t){return Lm(e).put("targetGlobalKey",t)}},{key:"Ln",value:function(e,t){return jm(e).put(Uv(this.serializer,t))}},{key:"kn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Nn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=ld(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return jm(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Mv(n);fd(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Fm(e);return t.forEach((function(t){var o=gf(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),tf.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Fm(e);return tf.forEach(t,(function(t){var a=gf(t.path);return tf.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Fm(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Fm(e),i=Kd();return r.Z({range:n,Y:!0},(function(e,t,n){var r=wf(e[1]),a=new zl(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=gf(t.path),r=IDBKeyRange.bound([n],[Ol(n)],!1,!0),i=0;return Fm(e).Z({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=E(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"ut",value:function(e,t){return jm(e).get(t).next((function(e){return e?Mv(e):null}))}}]),e}();function jm(e){return Hf(e,"targets")}function Lm(e){return Hf(e,"targetGlobal")}function Fm(e){return Hf(e,"targetDocuments")}function Mm(e,t){var n=E(e,2),r=n[0],i=n[1],a=E(t,2),o=a[0],u=a[1],s=Rl(r,o);return 0===s?Rl(i,u):s}var Um=function(){function e(t){l(this,e),this.qn=t,this.buffer=new Zf(Mm),this.Qn=0}return p(e,[{key:"Kn",value:function(){return++this.Qn}},{key:"$n",value:function(e){var t=[e,this.Kn()];if(this.buffer.size<this.qn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Mm(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Vm=function(){function e(t,n,r){l(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Un=null}return p(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Wn(6e4)}},{key:"stop",value:function(){this.Un&&(this.Un.cancel(),this.Un=null)}},{key:"started",get:function(){return null!==this.Un}},{key:"Wn",value:function(e){var t=this;hl("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Un=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,li(si().mark((function e(){return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Un=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!uf(e.t0)){e.next=12;break}hl("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Zl(e.t0);case 14:return e.next=16,t.Wn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),zm=function(){function e(t,n){l(this,e),this.Gn=t,this.params=n}return p(e,[{key:"calculateTargetCount",value:function(e,t){return this.Gn.zn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return tf.resolve(pf.ae);var r=new Um(t);return this.Gn.forEachTarget(e,(function(e){return r.$n(e.sequenceNumber)})).next((function(){return n.Gn.jn(e,(function(e){return r.$n(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Gn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Gn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(hl("LruGarbageCollector","Garbage collection skipped; disabled"),tf.resolve(Sm)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(hl("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Sm):n.Hn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Gn.getCacheSize(e)}},{key:"Hn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(hl("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),fl()<=vi.DEBUG&&hl("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),tf.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function Bm(e,t){return new zm(e,t)}var qm=function(){function e(t,n){l(this,e),this.db=t,this.garbageCollector=Bm(this,n)}return p(e,[{key:"zn",value:function(e){var t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Jn",value:function(e){var t=0;return this.jn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"jn",value:function(e,t){return this.Yn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Gm(e,n)}},{key:"removeReference",value:function(e,t,n){return Gm(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Gm(e,t)}},{key:"Zn",value:function(e,t){return function(e,t){var n=!1;return Rm(e).X((function(r){return Tm(e,r,t).next((function(e){return e&&(n=!0),tf.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Yn(e,(function(o,u){if(u<=t){var s=n.Zn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Ll.min()),Fm(e).delete(function(e){return[0,gf(e.path)]}(o))}))}));i.push(s)}})).next((function(){return tf.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Gm(e,t)}},{key:"Yn",value:function(e,t){var n,r=Fm(e),i=pf.ae;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=E(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==pf.ae&&t(new zl(wf(n)),i),i=s,n=u):i=pf.ae})).next((function(){i!==pf.ae&&t(new zl(wf(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Gm(e,t){return Fm(e).put(function(e,t){return{targetId:0,path:gf(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Km=function(){function e(){l(this,e),this.changes=new Od((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return p(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Fh.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?tf.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Hm=function(){function e(t){l(this,e),this.serializer=t}return p(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Ym(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Ym(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Ov(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Xn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Fh.newInvalidDocument(t);return Ym(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Xm(t))},(function(e,i){r=n.er(t,i)})).next((function(){return r}))}},{key:"tr",value:function(e,t){var n=this,r={size:0,document:Fh.newInvalidDocument(t)};return Ym(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Xm(t))},(function(e,i){r={document:n.er(t,i),size:Cm(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Ld();return this.nr(e,t,(function(e,t){var i=n.er(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"rr",value:function(e,t){var n=this,r=Ld(),i=new Yf(zl.comparator);return this.nr(e,t,(function(e,t){var a=n.er(e,t);r=r.insert(e,a),i=i.insert(e,Cm(t))})).next((function(){return{documents:r,ir:i}}))}},{key:"nr",value:function(e,t,n){if(t.isEmpty())return tf.resolve();var r=new Zf(Zm);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Xm(r.first()),Xm(r.last())),a=r.getIterator(),o=a.getNext();return Ym(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=zl.fromSegments([].concat(c(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Zm(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.W(Xm(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),Ov(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ym(e).G(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=Ld(),o=N(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.er(zl.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(Dd(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Ld(),o=Jm(t,n),u=Jm(t,$l.max());return Ym(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.er(zl.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Qm(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return $m(e).get("remoteDocumentGlobalKey").next((function(e){return yl(!!e),e}))}},{key:"Xn",value:function(e,t){return $m(e).put("remoteDocumentGlobalKey",t)}},{key:"er",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=vv(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=zl.fromSegments(t.noDocument.path),i=Lv(t.noDocument.readTime);n=Fh.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return ml();var a=zl.fromSegments(t.unknownDocument.path),o=Lv(t.unknownDocument.version);n=Fh.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new jl(e[0],e[1]);return Ll.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(Ll.min()))return n}return Fh.newInvalidDocument(e)}}]),e}();function Wm(e){return new Hm(e)}var Qm=function(e){m(n,e);var t=k(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).sr=e,i.trackRemovals=r,i._r=new Od((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return p(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Zf((function(e,t){return Rl(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t._r.get(a);if(n.push(t.sr.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Pv(t.sr.serializer,o);i=i.add(a.path.popLast());var c=Cm(s);r+=c-u.size,n.push(t.sr.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Pv(t.sr.serializer,o.convertToNoDocument(Ll.min()));n.push(t.sr.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.sr.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.sr.updateMetadata(e,r)),tf.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.sr.tr(e,t).next((function(e){return n._r.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.sr.rr(e,t).next((function(e){var t=e.documents;return e.ir.forEach((function(e,r){n._r.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Km);function $m(e){return Hf(e,"remoteDocumentGlobal")}function Ym(e){return Hf(e,"remoteDocumentsV14")}function Xm(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Jm(e,t){var n=t.documentKey.path.toArray();return[e,Ov(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Zm(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Rl(n[a],r[a]))return i;return(i=Rl(n.length,r.length))||((i=Rl(n[n.length-2],r[r.length-2]))||Rl(n[n.length-1],r[r.length-1]))}var ey=p((function e(t,n){l(this,e),this.overlayedDocument=t,this.mutatedFields=n})),ty=function(){function e(t,n,r,i){l(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return p(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&mp(r.mutation,e,nh.empty(),jl.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Kd()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Kd(),i=Vd();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Md();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Vd();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Kd())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Ld(),a=Bd(),o=Bd();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof kp)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),mp(o.mutation,t,o.mutation.getFieldMask(),jl.now())):a.set(t.key,nh.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new ey(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Bd(),i=new Yf((function(e,t){return e-t})),a=Kd();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=N(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||nh.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Kd()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=zd();c.forEach((function(e){if(!a.has(e)){var n=pp(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return tf.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return zl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):xd(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):tf.resolve(Vd()),u=-1,s=a;return o.next((function(t){return tf.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?tf.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Kd())})).next((function(e){return{batchId:u,changes:Ud(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new zl(t)).next((function(e){var t=Md();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Md();return this.indexManager.getCollectionParents(e,i).next((function(o){return tf.forEach(o,(function(o){var u=function(e,t){return new md(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Fh.newInvalidDocument(r)))}));var n=Md();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&mp(a.mutation,i,nh.empty(),jl.now()),Dd(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),ny=function(){function e(t){l(this,e),this.serializer=t,this.ar=new Map,this.ur=new Map}return p(e,[{key:"getBundleMetadata",value:function(e,t){return tf.resolve(this.ar.get(t))}},{key:"saveBundleMetadata",value:function(e,t){return this.ar.set(t.id,function(e){return{id:e.id,version:e.version,createTime:av(e.createTime)}}(t)),tf.resolve()}},{key:"getNamedQuery",value:function(e,t){return tf.resolve(this.ur.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ur.set(t.name,function(e){return{name:e.name,query:Vv(e.bundledQuery),readTime:av(e.readTime)}}(t)),tf.resolve()}}]),e}(),ry=function(){function e(){l(this,e),this.overlays=new Yf(zl.comparator),this.cr=new Map}return p(e,[{key:"getOverlay",value:function(e,t){return tf.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Vd();return tf.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ht(e,t,i)})),tf.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.cr.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.cr.delete(n)),tf.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Vd(),i=t.length+1,a=new zl(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return tf.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Yf((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Vd(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Vd(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return tf.resolve(s)}},{key:"ht",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.cr.get(r.largestBatchId).delete(n.key);this.cr.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Dp(t,n));var a=this.cr.get(t);void 0===a&&(a=Kd(),this.cr.set(t,a)),this.cr.set(t,a.add(n.key))}}]),e}(),iy=function(){function e(){l(this,e),this.lr=new Zf(ay.hr),this.Pr=new Zf(ay.Ir)}return p(e,[{key:"isEmpty",value:function(){return this.lr.isEmpty()}},{key:"addReference",value:function(e,t){var n=new ay(e,t);this.lr=this.lr.add(n),this.Pr=this.Pr.add(n)}},{key:"Tr",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Er(new ay(e,t))}},{key:"dr",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Ar",value:function(e){var t=this,n=new zl(new Ml([])),r=new ay(n,e),i=new ay(n,e+1),a=[];return this.Pr.forEachInRange([r,i],(function(e){t.Er(e),a.push(e.key)})),a}},{key:"Rr",value:function(){var e=this;this.lr.forEach((function(t){return e.Er(t)}))}},{key:"Er",value:function(e){this.lr=this.lr.delete(e),this.Pr=this.Pr.delete(e)}},{key:"Vr",value:function(e){var t=new zl(new Ml([])),n=new ay(t,e),r=new ay(t,e+1),i=Kd();return this.Pr.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new ay(e,0),n=this.lr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),ay=function(){function e(t,n){l(this,e),this.key=t,this.mr=n}return p(e,null,[{key:"hr",value:function(e,t){return zl.comparator(e.key,t.key)||Rl(e.mr,t.mr)}},{key:"Ir",value:function(e,t){return Rl(e.mr,t.mr)||zl.comparator(e.key,t.key)}}]),e}(),oy=function(){function e(t,n){l(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.gr=1,this.pr=new Zf(ay.hr)}return p(e,[{key:"checkEmpty",value:function(e){return tf.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.gr;this.gr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Ip(i,t,n,r);this.mutationQueue.push(a);var o,u=N(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.pr=this.pr.add(new ay(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return tf.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return tf.resolve(this.yr(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.wr(n),i=r<0?0:r;return tf.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return tf.resolve(0===this.mutationQueue.length?-1:this.gr-1)}},{key:"getAllMutationBatches",value:function(e){return tf.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new ay(t,0),i=new ay(t,Number.POSITIVE_INFINITY),a=[];return this.pr.forEachInRange([r,i],(function(e){var t=n.yr(e.mr);a.push(t)})),tf.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Zf(Rl);return t.forEach((function(e){var t=new ay(e,0),i=new ay(e,Number.POSITIVE_INFINITY);n.pr.forEachInRange([t,i],(function(e){r=r.add(e.mr)}))})),tf.resolve(this.Sr(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;zl.isDocumentKey(i)||(i=i.child(""));var a=new ay(new zl(i),0),o=new Zf(Rl);return this.pr.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.mr)),!0)}),a),tf.resolve(this.Sr(o))}},{key:"Sr",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.yr(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;yl(0===this.br(t.batchId,"removed")),this.mutationQueue.shift();var r=this.pr;return tf.forEach(t.mutations,(function(i){var a=new ay(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.pr=r}))}},{key:"Cn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new ay(t,0),r=this.pr.firstAfterOrEqual(n);return tf.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,tf.resolve()}},{key:"br",value:function(e,t){return this.wr(e)}},{key:"wr",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"yr",value:function(e){var t=this.wr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),uy=function(){function e(t){l(this,e),this.Dr=t,this.docs=new Yf(zl.comparator),this.size=0}return p(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Dr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return tf.resolve(n?n.document.mutableCopy():Fh.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Ld();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Fh.newInvalidDocument(e))})),tf.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=Ld(),a=t.path,o=new zl(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Yl(Ql(l),n)<=0||(r.has(l.key)||Dd(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return tf.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){ml()}},{key:"vr",value:function(e,t){return tf.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new sy(this)}},{key:"getSize",value:function(e){return tf.resolve(this.size)}}]),e}(),sy=function(e){m(n,e);var t=k(n);function n(e){var r;return l(this,n),(r=t.call(this)).sr=e,r}return p(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.sr.addEntry(e,i)):t.sr.removeEntry(r)})),tf.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.sr.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.sr.getEntries(e,t)}}]),n}(Km),cy=function(){function e(t){l(this,e),this.persistence=t,this.Cr=new Od((function(e){return ld(e)}),fd),this.lastRemoteSnapshotVersion=Ll.min(),this.highestTargetId=0,this.Fr=0,this.Mr=new iy,this.targetCount=0,this.Or=Pm.xn()}return p(e,[{key:"forEachTarget",value:function(e,t){return this.Cr.forEach((function(e,n){return t(n)})),tf.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return tf.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return tf.resolve(this.Fr)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Or.next(),tf.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Fr&&(this.Fr=t),tf.resolve()}},{key:"Ln",value:function(e){this.Cr.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Or=new Pm(t),this.highestTargetId=t),e.sequenceNumber>this.Fr&&(this.Fr=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Ln(t),this.targetCount+=1,tf.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Ln(t),tf.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Cr.delete(t.target),this.Mr.Ar(t.targetId),this.targetCount-=1,tf.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Cr.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Cr.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),tf.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return tf.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Cr.get(t)||null;return tf.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Mr.Tr(t,n),tf.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Mr.dr(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),tf.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Mr.Ar(t),tf.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Mr.Vr(t);return tf.resolve(n)}},{key:"containsKey",value:function(e,t){return tf.resolve(this.Mr.containsKey(t))}}]),e}(),ly=function(){function e(t,n){var r=this;l(this,e),this.Nr={},this.overlays={},this.Br=new pf(0),this.Lr=!1,this.Lr=!0,this.referenceDelegate=t(this),this.kr=new cy(this),this.indexManager=new vm,this.remoteDocumentCache=function(e){return new uy(e)}((function(e){return r.referenceDelegate.qr(e)})),this.serializer=new Rv(n),this.Qr=new ny(this.serializer)}return p(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Lr=!1,Promise.resolve()}},{key:"started",get:function(){return this.Lr}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new ry,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Nr[e.toKey()];return n||(n=new oy(t,this.referenceDelegate),this.Nr[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.kr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Qr}},{key:"runTransaction",value:function(e,t,n){var r=this;hl("MemoryPersistence","Starting transaction:",e);var i=new fy(this.Br.next());return this.referenceDelegate.Kr(),n(i).next((function(e){return r.referenceDelegate.$r(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ur",value:function(e,t){return tf.or(Object.values(this.Nr).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),fy=function(e){m(n,e);var t=k(n);function n(e){var r;return l(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return p(n)}(Jl),hy=function(){function e(t){l(this,e),this.persistence=t,this.Wr=new iy,this.Gr=null}return p(e,[{key:"jr",get:function(){if(this.Gr)return this.Gr;throw ml()}},{key:"addReference",value:function(e,t,n){return this.Wr.addReference(n,t),this.jr.delete(n.toString()),tf.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Wr.removeReference(n,t),this.jr.add(n.toString()),tf.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.jr.add(t.toString()),tf.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Wr.Ar(t.targetId).forEach((function(e){return n.jr.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.jr.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Kr",value:function(){this.Gr=new Set}},{key:"$r",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return tf.forEach(this.jr,(function(r){var i=zl.fromPath(r);return t.Hr(e,i).next((function(e){e||n.removeEntry(i,Ll.min())}))})).next((function(){return t.Gr=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hr(e,t).next((function(e){e?n.jr.delete(t.toString()):n.jr.add(t.toString())}))}},{key:"qr",value:function(e){return 0}},{key:"Hr",value:function(e,t){var n=this;return tf.or([function(){return tf.resolve(n.Wr.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ur(e,t)}])}}],[{key:"zr",value:function(t){return new e(t)}}]),e}(),dy=function(){function e(t){l(this,e),this.serializer=t}return p(e,[{key:"B",value:function(e,t,n,r){var i=this,a=new nf("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xf,{unique:!0}),e.createObjectStore("documentMutations")}(e),py(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=tf.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),py(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ll.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").G().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xf,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return tf.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Yr(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Zr(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Xr(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ei(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ti(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Ff});t.createIndex("collectionPathOverlayIndex",Mf,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Uf,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Nf});t.createIndex("documentKeyIndex",Cf),t.createIndex("collectionGroupIndex",If)}(e)})).next((function(){return i.ni(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.ri(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Pf}).createIndex("sequenceNumberIndex",Of,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:jf}).createIndex("documentKeyIndex",Lf,{unique:!1})}(e)}))),o}},{key:"Zr",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=Cm(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Yr",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.G().next((function(n){return tf.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.G("userMutationsIndex",i).next((function(r){return tf.forEach(r,(function(r){yl(r.userId===n.userId);var i=Fv(t.serializer,r);return Nm(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Xr",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new Ml(n),o=function(e){return[0,gf(e)]}(a);r.push(t.get(o).next((function(n){return n?tf.resolve():function(n){return t.put({targetId:0,path:gf(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return tf.waitFor(r)}))}))}},{key:"ei",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Rf});var n=t.store("collectionParents"),r=new mm,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:gf(i)})}};return t.store("remoteDocuments").Z({Y:!0},(function(e,t){var n=new Ml(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({Y:!0},(function(e,t){var n=E(e,3),r=(n[0],n[1]),a=(n[2],wf(r));return i(a.popLast())}))}))}},{key:"ti",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=Mv(r),a=Uv(t.serializer,i);return n.put(a)}))}},{key:"ni",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i=t.store("remoteDocumentsV14"),a=function(e){return e.document?new zl(Ml.fromString(e.document.name).popFirst(5)):e.noDocument?zl.fromSegments(e.noDocument.path):e.unknownDocument?zl.fromSegments(e.unknownDocument.path):ml()}(n).path.toArray(),o={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((function(){return tf.waitFor(r)}))}},{key:"ri",value:function(e,t){var n=this,r=t.store("mutations"),i=Wm(this.serializer),a=new ly(hy.zr,this.serializer.ct);return r.G().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Kd();Fv(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),tf.forEach(r,(function(e,r){var o=new sl(r),u=Wv.lt(n.serializer,o),s=a.getIndexManager(o),c=Im.lt(o,n.serializer,s,a.referenceDelegate);return new ty(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Kf(t,pf.ae),e).next()}))}))}}]),e}();function py(e){e.createObjectStore("targetDocuments",{keyPath:Df}).createIndex("documentTargetsIndex",Af,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Tf,{unique:!0}),e.createObjectStore("targetGlobal")}var vy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",my=function(){function e(t,n,r,i,a,o,u,s,c,f){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(l(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.ii=a,this.window=o,this.document=u,this.si=c,this.oi=f,this._i=h,this.Br=null,this.Lr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ai=null,this.inForeground=!1,this.ui=null,this.ci=null,this.li=Number.NEGATIVE_INFINITY,this.hi=function(e){return Promise.resolve()},!e.v())throw new kl(bl.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qm(this,i),this.Pi=n+"main",this.serializer=new Rv(s),this.Ii=new rf(this.Pi,this._i,new dy(this.serializer)),this.kr=new Om(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Wm(this.serializer),this.Qr=new Gv,this.window&&this.window.localStorage?this.Ti=this.window.localStorage:(this.Ti=null,!1===f&&dl("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return p(e,[{key:"start",value:function(){var e=this;return this.Ei().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new kl(bl.FAILED_PRECONDITION,vy);return e.di(),e.Ai(),e.Ri(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.kr.getHighestSequenceNumber(t)}))})).then((function(t){e.Br=new pf(t,e.si)})).then((function(){e.Lr=!0})).catch((function(t){return e.Ii&&e.Ii.close(),Promise.reject(t)}))}},{key:"Vi",value:function(e){var t=this;return this.hi=function(){var n=li(si().mark((function n(r){return si().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.Ii.k(function(){var t=li(si().mark((function t(n){return si().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(li(si().mark((function e(){return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Ei();case 4:case"end":return e.stop()}}),e)})))))}},{key:"Ei",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return gy(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.mi(t).next((function(t){t||(e.isPrimary=!1,e.ii.enqueueRetryable((function(){return e.hi(!1)})))}))})).next((function(){return e.fi(t)})).next((function(n){return e.isPrimary&&!n?e.gi(t).next((function(){return!1})):!!n&&e.pi(t).next((function(){return!0}))}))})).catch((function(t){if(uf(t))return hl("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return hl("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.ii.enqueueRetryable((function(){return e.hi(t)})),e.isPrimary=t}))}},{key:"mi",value:function(e){var t=this;return yy(e).get("owner").next((function(e){return tf.resolve(t.yi(e))}))}},{key:"wi",value:function(e){return gy(e).delete(this.clientId)}},{key:"Si",value:function(){var e=li(si().mark((function e(){var t,n,r,i,a=this;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.bi(this.li,18e5)){e.next=6;break}return this.li=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Hf(e,"clientMetadata");return t.G().next((function(e){var n=a.Di(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return tf.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Ti){n=N(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Ti.removeItem(this.vi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ri",value:function(){var e=this;this.ci=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.Ei().then((function(){return e.Si()})).then((function(){return e.Ri()}))}))}},{key:"yi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"fi",value:function(e){var t=this;return this.oi?tf.resolve(!0):yy(e).get("owner").next((function(n){if(null!==n&&t.bi(n.leaseTimestampMs,5e3)&&!t.Ci(n.ownerId)){if(t.yi(n)&&t.networkEnabled)return!0;if(!t.yi(n)){if(!n.allowTabSynchronization)throw new kl(bl.FAILED_PRECONDITION,vy);return!1}}return!(!t.networkEnabled||!t.inForeground)||gy(e).G().next((function(e){return void 0===t.Di(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&hl("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=li(si().mark((function e(){var t=this;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lr=!1,this.Fi(),this.ci&&(this.ci.cancel(),this.ci=null),this.Mi(),this.xi(),e.next=7,this.Ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Kf(e,pf.ae);return t.gi(n).next((function(){return t.wi(n)}))}));case 7:this.Ii.close(),this.Oi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Di",value:function(e,t){var n=this;return e.filter((function(e){return n.bi(e.updateTimeMs,t)&&!n.Ci(e.clientId)}))}},{key:"Ni",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return gy(t).G().next((function(t){return e.Di(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Lr}},{key:"getMutationQueue",value:function(e,t){return Im.lt(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.kr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new gm(e,this.serializer.ct.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Wv.lt(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.Qr}},{key:"runTransaction",value:function(e,t,n){var r=this;hl("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite",o=function(e){return 15===e?Gf:14===e?qf:13===e?Bf:12===e?zf:11===e?Vf:void ml()}(this._i);return this.Ii.runTransaction(e,a,o,(function(a){return i=new Kf(a,r.Br?r.Br.next():pf.ae),"readwrite-primary"===t?r.mi(i).next((function(e){return!!e||r.fi(i)})).next((function(t){if(!t)throw dl("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.ii.enqueueRetryable((function(){return r.hi(!1)})),new kl(bl.FAILED_PRECONDITION,Xl);return n(i)})).next((function(e){return r.pi(i).next((function(){return e}))})):r.Bi(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Bi",value:function(e){var t=this;return yy(e).get("owner").next((function(e){if(null!==e&&t.bi(e.leaseTimestampMs,5e3)&&!t.Ci(e.ownerId)&&!t.yi(e)&&!(t.oi||t.allowTabSynchronization&&e.allowTabSynchronization))throw new kl(bl.FAILED_PRECONDITION,vy)}))}},{key:"pi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return yy(e).put("owner",t)}},{key:"gi",value:function(e){var t=this,n=yy(e);return n.get("owner").next((function(e){return t.yi(e)?(hl("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):tf.resolve()}))}},{key:"bi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(dl("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"di",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ui=function(){e.ii.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.Ei()}))},this.document.addEventListener("visibilitychange",this.ui),this.inForeground="visible"===this.document.visibilityState)}},{key:"Mi",value:function(){this.ui&&(this.document.removeEventListener("visibilitychange",this.ui),this.ui=null)}},{key:"Ai",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ai=function(){t.Fi();var e=/(?:Version|Mobile)\/1[456]/;!Yr()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.ii.enterRestrictedMode(!0),t.ii.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ai))}},{key:"xi",value:function(){this.ai&&(this.window.removeEventListener("pagehide",this.ai),this.ai=null)}},{key:"Ci",value:function(e){var t;try{var n=null!==(null===(t=this.Ti)||void 0===t?void 0:t.getItem(this.vi(e)));return hl("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return dl("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Fi",value:function(){if(this.Ti)try{this.Ti.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){dl("Failed to set zombie client id.",e)}}},{key:"Oi",value:function(){if(this.Ti)try{this.Ti.removeItem(this.vi(this.clientId))}catch(e){}}},{key:"vi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"v",value:function(){return rf.v()}}]),e}();function yy(e){return Hf(e,"owner")}function gy(e){return Hf(e,"clientMetadata")}function by(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var ky=function(){function e(t,n,r,i){l(this,e),this.targetId=t,this.fromCache=n,this.Li=r,this.ki=i}return p(e,null,[{key:"qi",value:function(t,n){var r,i=Kd(),a=Kd(),o=N(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),wy=function(){function e(){l(this,e),this.Qi=!1}return p(e,[{key:"initialize",value:function(e,t){this.Ki=e,this.indexManager=t,this.Qi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.$i(e,t).next((function(a){return a||i.Ui(e,t,r,n)})).next((function(n){return n||i.Wi(e,t)}))}},{key:"$i",value:function(e,t){var n=this;if(bd(t))return tf.resolve(null);var r=Sd(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Nd(t,null,"F"),r=Sd(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Kd.apply(void 0,c(i));return n.Ki.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Gi(t,i);return n.zi(t,o,a,r.readTime)?n.$i(e,Nd(t,null,"F")):n.ji(e,o,t,r)}))}))})))}))}},{key:"Ui",value:function(e,t,n,r){var i=this;return bd(t)||r.isEqual(Ll.min())?this.Wi(e,t):this.Ki.getDocuments(e,n).next((function(a){var o=i.Gi(t,a);return i.zi(t,o,n,r)?i.Wi(e,t):(fl()<=vi.DEBUG&&hl("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Td(t)),i.ji(e,o,t,Wl(r,-1)))}))}},{key:"Gi",value:function(e,t){var n=new Zf(Rd(e));return t.forEach((function(t,r){Dd(e,r)&&(n=n.add(r))})),n}},{key:"zi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Wi",value:function(e,t){return fl()<=vi.DEBUG&&hl("QueryEngine","Using full collection scan to execute query:",Td(t)),this.Ki.getDocumentsMatchingQuery(e,t,$l.min())}},{key:"ji",value:function(e,t,n,r){return this.Ki.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),xy=function(){function e(t,n,r,i){l(this,e),this.persistence=t,this.Hi=n,this.serializer=i,this.Ji=new Yf(Rl),this.Yi=new Od((function(e){return ld(e)}),fd),this.Zi=new Map,this.Xi=t.getRemoteDocumentCache(),this.kr=t.getTargetCache(),this.Qr=t.getBundleCache(),this.es(r)}return p(e,[{key:"es",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ty(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ji)}))}}]),e}();function _y(e,t,n,r){return new xy(e,t,n,r)}function Sy(e,t){return Ey.apply(this,arguments)}function Ey(){return Ey=li(si().mark((function e(t,n){var r;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gl(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.es(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Kd(),s=N(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=N(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(b){f.e(b)}finally{f.f()}}}catch(b){s.e(b)}finally{s.f()}var d,p=N(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=N(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(b){y.e(b)}finally{y.f()}}}catch(b){p.e(b)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{ts:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Ey.apply(this,arguments)}function Ny(e,t){var n=gl(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Xi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=tf.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);yl(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Kd(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Cy(e){var t=gl(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.kr.getLastRemoteSnapshotVersion(e)}))}function Iy(e,t){var n=gl(e),r=t.snapshotVersion,i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Xi.newChangeBuffer({trackRemovals:!0});i=n.Ji;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.kr.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.kr.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?c=c.withResumeToken(ih.EMPTY_BYTE_STRING,Ll.min()).withLastLimboFreeSnapshotVersion(Ll.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.kr.updateTargetData(e,c))}}));var u=Ld(),s=Kd();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Ty(e,a,t.documentUpdates).next((function(e){u=e.ns,s=e.rs}))),!r.isEqual(Ll.min())){var c=n.kr.getLastRemoteSnapshotVersion(e).next((function(t){return n.kr.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return tf.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ji=i,e}))}function Ty(e,t,n){var r=Kd(),i=Kd();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Ld();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Ll.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):hl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{ns:r,rs:i}}))}function Dy(e,t){var n=gl(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Ay(e,t){var n=gl(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.kr.getTargetData(e,t).next((function(i){return i?(r=i,tf.resolve(r)):n.kr.allocateTargetId(e).next((function(i){return r=new Av(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.kr.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}function Ry(e,t,n){return Py.apply(this,arguments)}function Py(){return Py=li(si().mark((function e(t,n,r){var i,a,o;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=gl(t),a=i.Ji.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),uf(e.t1)){e.next=12;break}throw e.t1;case 12:hl("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ji=i.Ji.remove(n),i.Yi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Py.apply(this,arguments)}function Oy(e,t,n){var r=gl(e),i=Ll.min(),a=Kd();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=gl(e),i=r.Yi.get(n);return void 0!==i?tf.resolve(r.Ji.get(i)):r.kr.getTargetData(t,n)}(r,e,Sd(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.kr.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Hi.getDocumentsMatchingQuery(e,t,n?i:Ll.min(),n?a:Kd())})).next((function(e){return Fy(r,Ad(t),e),{documents:e,ss:a}}))}))}function jy(e,t){var n=gl(e),r=gl(n.kr),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ut(e,t).next((function(e){return e?e.target:null}))}))}function Ly(e,t){var n=gl(e),r=n.Zi.get(t)||Ll.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Xi.getAllFromCollectionGroup(e,t,Wl(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Fy(n,t,e),e}))}function Fy(e,t,n){var r=e.Zi.get(t)||Ll.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Zi.set(t,r)}function My(e,t,n,r){return Uy.apply(this,arguments)}function Uy(){return Uy=li(si().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=gl(t),o=Kd(),u=Ld(),s=N(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.os(l.metadata.name),l.document&&(o=o.add(f)),(h=n._s(l)).setReadTime(n.us(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Xi.newChangeBuffer({trackRemovals:!0}),e.next=7,Ay(a,function(e){return Sd(gd(Ml.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Ty(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.kr.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.kr.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.ns,t.rs)})).next((function(){return t.ns}))}))})));case 9:case"end":return e.stop()}}),e)}))),Uy.apply(this,arguments)}function Vy(e,t){return zy.apply(this,arguments)}function zy(){return zy=li(si().mark((function e(t,n){var r,i,a,o=arguments;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Kd(),e.next=3,Ay(t,Sd(Vv(n.bundledQuery)));case 3:return i=e.sent,a=gl(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=av(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Qr.saveNamedQuery(e,n);var o=i.withResumeToken(ih.EMPTY_BYTE_STRING,t);return a.Ji=a.Ji.insert(o.targetId,o),a.kr.updateTargetData(e,o).next((function(){return a.kr.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.kr.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Qr.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),zy.apply(this,arguments)}function By(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function qy(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Gy(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Ky=function(){function e(t,n,r,i){l(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return p(e,[{key:"ls",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"cs",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new kl(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(dl("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Hy=function(){function e(t,n,r){l(this,e),this.targetId=t,this.state=n,this.error=r}return p(e,[{key:"ls",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"cs",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new kl(i.error.code,i.error.message))),a?new e(t,i.state,r):(dl("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Wy=function(){function e(t,n){l(this,e),this.clientId=t,this.activeTargetIds=n}return p(e,null,[{key:"cs",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Wd(),o=0;i&&o<r.activeTargetIds.length;++o)i=yf(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(dl("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Qy=function(){function e(t,n){l(this,e),this.clientId=t,this.onlineState=n}return p(e,null,[{key:"cs",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(dl("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),$y=function(){function e(){l(this,e),this.activeTargetIds=Wd()}return p(e,[{key:"hs",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ps",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"ls",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Yy=function(){function e(t,n,r,i,a){l(this,e),this.window=t,this.ii=n,this.persistenceKey=r,this.Is=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ts=this.Es.bind(this),this.ds=new Yf(Rl),this.started=!1,this.As=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Rs=By(this.persistenceKey,this.Is),this.Vs=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ds=this.ds.insert(this.Is,new $y),this.fs=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.gs=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.ps=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.ys=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.ws=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Ts)}return p(e,[{key:"start",value:function(){var e=li(si().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Ni();case 2:t=e.sent,n=N(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.Is){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(By(this.persistenceKey,i)))&&(o=Wy.cs(i,a))&&(this.ds=this.ds.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Ss(),(u=this.storage.getItem(this.ys))&&(s=this.bs(u))&&this.Ds(s),c=N(this.As);try{for(c.s();!(l=c.n()).done;)f=l.value,this.Es(f)}catch(d){c.e(d)}finally{c.f()}this.As=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Vs,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.vs(this.ds)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ds.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Cs(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Cs(e,t,n),this.Fs(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Gy(this.persistenceKey,e));if(n){var r=Hy.cs(e,n);r&&(t=r.state)}}return this.Ms.hs(e),this.Ss(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ms.Ps(e),this.Ss()}},{key:"isLocalQueryTarget",value:function(e){return this.Ms.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Gy(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.xs(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Fs(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Os(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ns(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.Ts),this.removeItem(this.Rs),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return hl("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){hl("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){hl("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"Es",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(hl("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Rs)return void dl("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(li(si().mark((function e(){var r,i,a,o,u,s,c;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.fs.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Bs(n.key),e.abrupt("return",t.Ls(r,null));case 6:if(!(i=t.ks(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Ls(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.gs.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.qs(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Qs(a));case 16:e.next=41;break;case 18:if(!t.ps.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Ks(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.$s(o));case 23:e.next=41;break;case 25:if(n.key!==t.ys){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.bs(n.newValue))){e.next=30;break}return e.abrupt("return",t.Ds(u));case 30:e.next=41;break;case 32:if(n.key!==t.Vs){e.next=37;break}s=function(e){var t=pf.ae;if(null!=e)try{var n=JSON.parse(e);yl("number"==typeof n),t=n}catch(e){dl("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==pf.ae&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.ws){e.next=41;break}return c=t.Us(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Ws(e)})));case 41:e.next=44;break;case 43:t.As.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ms",get:function(){return this.ds.get(this.Is)}},{key:"Ss",value:function(){this.setItem(this.Rs,this.Ms.ls())}},{key:"Cs",value:function(e,t,n){var r=new Ky(this.currentUser,e,t,n),i=qy(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ls())}},{key:"Fs",value:function(e){var t=qy(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Os",value:function(e){var t={clientId:this.Is,onlineState:e};this.storage.setItem(this.ys,JSON.stringify(t))}},{key:"xs",value:function(e,t,n){var r=Gy(this.persistenceKey,e),i=new Hy(e,t,n);this.setItem(r,i.ls())}},{key:"Ns",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.ws,t)}},{key:"Bs",value:function(e){var t=this.fs.exec(e);return t?t[1]:null}},{key:"ks",value:function(e,t){var n=this.Bs(e);return Wy.cs(n,t)}},{key:"qs",value:function(e,t){var n=this.gs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Ky.cs(new sl(i),r,t)}},{key:"Ks",value:function(e,t){var n=this.ps.exec(e),r=Number(n[1]);return Hy.cs(r,t)}},{key:"bs",value:function(e){return Qy.cs(e)}},{key:"Us",value:function(e){return JSON.parse(e)}},{key:"Qs",value:function(){var e=li(si().mark((function e(t){return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Gs(t.batchId,t.state,t.error));case 2:hl("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"$s",value:function(e){return this.syncEngine.zs(e.targetId,e.state,e.error)}},{key:"Ls",value:function(e,t){var n=this,r=t?this.ds.insert(e,t):this.ds.remove(e),i=this.vs(this.ds),a=this.vs(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.js(o,u).then((function(){n.ds=r}))}},{key:"Ds",value:function(e){this.ds.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"vs",value:function(e){var t=Wd();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"v",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Xy=function(){function e(){l(this,e),this.Hs=new $y,this.Js={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return p(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Hs.hs(e),this.Js[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Js[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Hs.Ps(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Hs.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Js[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Hs.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Hs.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Hs=new $y,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Jy=function(){function e(){l(this,e)}return p(e,[{key:"Ys",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Zy=function(){function e(){var t=this;l(this,e),this.Zs=function(){return t.Xs()},this.eo=function(){return t.no()},this.ro=[],this.io()}return p(e,[{key:"Ys",value:function(e){this.ro.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Zs),window.removeEventListener("offline",this.eo)}},{key:"io",value:function(){window.addEventListener("online",this.Zs),window.addEventListener("offline",this.eo)}},{key:"Xs",value:function(){hl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=N(this.ro);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"no",value:function(){hl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=N(this.ro);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"v",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),eg=null;function tg(){return null===eg?eg=268435456+Math.round(2147483648*Math.random()):eg++,"0x"+eg.toString(16)}var ng={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},rg=function(){function e(t){l(this,e),this.so=t.so,this.oo=t.oo}return p(e,[{key:"_o",value:function(e){this.ao=e}},{key:"uo",value:function(e){this.co=e}},{key:"onMessage",value:function(e){this.lo=e}},{key:"close",value:function(){this.oo()}},{key:"send",value:function(e){this.so(e)}},{key:"ho",value:function(){this.ao()}},{key:"Po",value:function(e){this.co(e)}},{key:"Io",value:function(e){this.lo(e)}}]),e}(),ig="WebChannelConnection",ag=function(e){m(n,e);var t=k(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return p(n,[{key:"po",value:function(e,t,n,r){var i=tg();return new Promise((function(a,o){var u=new il;u.setWithCredentials(!0),u.listenOnce(Zc.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case Jc.NO_ERROR:var t=u.getResponseJson();hl(ig,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Jc.TIMEOUT:hl(ig,"RPC '".concat(e,"' ").concat(i," timed out")),o(new kl(bl.DEADLINE_EXCEEDED,"Request time out"));break;case Jc.HTTP_ERROR:var n=u.getStatus();if(hl(ig,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(bl).indexOf(t)>=0?t:bl.UNKNOWN}(s.status);o(new kl(c,s.message))}else o(new kl(bl.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new kl(bl.UNAVAILABLE,"Connection failed."));break;default:ml()}}finally{hl(ig,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);hl(ig,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"wo",value:function(e,t,n){var r=tg(),i=[this.To,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Yc(),o=Xc(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;void 0!==s&&(u.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(u.xmlHttpFactory=new nl({})),this.fo(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var c=i.join("");hl(ig,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),u);var l=a.createWebChannel(c,u),f=!1,h=!1,d=new rg({so:function(t){h?hl(ig,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(hl(ig,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),hl(ig,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},oo:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,rl.EventType.OPEN,(function(){h||hl(ig,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,rl.EventType.CLOSE,(function(){h||(h=!0,hl(ig,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.Po())})),p(l,rl.EventType.ERROR,(function(t){h||(h=!0,pl(ig,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.Po(new kl(bl.UNAVAILABLE,"The operation could not be completed")))})),p(l,rl.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];yl(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){hl(ig,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=Sp[e];if(void 0!==t)return Pp(t)}(u),c=o.message;void 0===s&&(s=bl.INTERNAL,c="Unknown error status: "+u+" with message "+o.message),h=!0,d.Po(new kl(s,c)),l.close()}else hl(ig,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d.Io(i)}})),p(o,el.STAT_EVENT,(function(t){t.stat===tl.PROXY?hl(ig,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===tl.NOPROXY&&hl(ig,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.ho()}),0),d}}]),n}(function(){function e(t){l(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.To=n+"://"+t.host,this.Eo="projects/".concat(r,"/databases/").concat(i),this.Ao="(default)"===this.databaseId.database?"project_id=".concat(r):"project_id=".concat(r,"&database_id=").concat(i)}return p(e,[{key:"Ro",get:function(){return!1}},{key:"Vo",value:function(e,t,n,r,i){var a=tg(),o=this.mo(e,t);hl("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={"google-cloud-resource-prefix":this.Eo,"x-goog-request-params":this.Ao};return this.fo(u,r,i),this.po(e,o,u,n).then((function(t){return hl("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw pl("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"yo",value:function(e,t,n,r,i,a){return this.Vo(e,t,n,r,i)}},{key:"fo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+cl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"mo",value:function(e,t){var n=ng[e];return"".concat(this.To,"/v1/").concat(t,":").concat(n)}}]),e}());function og(){return"undefined"!=typeof window?window:null}function ug(){return"undefined"!=typeof document?document:null}function sg(e){return new ev(e,!0)}var cg=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;l(this,e),this.ii=t,this.timerId=n,this.So=r,this.bo=i,this.Do=a,this.vo=0,this.Co=null,this.Fo=Date.now(),this.reset()}return p(e,[{key:"reset",value:function(){this.vo=0}},{key:"Mo",value:function(){this.vo=this.Do}},{key:"xo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.vo+this.Oo()),r=Math.max(0,Date.now()-this.Fo),i=Math.max(0,n-r);i>0&&hl("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.vo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Co=this.ii.enqueueAfterDelay(this.timerId,i,(function(){return t.Fo=Date.now(),e()})),this.vo*=this.bo,this.vo<this.So&&(this.vo=this.So),this.vo>this.Do&&(this.vo=this.Do)}},{key:"No",value:function(){null!==this.Co&&(this.Co.skipDelay(),this.Co=null)}},{key:"cancel",value:function(){null!==this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"Oo",value:function(){return(Math.random()-.5)*this.vo}}]),e}(),lg=function(){function e(t,n,r,i,a,o,u,s){l(this,e),this.ii=t,this.Bo=r,this.Lo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.ko=0,this.qo=null,this.Qo=null,this.stream=null,this.Ko=new cg(t,n)}return p(e,[{key:"$o",value:function(){return 1===this.state||5===this.state||this.Uo()}},{key:"Uo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Wo()}},{key:"stop",value:function(){var e=li(si().mark((function e(){return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.$o(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Go",value:function(){this.state=0,this.Ko.reset()}},{key:"zo",value:function(){var e=this;this.Uo()&&null===this.qo&&(this.qo=this.ii.enqueueAfterDelay(this.Bo,6e4,(function(){return e.jo()})))}},{key:"Ho",value:function(e){this.Jo(),this.stream.send(e)}},{key:"jo",value:function(){var e=li(si().mark((function e(){return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Uo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Jo",value:function(){this.qo&&(this.qo.cancel(),this.qo=null)}},{key:"Yo",value:function(){this.Qo&&(this.Qo.cancel(),this.Qo=null)}},{key:"close",value:function(){var e=li(si().mark((function e(t,n){return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Jo(),this.Yo(),this.Ko.cancel(),this.ko++,4!==t?this.Ko.reset():n&&n.code===bl.RESOURCE_EXHAUSTED?(dl(n.toString()),dl("Using maximum backoff delay to prevent overloading the backend."),this.Ko.Mo()):n&&n.code===bl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Zo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.uo(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Zo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Xo(this.ko),n=this.ko;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=E(t,2),i=r[0],a=r[1];e.ko===n&&e.e_(i,a)}),(function(n){t((function(){var t=new kl(bl.UNKNOWN,"Fetching auth token failed: "+n.message);return e.t_(t)}))}))}},{key:"e_",value:function(e,t){var n=this,r=this.Xo(this.ko);this.stream=this.n_(e,t),this.stream._o((function(){r((function(){return n.state=2,n.Qo=n.ii.enqueueAfterDelay(n.Lo,1e4,(function(){return n.Uo()&&(n.state=3),Promise.resolve()})),n.listener._o()}))})),this.stream.uo((function(e){r((function(){return n.t_(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Wo",value:function(){var e=this;this.state=5,this.Ko.xo(li(si().mark((function t(){return si().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"t_",value:function(e){return hl("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Xo",value:function(e){var t=this;return function(n){t.ii.enqueueAndForget((function(){return t.ko===e?n():(hl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),fg=function(e){m(n,e);var t=k(n);function n(e,r,i,a,o,u){var s;return l(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return p(n,[{key:"n_",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Ko.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ml()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(yl(void 0===t||"string"==typeof t),ih.fromBase64String(t||"")):(yl(void 0===t||t instanceof Uint8Array),ih.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?bl.UNKNOWN:Pp(e.code);return new kl(t,e.message||"")}(o);n=new Hp(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=cv(e,s.document.name),l=av(s.document.updateTime),f=s.document.createTime?av(s.document.createTime):Ll.min(),h=new jh({mapValue:{fields:s.document.fields}}),d=Fh.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new Gp(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=cv(e,m.document),g=m.readTime?av(m.readTime):Ll.min(),b=Fh.newNoDocument(y,g),k=m.removedTargetIds||[];n=new Gp([],k,b.key,b)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var x=cv(e,w.document),_=w.removedTargetIds||[];n=new Gp([],_,x,null)}else{if(!("filter"in t))return ml();t.filter;var S=t.filter;S.targetId;var E=S.count,N=void 0===E?0:E,C=S.unchangedNames,I=new Ap(N,C),T=S.targetId;n=new Kp(T,I)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Ll.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Ll.min():t.readTime?av(t.readTime):Ll.min()}(e);return this.listener.r_(t,n)}},{key:"i_",value:function(e){var t={};t.database=hv(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=hd(r)?{documents:bv(e,r)}:{query:kv(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=rv(e,t.resumeToken);var i=tv(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(Ll.min())>0){n.readTime=nv(e,t.snapshotVersion.toTimestamp());var a=tv(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ml()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Ho(t)}},{key:"s_",value:function(e){var t={};t.database=hv(this.serializer),t.removeTarget=e,this.Ho(t)}}]),n}(lg),hg=function(e){m(n,e);var t=k(n);function n(e,r,i,a,o,u){var s;return l(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.o_=!1,s}return p(n,[{key:"__",get:function(){return this.o_}},{key:"start",value:function(){this.o_=!1,this.lastStreamToken=void 0,Ma(y(n.prototype),"start",this).call(this)}},{key:"Zo",value:function(){this.o_&&this.a_([])}},{key:"n_",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(yl(!!e.streamToken),this.lastStreamToken=e.streamToken,this.o_){this.Ko.reset();var t=function(e,t){return e&&e.length>0?(yl(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?av(e.updateTime):av(t);return n.isEqual(Ll.min())&&(n=av(t)),new lp(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=av(e.commitTime);return this.listener.u_(n,t)}return yl(!e.writeResults||0===e.writeResults.length),this.o_=!0,this.listener.c_()}},{key:"l_",value:function(){var e={};e.database=hv(this.serializer),this.Ho(e)}},{key:"a_",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return yv(t.serializer,e)}))};this.Ho(n)}}]),n}(lg),dg=function(e){m(n,e);var t=k(n);function n(e,r,i,a){var o;return l(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.h_=!1,o}return p(n,[{key:"P_",value:function(){if(this.h_)throw new kl(bl.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Vo",value:function(e,t,n){var r=this;return this.P_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=E(i,2),o=a[0],u=a[1];return r.connection.Vo(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===bl.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new kl(bl.UNKNOWN,e.toString())}))}},{key:"yo",value:function(e,t,n,r){var i=this;return this.P_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=E(a,2),u=o[0],s=o[1];return i.connection.yo(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===bl.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new kl(bl.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.h_=!0}}]),n}(p((function e(){l(this,e)})));var pg=function(){function e(t,n){l(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.T_=0,this.E_=null,this.d_=!0}return p(e,[{key:"A_",value:function(){var e=this;0===this.T_&&(this.R_("Unknown"),this.E_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.E_=null,e.V_("Backend didn't respond within 10 seconds."),e.R_("Offline"),Promise.resolve()})))}},{key:"m_",value:function(e){"Online"===this.state?this.R_("Unknown"):(this.T_++,this.T_>=1&&(this.f_(),this.V_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.R_("Offline")))}},{key:"set",value:function(e){this.f_(),this.T_=0,"Online"===e&&(this.d_=!1),this.R_(e)}},{key:"R_",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"V_",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.d_?(dl(t),this.d_=!1):hl("OnlineStateTracker",t)}},{key:"f_",value:function(){null!==this.E_&&(this.E_.cancel(),this.E_=null)}}]),e}(),vg=p((function e(t,n,r,i,a){var o=this;l(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.g_=[],this.p_=new Map,this.y_=new Set,this.w_=[],this.S_=a,this.S_.Ys((function(e){r.enqueueAndForget(li(si().mark((function e(){return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Ng(o),!e.t0){e.next=5;break}return hl("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=li(si().mark((function e(t){var n;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=gl(t)).y_.add(4),e.next=4,gg(n);case 4:return n.b_.set("Unknown"),n.y_.delete(4),e.next=8,mg(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.b_=new pg(r,i)}));function mg(e){return yg.apply(this,arguments)}function yg(){return yg=li(si().mark((function e(t){var n,r,i;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ng(t)){e.next=18;break}n=N(t.w_),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),yg.apply(this,arguments)}function gg(e){return bg.apply(this,arguments)}function bg(){return bg=li(si().mark((function e(t){var n,r,i;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=N(t.w_),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),bg.apply(this,arguments)}function kg(e,t){var n=gl(e);n.p_.has(t.targetId)||(n.p_.set(t.targetId,t),Eg(n)?Sg(n):tb(n).Uo()&&xg(n,t))}function wg(e,t){var n=gl(e),r=tb(n);n.p_.delete(t),r.Uo()&&_g(n,t),0===n.p_.size&&(r.Uo()?r.zo():Ng(n)&&n.b_.set("Unknown"))}function xg(e,t){if(e.D_.Be(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ll.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}tb(e).i_(t)}function _g(e,t){e.D_.Be(t),tb(e).s_(t)}function Sg(e){e.D_=new Qp({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ut:function(t){return e.p_.get(t)||null},rt:function(){return e.datastore.serializer.databaseId}}),tb(e).start(),e.b_.A_()}function Eg(e){return Ng(e)&&!tb(e).$o()&&e.p_.size>0}function Ng(e){return 0===gl(e).y_.size}function Cg(e){e.D_=void 0}function Ig(e){return Tg.apply(this,arguments)}function Tg(){return Tg=li(si().mark((function e(t){return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.p_.forEach((function(e,n){xg(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Tg.apply(this,arguments)}function Dg(e,t){return Ag.apply(this,arguments)}function Ag(){return Ag=li(si().mark((function e(t,n){return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Cg(t),Eg(t)?(t.b_.m_(n),Sg(t)):t.b_.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Ag.apply(this,arguments)}function Rg(e,t,n){return Pg.apply(this,arguments)}function Pg(){return Pg=li(si().mark((function e(t,n,r){var i;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.b_.set("Online"),!(n instanceof Hp&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=li(si().mark((function e(t,n){var r,i,a,o;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=N(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.p_.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.p_.delete(o),t.D_.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),hl("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Og(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Gp?t.D_.We(n):n instanceof Kp?t.D_.Ze(n):t.D_.je(n),r.isEqual(Ll.min())){e.next=29;break}return e.prev=14,e.next=17,Cy(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.D_.st(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.p_.get(r);i&&e.p_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.p_.get(t);if(r){e.p_.set(t,r.withResumeToken(ih.EMPTY_BYTE_STRING,r.snapshotVersion)),_g(e,t);var i=new Av(r.target,t,n,r.sequenceNumber);xg(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),hl("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Og(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Pg.apply(this,arguments)}function Og(e,t,n){return jg.apply(this,arguments)}function jg(){return jg=li(si().mark((function e(t,n,r){return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(uf(n)){e.next=2;break}throw n;case 2:return t.y_.add(1),e.next=5,gg(t);case 5:t.b_.set("Offline"),r||(r=function(){return Cy(t.localStore)}),t.asyncQueue.enqueueRetryable(li(si().mark((function e(){return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hl("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.y_.delete(1),e.next=6,mg(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),jg.apply(this,arguments)}function Lg(e,t){return t().catch((function(n){return Og(e,n,t)}))}function Fg(e){return Mg.apply(this,arguments)}function Mg(){return Mg=li(si().mark((function e(t){var n,r,i,a;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=gl(t),r=nb(n),i=n.g_.length>0?n.g_[n.g_.length-1].batchId:-1;case 2:if(!Ug(n)){e.next=19;break}return e.prev=3,e.next=6,Dy(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.g_.length&&r.zo(),e.abrupt("break",19);case 10:i=a.batchId,Vg(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Og(n,e.t0);case 17:e.next=2;break;case 19:zg(n)&&Bg(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Mg.apply(this,arguments)}function Ug(e){return Ng(e)&&e.g_.length<10}function Vg(e,t){e.g_.push(t);var n=nb(e);n.Uo()&&n.__&&n.a_(t.mutations)}function zg(e){return Ng(e)&&!nb(e).$o()&&e.g_.length>0}function Bg(e){nb(e).start()}function qg(e){return Gg.apply(this,arguments)}function Gg(){return Gg=li(si().mark((function e(t){return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:nb(t).l_();case 1:case"end":return e.stop()}}),e)}))),Gg.apply(this,arguments)}function Kg(e){return Hg.apply(this,arguments)}function Hg(){return Hg=li(si().mark((function e(t){var n,r,i,a;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=nb(t),r=N(t.g_);try{for(r.s();!(i=r.n()).done;)a=i.value,n.a_(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Hg.apply(this,arguments)}function Wg(e,t,n){return Qg.apply(this,arguments)}function Qg(){return Qg=li(si().mark((function e(t,n,r){var i,a;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.g_.shift(),a=Tp.from(i,n,r),e.next=3,Lg(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Fg(t);case 5:case"end":return e.stop()}}),e)}))),Qg.apply(this,arguments)}function $g(e,t){return Yg.apply(this,arguments)}function Yg(){return Yg=li(si().mark((function e(t,n){return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&nb(t).__,!e.t0){e.next=4;break}return e.next=4,function(){var e=li(si().mark((function e(t,n){var r;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!function(e){return Rp(e)&&e!==bl.ABORTED}(n.code)){e.next=7;break}return r=t.g_.shift(),nb(t).Go(),e.next=5,Lg(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Fg(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:zg(t)&&Bg(t);case 5:case"end":return e.stop()}}),e)}))),Yg.apply(this,arguments)}function Xg(e,t){return Jg.apply(this,arguments)}function Jg(){return Jg=li(si().mark((function e(t,n){var r,i;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=gl(t)).asyncQueue.verifyOperationInProgress(),hl("RemoteStore","RemoteStore received new credentials"),i=Ng(r),r.y_.add(3),e.next=6,gg(r);case 6:return i&&r.b_.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.y_.delete(3),e.next=12,mg(r);case 12:case"end":return e.stop()}}),e)}))),Jg.apply(this,arguments)}function Zg(e,t){return eb.apply(this,arguments)}function eb(){return eb=li(si().mark((function e(t,n){var r;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=gl(t),!n){e.next=7;break}return r.y_.delete(2),e.next=5,mg(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.y_.add(2),e.next=12,gg(r);case 12:r.b_.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),eb.apply(this,arguments)}function tb(e){return e.v_||(e.v_=function(e,t,n){var r=gl(e);return r.P_(),new fg(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{_o:Ig.bind(null,e),uo:Dg.bind(null,e),r_:Rg.bind(null,e)}),e.w_.push(function(){var t=li(si().mark((function t(n){return si().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.v_.Go(),Eg(e)?Sg(e):e.b_.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.v_.stop();case 6:Cg(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.v_}function nb(e){return e.C_||(e.C_=function(e,t,n){var r=gl(e);return r.P_(),new hg(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{_o:qg.bind(null,e),uo:$g.bind(null,e),c_:Kg.bind(null,e),u_:Wg.bind(null,e)}),e.w_.push(function(){var t=li(si().mark((function t(n){return si().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.C_.Go(),t.next=4,Fg(e);case 4:t.next=9;break;case 6:return t.next=8,e.C_.stop();case 8:e.g_.length>0&&(hl("RemoteStore","Stopping write stream with ".concat(e.g_.length," pending writes")),e.g_=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.C_}var rb=function(){function e(t,n,r,i,a){l(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new wl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return p(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new kl(bl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function ib(e,t){if(dl("AsyncQueue","".concat(t,": ").concat(e)),uf(e))return new kl(bl.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var ab=function(){function e(t){l(this,e),this.comparator=t?function(e,n){return t(e,n)||zl.comparator(e.key,n.key)}:function(e,t){return zl.comparator(e.key,t.key)},this.keyedMap=Md(),this.sortedSet=new Yf(this.comparator)}return p(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),ob=function(){function e(){l(this,e),this.F_=new Yf(zl.comparator)}return p(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.F_.get(t);n?0!==e.type&&3===n.type?this.F_=this.F_.insert(t,e):3===e.type&&1!==n.type?this.F_=this.F_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.F_=this.F_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.F_=this.F_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.F_=this.F_.remove(t):1===e.type&&2===n.type?this.F_=this.F_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.F_=this.F_.insert(t,{type:2,doc:e.doc}):ml():this.F_=this.F_.insert(t,e)}},{key:"M_",value:function(){var e=[];return this.F_.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),ub=function(){function e(t,n,r,i,a,o,u,s,c){l(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return p(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,ab.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),sb=p((function e(){l(this,e),this.x_=void 0,this.listeners=[]})),cb=p((function e(){l(this,e),this.queries=new Od((function(e){return Id(e)}),Cd),this.onlineState="Unknown",this.O_=new Set}));function lb(e,t){return fb.apply(this,arguments)}function fb(){return fb=li(si().mark((function e(t,n){var r,i,a,o,u;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=gl(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new sb),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.x_=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=ib(e.t0,"Initialization of query '".concat(Td(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.N_(r.onlineState),o.x_&&n.B_(o.x_)&&mb(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),fb.apply(this,arguments)}function hb(e,t){return db.apply(this,arguments)}function db(){return db=li(si().mark((function e(t,n){var r,i,a,o,u;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=gl(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),db.apply(this,arguments)}function pb(e,t){var n,r=gl(e),i=!1,a=N(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=N(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.B_(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.x_=o}}}catch(f){a.e(f)}finally{a.f()}i&&mb(r)}function vb(e,t,n){var r=gl(e),i=r.queries.get(t);if(i){var a,o=N(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function mb(e){e.O_.forEach((function(e){e.next()}))}var yb=function(){function e(t,n,r){l(this,e),this.query=t,this.L_=n,this.k_=!1,this.q_=null,this.onlineState="Unknown",this.options=r||{}}return p(e,[{key:"B_",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=N(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new ub(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.k_?this.Q_(e)&&(this.L_.next(e),a=!0):this.K_(e,this.onlineState)&&(this.U_(e),a=!0),this.q_=e,a}},{key:"onError",value:function(e){this.L_.error(e)}},{key:"N_",value:function(e){this.onlineState=e;var t=!1;return this.q_&&!this.k_&&this.K_(this.q_,e)&&(this.U_(this.q_),t=!0),t}},{key:"K_",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.W_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Q_",value:function(e){if(e.docChanges.length>0)return!0;var t=this.q_&&this.q_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"U_",value:function(e){e=ub.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.k_=!0,this.L_.next(e)}}]),e}(),gb=function(){function e(t,n){l(this,e),this.G_=t,this.byteLength=n}return p(e,[{key:"z_",value:function(){return"metadata"in this.G_}}]),e}(),bb=function(){function e(t){l(this,e),this.serializer=t}return p(e,[{key:"os",value:function(e){return cv(this.serializer,e)}},{key:"_s",value:function(e){return e.metadata.exists?vv(this.serializer,e.document,!1):Fh.newNoDocument(this.os(e.metadata.name),this.us(e.metadata.readTime))}},{key:"us",value:function(e){return av(e)}}]),e}(),kb=function(){function e(t,n,r){l(this,e),this.j_=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=wb(t)}return p(e,[{key:"H_",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.G_.namedQuery)this.queries.push(e.G_.namedQuery);else if(e.G_.documentMetadata){this.documents.push({metadata:e.G_.documentMetadata}),e.G_.documentMetadata.exists||++t;var n=Ml.fromString(e.G_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.G_.document&&(this.documents[this.documents.length-1].document=e.G_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"J_",value:function(e){var t,n=new Map,r=new bb(this.serializer),i=N(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.os(a.metadata.name),s=N(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Kd()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=li(si().mark((function e(){var t,n,r,i,a;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,My(this.localStore,new bb(this.serializer),this.documents,this.j_.id);case 2:t=e.sent,n=this.J_(this.documents),r=N(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Vy(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Y_:this.collectionGroups,Z_:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function wb(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var xb=p((function e(t){l(this,e),this.key=t})),_b=p((function e(t){l(this,e),this.key=t})),Sb=function(){function e(t,n){l(this,e),this.query=t,this.X_=n,this.ea=null,this.hasCachedResults=!1,this.current=!1,this.ta=Kd(),this.mutatedKeys=Kd(),this.na=Rd(t),this.ra=new ab(this.na)}return p(e,[{key:"ia",get:function(){return this.X_}},{key:"sa",value:function(e,t){var n=this,r=t?t.oa:new ob,i=t?t.ra:this.ra,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Dd(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n._a(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.na(f,s)>0||c&&n.na(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ra:o,oa:r,zi:u,mutatedKeys:a}}},{key:"_a",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ra;this.ra=e.ra,this.mutatedKeys=e.mutatedKeys;var a=e.oa.M_();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ml()}};return n(e)-n(t)}(e.type,t.type)||r.na(e.doc,t.doc)})),this.aa(n);var o=t?this.ua():[],u=0===this.ta.size&&this.current?1:0,s=u!==this.ea;return this.ea=u,0!==a.length||s?{snapshot:new ub(this.query,e.ra,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),ca:o}:{ca:o}}},{key:"N_",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ra:this.ra,oa:new ob,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{ca:[]}}},{key:"la",value:function(e){return!this.X_.has(e)&&!!this.ra.has(e)&&!this.ra.get(e).hasLocalMutations}},{key:"aa",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.X_=t.X_.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.X_=t.X_.delete(e)})),this.current=e.current)}},{key:"ua",value:function(){var e=this;if(!this.current)return[];var t=this.ta;this.ta=Kd(),this.ra.forEach((function(t){e.la(t.key)&&(e.ta=e.ta.add(t.key))}));var n=[];return t.forEach((function(t){e.ta.has(t)||n.push(new _b(t))})),this.ta.forEach((function(e){t.has(e)||n.push(new xb(e))})),n}},{key:"ha",value:function(e){this.X_=e.ss,this.ta=Kd();var t=this.sa(e.documents);return this.applyChanges(t,!0)}},{key:"Pa",value:function(){return ub.fromInitialDocuments(this.query,this.ra,this.mutatedKeys,0===this.ea,this.hasCachedResults)}}]),e}(),Eb=p((function e(t,n,r){l(this,e),this.query=t,this.targetId=n,this.view=r})),Nb=p((function e(t){l(this,e),this.key=t,this.Ia=!1})),Cb=function(){function e(t,n,r,i,a,o){l(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ta={},this.Ea=new Od((function(e){return Id(e)}),Cd),this.da=new Map,this.Aa=new Set,this.Ra=new Yf(zl.comparator),this.Va=new Map,this.ma=new iy,this.fa={},this.ga=new Map,this.pa=Pm.On(),this.onlineState="Unknown",this.ya=void 0}return p(e,[{key:"isPrimaryClient",get:function(){return!0===this.ya}}]),e}();function Ib(e,t){return Tb.apply(this,arguments)}function Tb(){return Tb=li(si().mark((function e(t,n){var r,i,a,o,u,s;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wk(t),!(o=r.Ea.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Pa(),e.next=15;break;case 6:return e.next=8,Ay(r.localStore,Sd(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,Db(r,n,i,"current"===s,u.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&kg(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Tb.apply(this,arguments)}function Db(e,t,n,r,i){return Ab.apply(this,arguments)}function Ab(){return Ab=li(si().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.wa=function(e,n,r){return function(){var e=li(si().mark((function e(t,n,r,i){var a,o,u;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.sa(r),e.t0=a.zi,!e.t0){e.next=6;break}return e.next=5,Oy(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.sa(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Xb(t,n.targetId,u.ca),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Oy(t.localStore,n,!0);case 3:return o=e.sent,u=new Sb(n,o.ss),s=u.sa(o.documents),c=qp.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),Xb(t,r,l.ca),f=new Eb(n,r,u),e.abrupt("return",(t.Ea.set(n,f),t.da.has(r)?t.da.get(r).push(n):t.da.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),Ab.apply(this,arguments)}function Rb(e,t){return Pb.apply(this,arguments)}function Pb(){return Pb=li(si().mark((function e(t,n){var r,i,a;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=gl(t),i=r.Ea.get(n),!((a=r.da.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.da.set(i.targetId,a.filter((function(e){return!Cd(e,n)}))),void r.Ea.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Ry(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),wg(r.remoteStore,i.targetId),$b(r,i.targetId)})).catch(Zl);case 9:e.next=14;break;case 11:return $b(r,i.targetId),e.next=14,Ry(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Pb.apply(this,arguments)}function Ob(e,t,n){return jb.apply(this,arguments)}function jb(){return jb=li(si().mark((function e(t,n,r){var i,a,o;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xk(t),e.prev=1,e.next=4,function(e,t){var n,r,i=gl(e),a=jl.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Kd());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Ld(),s=Kd();return i.Xi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=N(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=yp(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new kp(c.key,l,Lh(l.value.mapValue),fp.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Ud(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.fa[e.currentUser.toKey()];r||(r=new Yf(Rl)),r=r.insert(t,n),e.fa[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,ek(i,a.changes);case 9:return e.next=11,Fg(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=ib(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),jb.apply(this,arguments)}function Lb(e,t){return Fb.apply(this,arguments)}function Fb(){return Fb=li(si().mark((function e(t,n){var r,i;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gl(t),e.prev=1,e.next=4,Iy(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Va.get(t);n&&(yl(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Ia=!0:e.modifiedDocuments.size>0?yl(n.Ia):e.removedDocuments.size>0&&(yl(n.Ia),n.Ia=!1))})),e.next=8,ek(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Zl(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Fb.apply(this,arguments)}function Mb(e,t,n){var r=gl(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Ea.forEach((function(e,n){var r=n.view.N_(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=gl(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=N(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.N_(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&mb(n)}(r.eventManager,t),i.length&&r.Ta.r_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Ub(e,t,n){return Vb.apply(this,arguments)}function Vb(){return Vb=li(si().mark((function e(t,n,r){var i,a,o,u,s,c;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=gl(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Va.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Yf(zl.comparator)).insert(o,Fh.newNoDocument(o,Ll.min())),s=Kd().add(o),c=new Bp(Ll.min(),new Map,new Yf(Rl),u,s),e.next=9,Lb(i,c);case 9:i.Ra=i.Ra.remove(o),i.Va.delete(n),Zb(i),e.next=16;break;case 14:return e.next=16,Ry(i.localStore,n,!1).then((function(){return $b(i,n,r)})).catch(Zl);case 16:case"end":return e.stop()}}),e)}))),Vb.apply(this,arguments)}function zb(e,t){return Bb.apply(this,arguments)}function Bb(){return Bb=li(si().mark((function e(t,n){var r,i,a;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gl(t),i=n.batch.batchId,e.prev=1,e.next=4,Ny(r.localStore,n);case 4:return a=e.sent,Qb(r,i,null),Wb(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,ek(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Zl(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Bb.apply(this,arguments)}function qb(e,t,n){return Gb.apply(this,arguments)}function Gb(){return Gb=li(si().mark((function e(t,n,r){var i,a;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gl(t),e.prev=1,e.next=4,function(e,t){var n=gl(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return yl(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Qb(i,n,r),Wb(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,ek(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Zl(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Gb.apply(this,arguments)}function Kb(e,t){return Hb.apply(this,arguments)}function Hb(){return Hb=li(si().mark((function e(t,n){var r,i,a,o;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ng((r=gl(t)).remoteStore)||hl("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=gl(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.ga.get(i)||[]).push(n),r.ga.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=ib(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Hb.apply(this,arguments)}function Wb(e,t){(e.ga.get(t)||[]).forEach((function(e){e.resolve()})),e.ga.delete(t)}function Qb(e,t,n){var r=gl(e),i=r.fa[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.fa[r.currentUser.toKey()]=i}}function $b(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=N(e.da.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.Ea.delete(a),n&&e.Ta.Sa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.da.delete(t),e.isPrimaryClient&&e.ma.Ar(t).forEach((function(t){e.ma.containsKey(t)||Yb(e,t)}))}function Yb(e,t){e.Aa.delete(t.path.canonicalString());var n=e.Ra.get(t);null!==n&&(wg(e.remoteStore,n),e.Ra=e.Ra.remove(t),e.Va.delete(n),Zb(e))}function Xb(e,t,n){var r,i=N(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof xb?(e.ma.addReference(a.key,t),Jb(e,a)):a instanceof _b?(hl("SyncEngine","Document no longer in limbo: "+a.key),e.ma.removeReference(a.key,t),e.ma.containsKey(a.key)||Yb(e,a.key)):ml()}}catch(o){i.e(o)}finally{i.f()}}function Jb(e,t){var n=t.key,r=n.path.canonicalString();e.Ra.get(n)||e.Aa.has(r)||(hl("SyncEngine","New document in limbo: "+n),e.Aa.add(r),Zb(e))}function Zb(e){for(;e.Aa.size>0&&e.Ra.size<e.maxConcurrentLimboResolutions;){var t=e.Aa.values().next().value;e.Aa.delete(t);var n=new zl(Ml.fromString(t)),r=e.pa.next();e.Va.set(r,new Nb(n)),e.Ra=e.Ra.insert(n,r),kg(e.remoteStore,new Av(Sd(gd(n.path)),r,"TargetPurposeLimboResolution",pf.ae))}}function ek(e,t,n){return tk.apply(this,arguments)}function tk(){return tk=li(si().mark((function e(t,n,r){var i,a,o,u;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=gl(t),a=[],o=[],u=[],e.t0=i.Ea.isEmpty(),e.t0){e.next=9;break}return i.Ea.forEach((function(e,t){u.push(i.wa(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=ky.qi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Ta.r_(a),e.next=9,function(){var e=li(si().mark((function e(t,n){var r,i,a,o,u,s,c,l;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gl(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return tf.forEach(n,(function(t){return tf.forEach(t.Li,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return tf.forEach(t.ki,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),uf(e.t0)){e.next=10;break}throw e.t0;case 10:hl("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=N(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ji.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ji=r.Ji.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),tk.apply(this,arguments)}function nk(e,t){return rk.apply(this,arguments)}function rk(){return rk=li(si().mark((function e(t,n){var r,i;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=gl(t)).currentUser.isEqual(n)){e.next=11;break}return hl("SyncEngine","User change. New user:",n.toKey()),e.next=5,Sy(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.ga.forEach((function(e){e.forEach((function(e){e.reject(new kl(bl.CANCELLED,t))}))})),e.ga.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,ek(r,i.ts);case 11:case"end":return e.stop()}}),e)}))),rk.apply(this,arguments)}function ik(e,t){var n=gl(e),r=n.Va.get(t);if(r&&r.Ia)return Kd().add(r.key);var i=Kd(),a=n.da.get(t);if(!a)return i;var o,u=N(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.Ea.get(s);i=i.unionWith(c.view.ia)}}catch(l){u.e(l)}finally{u.f()}return i}function ak(e,t){return ok.apply(this,arguments)}function ok(){return ok=li(si().mark((function e(t,n){var r,i,a;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gl(t),e.next=3,Oy(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ha(i),e.abrupt("return",(r.isPrimaryClient&&Xb(r,n.targetId,a.ca),a));case 6:case"end":return e.stop()}}),e)}))),ok.apply(this,arguments)}function uk(e,t){return sk.apply(this,arguments)}function sk(){return sk=li(si().mark((function e(t,n){var r;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gl(t),e.abrupt("return",Ly(r.localStore,n).then((function(e){return ek(r,e)})));case 2:case"end":return e.stop()}}),e)}))),sk.apply(this,arguments)}function ck(e,t,n,r){return lk.apply(this,arguments)}function lk(){return lk=li(si().mark((function e(t,n,r,i){var a,o;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=gl(t),e.next=3,function(e,t){var n=gl(e),r=gl(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Dn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):tf.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Fg(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Qb(a,n,i||null),Wb(a,n),function(e,t){gl(gl(e).mutationQueue).Cn(t)}(a.localStore,n)):ml();case 11:return e.next=13,ek(a,o);case 13:e.next=16;break;case 15:hl("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),lk.apply(this,arguments)}function fk(e,t){return hk.apply(this,arguments)}function hk(){return hk=li(si().mark((function e(t,n){var r,i,a,o,u,s,c,l;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(wk(r=gl(t)),xk(r),!0!==n||!0===r.ya){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,dk(r,i.toArray());case 5:return a=e.sent,r.ya=!0,e.next=9,Zg(r.remoteStore,!0);case 9:o=N(a);try{for(o.s();!(u=o.n()).done;)s=u.value,kg(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ya){e.next=25;break}return c=[],l=Promise.resolve(),r.da.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return $b(r,t),Ry(r.localStore,t,!0)})),wg(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,dk(r,c);case 21:return function(e){var t=gl(e);t.Va.forEach((function(e,n){wg(t.remoteStore,n)})),t.ma.Rr(),t.Va=new Map,t.Ra=new Yf(zl.comparator)}(r),r.ya=!1,e.next=25,Zg(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),hk.apply(this,arguments)}function dk(e,t,n){return pk.apply(this,arguments)}function pk(){return pk=li(si().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=gl(t),a=[],o=[],u=N(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.da.get(c))||0===f.length){e.next=34;break}return e.next=11,Ay(i.localStore,Sd(f[0]));case 11:l=e.sent,h=N(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.Ea.get(p),e.next=20,ak(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,jy(i.localStore,c);case 36:return y=e.sent,e.next=39,Ay(i.localStore,y);case 39:return l=e.sent,e.next=42,Db(i,vk(y),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Ta.r_(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),pk.apply(this,arguments)}function vk(e){return yd(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function mk(e){return function(e){return gl(gl(e).persistence).Ni()}(gl(e).localStore)}function yk(e,t,n,r){return gk.apply(this,arguments)}function gk(){return gk=li(si().mark((function e(t,n,r,i){var a,o,u,s;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=gl(t)).ya){e.next=3;break}return e.abrupt("return",void hl("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.da.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Ly(a.localStore,Ad(o[0]));case 10:return u=e.sent,s=Bp.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,ih.EMPTY_BYTE_STRING),e.next=14,ek(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Ry(a.localStore,n,!0);case 17:return $b(a,n,i),e.abrupt("break",20);case 19:ml();case 20:case"end":return e.stop()}}),e)}))),gk.apply(this,arguments)}function bk(e,t,n){return kk.apply(this,arguments)}function kk(){return kk=li(si().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=wk(t)).ya){e.next=45;break}a=N(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.da.has(u)){e.next=10;break}return hl("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,jy(i.localStore,u);case 12:return s=e.sent,e.next=15,Ay(i.localStore,s);case 15:return c=e.sent,e.next=18,Db(i,vk(s),c.targetId,!1,c.resumeToken);case 18:kg(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=N(r),e.prev=30,h=si().mark((function e(){var t;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.da.has(t),!e.t0){e.next=5;break}return e.next=5,Ry(i.localStore,t,!1).then((function(){wg(i.remoteStore,t),$b(i,t)})).catch(Zl);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),kk.apply(this,arguments)}function wk(e){var t=gl(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Lb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ik.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Ub.bind(null,t),t.Ta.r_=pb.bind(null,t.eventManager),t.Ta.Sa=vb.bind(null,t.eventManager),t}function xk(e){var t=gl(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=zb.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=qb.bind(null,t),t}function _k(e,t,n){var r=gl(e);(function(){var e=li(si().mark((function e(t,n,r){var i,a,o,u,s;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=gl(e),r=av(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Qr.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(wb(i)),a=new kb(i,t.localStore,n.serializer),e.next=15,n.ba();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.H_(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.ba();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,ek(t,s.Z_,void 0);case 31:return e.next=33,function(e,t){var n=gl(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Qr.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Y_));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(pl("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var Sk=function(){function e(){l(this,e),this.synchronizeTabs=!1}return p(e,[{key:"initialize",value:function(){var e=li(si().mark((function e(t){return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=sg(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return _y(this.persistence,new wy,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new ly(hy.zr,this.serializer)}},{key:"createSharedClientState",value:function(e){return new Xy}},{key:"terminate",value:function(){var e=li(si().mark((function e(){return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Ek=function(e){m(n,e);var t=k(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).Da=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return p(n,[{key:"initialize",value:function(){var e=li(si().mark((function e(t){var r=this;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ma(y(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Da.initialize(this,t);case 4:return e.next=6,xk(this.Da.syncEngine);case 6:return e.next=8,Fg(this.Da.remoteStore);case 8:return e.next=10,this.persistence.Vi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return _y(this.persistence,new wy,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Vm(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new df(t,this.persistence);return new hf(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=by(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Em.withCacheSize(this.cacheSizeBytes):Em.DEFAULT;return new my(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,og(),ug(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new Xy}}]),n}(Sk),Nk=function(e){m(n,e);var t=k(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,r,!1)).Da=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return p(n,[{key:"initialize",value:function(){var e=li(si().mark((function e(t){var r,i=this;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ma(y(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Da.syncEngine,e.t0=this.sharedClientState instanceof Yy,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Gs:ck.bind(null,r),zs:yk.bind(null,r),js:bk.bind(null,r),Ni:mk.bind(null,r),Ws:uk.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Vi(function(){var e=li(si().mark((function e(t){return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fk(i.Da.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=og();if(!Yy.v(t))throw new kl(bl.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=by(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Yy(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Ek),Ck=function(){function e(){l(this,e)}return p(e,[{key:"initialize",value:function(){var e=li(si().mark((function e(t,n){var r=this;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Mb(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=nk.bind(null,this.syncEngine),e.next=12,Zg(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new cb}},{key:"createDatastore",value:function(e){var t=sg(e.databaseInfo.databaseId),n=function(e){return new ag(e)}(e.databaseInfo);return function(e,t,n,r){return new dg(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}},{key:"createRemoteStore",value:function(e){var t=this;return function(e,t,n,r,i){return new vg(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(function(e){return Mb(t.syncEngine,e,0)}),Zy.v()?new Zy:new Jy)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Cb(e,t,n,r,i,a);return o&&(u.ya=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=li(si().mark((function e(t){var n;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=gl(t),hl("RemoteStore","RemoteStore shutting down."),n.y_.add(5),e.next=5,gg(n);case 5:n.S_.shutdown(),n.b_.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Ik(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return li(si().mark((function r(){var i;return si().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return li(si().mark((function e(){return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var Tk=function(){function e(t){l(this,e),this.observer=t,this.muted=!1}return p(e,[{key:"next",value:function(e){this.observer.next&&this.va(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.va(this.observer.error,e):dl("Uncaught Error in snapshot listener:",e.toString())}},{key:"Ca",value:function(){this.muted=!0}},{key:"va",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Dk=function(){function e(t,n){var r=this;l(this,e),this.Fa=t,this.serializer=n,this.metadata=new wl,this.buffer=new Uint8Array,this.Ma=new TextDecoder("utf-8"),this.xa().then((function(e){e&&e.z_()?r.metadata.resolve(e.G_.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.G_))))}),(function(e){return r.metadata.reject(e)}))}return p(e,[{key:"close",value:function(){return this.Fa.cancel()}},{key:"getMetadata",value:function(){var e=li(si().mark((function e(){return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ba",value:function(){var e=li(si().mark((function e(){return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.xa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xa",value:function(){var e=li(si().mark((function e(){var t,n,r,i;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Oa();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ma.decode(t),r=Number(n),isNaN(r)&&this.Na("length string (".concat(n,") is not valid number")),e.next=9,this.Ba(r);case 9:return i=e.sent,e.abrupt("return",new gb(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"La",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Oa",value:function(){var e=li(si().mark((function e(){var t,n;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.La()<0)){e.next=7;break}return e.next=3,this.ka();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.La())<0&&this.Na("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ba",value:function(){var e=li(si().mark((function e(t){var n;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.ka();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Na("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ma.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Na",value:function(e){throw this.Fa.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"ka",value:function(){var e=li(si().mark((function e(){var t,n;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Fa.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Ak=function(){function e(t){l(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return p(e,[{key:"lookup",value:function(){var e=li(si().mark((function e(t){var n,r=this;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new kl(bl.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=li(si().mark((function e(t,n){var r,i,a,o,u,s;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gl(t),i=hv(r.serializer)+"/documents",a={documents:n.map((function(e){return sv(r.serializer,e)}))},e.next=5,r.yo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=mv(r.serializer,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());yl(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Np(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=li(si().mark((function e(){var t,n=this;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=zl.fromPath(t);n.mutations.push(new Cp(r,n.precondition(r)))})),e.next=7,function(){var e=li(si().mark((function e(t,n){var r,i,a;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gl(t),i=hv(r.serializer)+"/documents",a={writes:n.map((function(e){return yv(r.serializer,e)}))},e.next=3,r.Vo("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ml();t=Ll.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new kl(bl.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ll.min())?fp.exists(!1):fp.updateTime(t):fp.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ll.min()))throw new kl(bl.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return fp.updateTime(t)}return fp.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Rk=function(){function e(t,n,r,i,a){l(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.qa=r.maxAttempts,this.Ko=new cg(this.asyncQueue,"transaction_retry")}return p(e,[{key:"run",value:function(){this.qa-=1,this.Qa()}},{key:"Qa",value:function(){var e=this;this.Ko.xo(li(si().mark((function t(){var n,r;return si().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Ak(e.datastore),(r=e.Ka(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.$a(t)}))}))})).catch((function(t){e.$a(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Ka",value:function(e){try{var t=this.updateFunction(e);return!vf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"$a",value:function(e){var t=this;this.qa>0&&this.Ua(e)?(this.qa-=1,this.asyncQueue.enqueueAndForget((function(){return t.Qa(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Ua",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Rp(t)}return!1}}]),e}(),Pk=function(){function e(t,n,r,i){var a=this;l(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=sl.UNAUTHENTICATED,this.clientId=Al.V(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=li(si().mark((function e(t){return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hl("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return hl("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return p(e,[{key:"getConfiguration",value:function(){var e=li(si().mark((function e(){return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new kl(bl.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new wl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(li(si().mark((function n(){var r;return si().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=ib(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Ok(e,t){return jk.apply(this,arguments)}function jk(){return jk=li(si().mark((function e(t,n){var r,i;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),hl("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=li(si().mark((function e(t){return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Sy(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),jk.apply(this,arguments)}function Lk(e,t){return Fk.apply(this,arguments)}function Fk(){return Fk=li(si().mark((function e(t,n){var r,i;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Uk(t);case 3:return r=e.sent,hl("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Xg(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Xg(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Fk.apply(this,arguments)}function Mk(e){return"FirebaseError"===e.name?e.code===bl.FAILED_PRECONDITION||e.code===bl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function Uk(e){return Vk.apply(this,arguments)}function Vk(){return Vk=li(si().mark((function e(t){var n;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return hl("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,Ok(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),Mk(n=e.t0)){e.next=13;break}throw n;case 13:return pl("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,Ok(t,new Sk);case 16:e.next=21;break;case 18:return hl("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,Ok(t,new Sk);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])}))),Vk.apply(this,arguments)}function zk(e){return Bk.apply(this,arguments)}function Bk(){return Bk=li(si().mark((function e(t){return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return hl("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,Lk(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return hl("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,Lk(t,new Ck);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)}))),Bk.apply(this,arguments)}function qk(e){return Uk(e).then((function(e){return e.persistence}))}function Gk(e){return Uk(e).then((function(e){return e.localStore}))}function Kk(e){return zk(e).then((function(e){return e.remoteStore}))}function Hk(e){return zk(e).then((function(e){return e.syncEngine}))}function Wk(e){return zk(e).then((function(e){return e.datastore}))}function Qk(e){return $k.apply(this,arguments)}function $k(){return $k=li(si().mark((function e(t){var n,r;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zk(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Ib.bind(null,n.syncEngine),r.onUnlisten=Rb.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),$k.apply(this,arguments)}function Yk(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new wl;return e.asyncQueue.enqueueAndForget(li(si().mark((function i(){return si().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Tk({next:function(a){t.enqueueAndForget((function(){return hb(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new kl(bl.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new kl(bl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new yb(gd(n.path),a,{includeMetadataChanges:!0,W_:!0});return lb(e,o)},i.next=3,Qk(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Xk(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new wl;return e.asyncQueue.enqueueAndForget(li(si().mark((function i(){return si().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Tk({next:function(n){t.enqueueAndForget((function(){return hb(e,o)})),n.fromCache&&"server"===r.source?i.reject(new kl(bl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new yb(n,a,{includeMetadataChanges:!0,W_:!0});return lb(e,o)},i.next=3,Qk(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Jk(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var Zk=new Map;function ew(e,t,n){if(!n)throw new kl(bl.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function tw(e,t,n,r){if(!0===t&&!0===r)throw new kl(bl.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function nw(e){if(!zl.isDocumentKey(e))throw new kl(bl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function rw(e){if(zl.isDocumentKey(e))throw new kl(bl.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function iw(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":ml()}function aw(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new kl(bl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=iw(e);throw new kl(bl.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function ow(e,t){if(t<=0)throw new kl(bl.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var uw=function(){function e(t){var n,r;if(l(this,e),void 0===t.host){if(void 0!==t.ssl)throw new kl(bl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new kl(bl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}tw("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Jk(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new kl(bl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new kl(bl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new kl(bl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return p(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),sw=function(){function e(t,n,r,i){l(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uw({}),this._settingsFrozen=!1}return p(e,[{key:"app",get:function(){if(!this._app)throw new kl(bl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new kl(bl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uw(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new _l;switch(e.type){case"firstParty":return new Cl(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new kl(bl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Zk.get(e);t&&(hl("ComponentProvider","Removing Datastore"),Zk.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function cw(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=aw(e,sw))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&pl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var u,s;if("string"==typeof i.mockUserToken)u=i.mockUserToken,s=sl.MOCK_USER;else{u=Qr(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new kl(bl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new sl(c)}e._authCredentials=new Sl(new xl(u,s))}}var lw=function(){function e(t,n,r){l(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return p(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),fw=function(){function e(t,n,r){l(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return p(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new hw(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),hw=function(e){m(n,e);var t=k(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this,e,r,gd(i)))._path=i,a.type="collection",a}return p(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new fw(this.firestore,null,new zl(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(lw);function dw(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ui(e),ew("collection","path",t),e instanceof sw){var a=Ml.fromString.apply(Ml,[t].concat(r));return rw(a),new hw(e,null,a)}if(!(e instanceof fw||e instanceof hw))throw new kl(bl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Ml.fromString.apply(Ml,[t].concat(r)));return rw(o),new hw(e.firestore,null,o)}function pw(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ui(e),1===arguments.length&&(t=Al.V()),ew("doc","path",t),e instanceof sw){var a=Ml.fromString.apply(Ml,[t].concat(r));return nw(a),new fw(e,null,new zl(a))}if(!(e instanceof fw||e instanceof hw))throw new kl(bl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Ml.fromString.apply(Ml,[t].concat(r)));return nw(o),new fw(e.firestore,e instanceof hw?e.converter:null,new zl(o))}function vw(e,t){return e=ui(e),t=ui(t),(e instanceof fw||e instanceof hw)&&(t instanceof fw||t instanceof hw)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function mw(e,t){return e=ui(e),t=ui(t),e instanceof lw&&t instanceof lw&&e.firestore===t.firestore&&Cd(e._query,t._query)&&e.converter===t.converter}var yw=function(){function e(){var t=this;l(this,e),this.Wa=Promise.resolve(),this.Ga=[],this.za=!1,this.ja=[],this.Ha=null,this.Ja=!1,this.Ya=!1,this.Za=[],this.Ko=new cg(this,"async_queue_retry"),this.Xa=function(){var e=ug();e&&hl("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Ko.No()};var n=ug();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Xa)}return p(e,[{key:"isShuttingDown",get:function(){return this.za}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.eu(),this.tu(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.za){this.za=!0,this.Ya=e||!1;var t=ug();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xa)}}},{key:"enqueue",value:function(e){var t=this;if(this.eu(),this.za)return new Promise((function(){}));var n=new wl;return this.tu((function(){return t.za&&t.Ya?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Ga.push(e),t.nu()}))}},{key:"nu",value:function(){var e=li(si().mark((function e(){var t=this;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Ga.length){e.next=14;break}return e.prev=1,e.next=4,this.Ga[0]();case 4:this.Ga.shift(),this.Ko.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),uf(e.t0)){e.next=12;break}throw e.t0;case 12:hl("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Ga.length>0&&this.Ko.xo((function(){return t.nu()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"tu",value:function(e){var t=this,n=this.Wa.then((function(){return t.Ja=!0,e().catch((function(e){t.Ha=e,t.Ja=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw dl("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Ja=!1,e}))}));return this.Wa=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.eu(),this.Za.indexOf(e)>-1&&(t=0);var i=rb.createAndSchedule(this,e,t,n,(function(e){return r.ru(e)}));return this.ja.push(i),i}},{key:"eu",value:function(){this.Ha&&ml()}},{key:"verifyOperationInProgress",value:function(){}},{key:"iu",value:function(){var e=li(si().mark((function e(){var t;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Wa,e.next=3,t;case 3:if(t!==this.Wa){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"su",value:function(e){var t,n=N(this.ja);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ou",value:function(e){var t=this;return this.iu().then((function(){t.ja.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=N(t.ja);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.iu()}))}},{key:"_u",value:function(e){this.Za.push(e)}},{key:"ru",value:function(e){var t=this.ja.indexOf(e);this.ja.splice(t,1)}}]),e}();function gw(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=N(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var bw=function(){function e(){l(this,e),this._progressObserver={},this._taskCompletionResolver=new wl,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return p(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),kw=function(e){m(n,e);var t=k(n);function n(e,r,i,a){var o;return l(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new yw,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return p(n,[{key:"_terminate",value:function(){return this._firestoreClient||xw(this),this._firestoreClient.terminate()}}]),n}(sw);function ww(e){return e._firestoreClient||xw(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function xw(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new hh(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Jk(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Pk(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function _w(e,t,n){var r=new wl;return e.asyncQueue.enqueue(li(si().mark((function i(){var a;return si().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Ok(e,n);case 3:return i.next=5,Lk(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),Mk(a=i.t0)){i.next=13;break}throw a;case 13:pl("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function Sw(e){return function(e){var t=new wl;return e.asyncQueue.enqueueAndForget(li(si().mark((function n(){return si().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Kb,n.next=3,Hk(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(ww(e=aw(e,kw)))}function Ew(e){return function(e){return e.asyncQueue.enqueue(li(si().mark((function t(){var n,r;return si().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,qk(e);case 2:return n=t.sent,t.next=5,Kk(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=gl(e);return t.y_.delete(0),mg(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(ww(e=aw(e,kw)))}function Nw(e){return function(e){return e.asyncQueue.enqueue(li(si().mark((function t(){var n,r;return si().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,qk(e);case 2:return n=t.sent,t.next=5,Kk(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=li(si().mark((function e(t){var n;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=gl(t)).y_.add(0),e.next=4,gg(n);case 4:n.b_.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(ww(e=aw(e,kw)))}function Cw(e,t){var n=ww(e=aw(e,kw)),r=new bw;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Dk(e,t)}(function(e,t){if(e instanceof Uint8Array)return Ik(e,t);if(e instanceof ArrayBuffer)return Ik(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?Lp().encode(e):e),t)}(n,sg(t));e.asyncQueue.enqueueAndForget(li(si().mark((function t(){return si().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=_k,t.next=3,Hk(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function Iw(e,t){return function(e,t){return e.asyncQueue.enqueue(li(si().mark((function n(){return si().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=gl(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Qr.getNamedQuery(e,t)}))},n.next=3,Gk(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(ww(e=aw(e,kw)),t).then((function(t){return t?new lw(e,null,t.query):null}))}function Tw(e){if(e._initialized||e._terminated)throw new kl(bl.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Dw=function(){function e(t){l(this,e),this._byteString=t}return p(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(ih.fromBase64String(t))}catch(t){throw new kl(bl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(ih.fromUint8Array(t))}}]),e}(),Aw=function(){function e(){l(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new kl(bl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vl(n)}return p(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Rw=p((function e(t){l(this,e),this._methodName=t})),Pw=function(){function e(t,n){if(l(this,e),!isFinite(t)||t<-90||t>90)throw new kl(bl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new kl(bl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return p(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Rl(this._lat,e._lat)||Rl(this._long,e._long)}}]),e}(),Ow=/^__.*__$/,jw=function(){function e(t,n,r){l(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return p(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new kp(e,this.data,this.fieldMask,t,this.fieldTransforms):new bp(e,this.data,t,this.fieldTransforms)}}]),e}(),Lw=function(){function e(t,n,r){l(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return p(e,[{key:"toMutation",value:function(e,t){return new kp(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Fw(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ml()}}var Mw=function(){function e(t,n,r,i,a,o){l(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.au(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return p(e,[{key:"path",get:function(){return this.settings.path}},{key:"uu",get:function(){return this.settings.uu}},{key:"cu",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"lu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.cu({path:n,hu:!1});return r.Pu(e),r}},{key:"Iu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.cu({path:n,hu:!1});return r.au(),r}},{key:"Tu",value:function(e){return this.cu({path:void 0,hu:!0})}},{key:"Eu",value:function(e){return ix(e,this.settings.methodName,this.settings.du||!1,this.path,this.settings.Au)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"au",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Pu(this.path.get(e))}},{key:"Pu",value:function(e){if(0===e.length)throw this.Eu("Document fields must not be empty");if(Fw(this.uu)&&Ow.test(e))throw this.Eu('Document fields cannot begin and end with "__"')}}]),e}(),Uw=function(){function e(t,n,r){l(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||sg(t)}return p(e,[{key:"Ru",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Mw({uu:e,methodName:t,Au:n,path:Vl.emptyPath(),hu:!1,du:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function Vw(e){var t=e._freezeSettings(),n=sg(e._databaseId);return new Uw(e._databaseId,!!t.ignoreUndefinedProperties,n)}function zw(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.Ru(a.merge||a.mergeFields?2:0,t,n,i);ex("Data must be an object, but it was:",o,r);var u,s,c=Jw(r,o);if(a.merge)u=new nh(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=N(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=tx(t,l.value,n);if(!o.contains(d))throw new kl(bl.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));ax(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}u=new nh(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new jw(new jh(c),u,s)}var Bw=function(e){m(n,e);var t=k(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.uu)throw 1===e.uu?e.Eu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Eu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Rw);function qw(e,t,n){return new Mw({uu:3,Au:t.settings.Au,methodName:e._methodName,hu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var Gw=function(e){m(n,e);var t=k(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"_toFieldTransform",value:function(e){return new cp(e.path,new tp)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Rw),Kw=function(e){m(n,e);var t=k(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e)).Vu=r,i}return p(n,[{key:"_toFieldTransform",value:function(e){var t=qw(this,e,!0),n=this.Vu.map((function(e){return Xw(e,t)})),r=new np(n);return new cp(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Rw),Hw=function(e){m(n,e);var t=k(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e)).Vu=r,i}return p(n,[{key:"_toFieldTransform",value:function(e){var t=qw(this,e,!0),n=this.Vu.map((function(e){return Xw(e,t)})),r=new ip(n);return new cp(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Rw),Ww=function(e){m(n,e);var t=k(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e)).mu=r,i}return p(n,[{key:"_toFieldTransform",value:function(e){var t=new op(e.serializer,Yd(e.serializer,this.mu));return new cp(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Rw);function Qw(e,t,n,r){var i=e.Ru(1,t,n);ex("Data must be an object, but it was:",i,r);var a=[],o=jh.empty();Qf(r,(function(e,r){var u=rx(t,e,n);r=ui(r);var s=i.Iu(u);if(r instanceof Bw)a.push(u);else{var c=Xw(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new nh(a);return new Lw(o,u,i.fieldTransforms)}function $w(e,t,n,r,i,a){var o=e.Ru(1,t,n),u=[tx(t,r,n)],s=[i];if(a.length%2!=0)throw new kl(bl.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(tx(t,a[c])),s.push(a[c+1]);for(var l=[],f=jh.empty(),h=u.length-1;h>=0;--h)if(!ax(l,u[h])){var d=u[h],p=s[h];p=ui(p);var v=o.Iu(d);if(p instanceof Bw)l.push(d);else{var m=Xw(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new nh(l);return new Lw(f,y,o.fieldTransforms)}function Yw(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Xw(n,e.Ru(r?4:3,t))}function Xw(e,t){if(Zw(e=ui(e)))return ex("Unsupported field value:",t,e),Jw(e,t);if(e instanceof Rw)return function(e,t){if(!Fw(t.uu))throw t.Eu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Eu("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.hu&&4!==t.uu)throw t.Eu("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=N(e);try{for(a.s();!(n=a.n()).done;){var o=Xw(n.value,t.Tu(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=ui(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Yd(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=jl.fromDate(e);return{timestampValue:nv(t.serializer,n)}}if(e instanceof jl){var r=new jl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:nv(t.serializer,r)}}if(e instanceof Pw)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Dw)return{bytesValue:rv(t.serializer,e._byteString)};if(e instanceof fw){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.Eu("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:ov(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Eu("Unsupported field value: ".concat(iw(e)))}(e,t)}function Jw(e,t){var n={};return $f(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Qf(e,(function(e,r){var i=Xw(r,t.lu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Zw(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof jl||e instanceof Pw||e instanceof Dw||e instanceof fw||e instanceof Rw)}function ex(e,t,n){if(!Zw(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=iw(n);throw"an object"===r?t.Eu(e+" a custom object"):t.Eu(e+" "+r)}}function tx(e,t,n){if((t=ui(t))instanceof Aw)return t._internalPath;if("string"==typeof t)return rx(e,t);throw ix("Field path arguments must be of type string or ",e,!1,void 0,n)}var nx=new RegExp("[~\\*/\\[\\]]");function rx(e,t,n){if(t.search(nx)>=0)throw ix("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return w(Aw,c(t.split(".")))._internalPath}catch(tt){throw ix("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function ix(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new kl(bl.INVALID_ARGUMENT,u+e+s)}function ax(e,t){return e.some((function(e){return e.isEqual(t)}))}var ox=function(){function e(t,n,r,i,a){l(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return p(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new fw(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new ux(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(sx("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),ux=function(e){m(n,e);var t=k(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"data",value:function(){return Ma(y(n.prototype),"data",this).call(this)}}]),n}(ox);function sx(e,t){return"string"==typeof t?rx(e,t):t instanceof Aw?t._internalPath:t._delegate._internalPath}function cx(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new kl(bl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var lx=p((function e(){l(this,e)})),fx=function(e){m(n,e);var t=k(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n)}(lx);function hx(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof lx&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof px})).length,n=e.filter((function(e){return e instanceof dx})).length;if(t>1||t>0&&n>0)throw new kl(bl.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=N(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var dx=function(e){m(n,e);var t=k(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return p(n,[{key:"_apply",value:function(e){var t=this._parse(e);return Nx(e._query,t),new lw(e.firestore,e.converter,Ed(e._query,t))}},{key:"_parse",value:function(e){var t=Vw(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new kl(bl.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Ex(o,a);var s,c=[],l=N(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(Sx(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=Sx(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Ex(o,a),u=Yw(n,t,o,"in"===a||"not-in"===a);return Gh.create(i,a,u)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(fx);var px=function(e){m(n,e);var t=k(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return p(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Kh.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=N(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;Nx(r,a),r=Ed(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new lw(e.firestore,e.converter,Ed(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(lx);var vx=function(e){m(n,e);var t=k(n);function n(e,r){var i;return l(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return p(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new kl(bl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new kl(bl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new zh(t,n);return function(e,t){if(null===kd(e)){var n=wd(e);null!==n&&Cx(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new lw(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new md(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(fx);var mx=function(e){m(n,e);var t=k(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return p(n,[{key:"_apply",value:function(e){return new lw(e.firestore,e.converter,Nd(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(fx);var yx=function(e){m(n,e);var t=k(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return p(n,[{key:"_apply",value:function(e){var t=_x(e,this.type,this._docOrFields,this._inclusive);return new lw(e.firestore,e.converter,function(e,t){return new md(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(fx);function gx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return yx._create("startAt",t,!0)}function bx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return yx._create("startAfter",t,!1)}var kx=function(e){m(n,e);var t=k(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return p(n,[{key:"_apply",value:function(e){var t=_x(e,this.type,this._docOrFields,this._inclusive);return new lw(e.firestore,e.converter,function(e,t){return new md(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(fx);function wx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return kx._create("endBefore",t,!1)}function xx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return kx._create("endAt",t,!0)}function _x(e,t,n,r){if(n[0]=ui(n[0]),n[0]instanceof ox)return function(e,t,n,r,i){if(!r)throw new kl(bl.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=N(_d(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(_h(t,r.key));else{var c=r.data.field(s.field);if(ch(c))throw new kl(bl.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new kl(bl.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Mh(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Vw(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new kl(bl.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new kl(bl.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!xd(e)&&-1!==c.indexOf("/"))throw new kl(bl.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Ml.fromString(c));if(!zl.isDocumentKey(l))throw new kl(bl.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new zl(l);u.push(_h(t,f))}else{var h=Yw(n,r,c);u.push(h)}}return new Mh(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function Sx(e,t,n){if("string"==typeof(n=ui(n))){if(""===n)throw new kl(bl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xd(t)&&-1!==n.indexOf("/"))throw new kl(bl.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Ml.fromString(n));if(!zl.isDocumentKey(r))throw new kl(bl.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return _h(e,new zl(r))}if(n instanceof fw)return _h(e,n._key);throw new kl(bl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(iw(n),"."))}function Ex(e,t){if(!Array.isArray(e)||0===e.length)throw new kl(bl.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Nx(e,t){if(t.isInequality()){var n=wd(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new kl(bl.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=kd(e);null!==i&&Cx(e,r,i)}var a=function(e,t){var n,r=N(e);try{for(r.s();!(n=r.n()).done;){var i,a=N(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new kl(bl.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new kl(bl.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function Cx(e,t,n){if(!n.isEqual(t))throw new kl(bl.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Ix=function(){function e(){l(this,e)}return p(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(mh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return uh(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(sh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ml()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return Qf(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new Pw(uh(e.latitude),uh(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=lh(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(fh(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=oh(e);return new jl(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Ml.fromString(e);yl(Dv(n));var r=new dh(n.get(1),n.get(3)),i=new zl(n.popFirst(5));return r.isEqual(t)||dl("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Tx(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Dx=function(e){m(n,e);var t=k(n);function n(e){var r;return l(this,n),(r=t.call(this)).firestore=e,r}return p(n,[{key:"convertBytes",value:function(e){return new Dw(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new fw(this.firestore,null,t)}}]),n}(Ix);var Ax=function(){function e(t,n){l(this,e),this.hasPendingWrites=t,this.fromCache=n}return p(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Rx=function(e){m(n,e);var t=k(n);function n(e,r,i,a,o,u){var s;return l(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return p(n,[{key:"exists",value:function(){return Ma(y(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Px(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(sx("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(ox),Px=function(e){m(n,e);var t=k(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ma(y(n.prototype),"data",this).call(this,e)}}]),n}(Rx),Ox=function(){function e(t,n,r,i){l(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ax(i.hasPendingWrites,i.fromCache),this.query=r}return p(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Px(n._firestore,n._userDataWriter,r.key,r,new Ax(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new kl(bl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new Px(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Ax(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Px(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Ax(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:jx(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function jx(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ml()}}function Lx(e,t){return e instanceof Rx&&t instanceof Rx?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Ox&&t instanceof Ox&&e._firestore===t._firestore&&mw(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var Fx=function(e){m(n,e);var t=k(n);function n(e){var r;return l(this,n),(r=t.call(this)).firestore=e,r}return p(n,[{key:"convertBytes",value:function(e){return new Dw(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new fw(this.firestore,null,t)}}]),n}(Ix);function Mx(e){e=aw(e,fw);var t=aw(e.firestore,kw),n=ww(t),r=new Fx(t);return function(e,t){var n=new wl;return e.asyncQueue.enqueueAndForget(li(si().mark((function r(){return si().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=li(si().mark((function e(t,n,r){var i,a;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=gl(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new kl(bl.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=ib(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Gk(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new Rx(t,r,e._key,n,new Ax(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function Ux(e){e=aw(e,lw);var t=aw(e.firestore,kw),n=ww(t),r=new Fx(t);return cx(e._query),Xk(n,e._query).then((function(n){return new Ox(t,r,e,n)}))}function Vx(e){e=aw(e,lw);var t=aw(e.firestore,kw),n=ww(t),r=new Fx(t);return function(e,t){var n=new wl;return e.asyncQueue.enqueueAndForget(li(si().mark((function r(){return si().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=li(si().mark((function e(t,n,r){var i,a,o,u,s;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Oy(t,n,!0);case 3:i=e.sent,a=new Sb(n,i.ss),o=a.sa(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=ib(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Gk(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new Ox(t,r,e,n)}))}function zx(e){e=aw(e,lw);var t=aw(e.firestore,kw),n=ww(t),r=new Fx(t);return Xk(n,e._query,{source:"server"}).then((function(n){return new Ox(t,r,e,n)}))}function Bx(e,t,n){e=aw(e,fw);var r=aw(e.firestore,kw),i=Tx(e.converter,t,n);return Hx(r,[zw(Vw(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,fp.none())])}function qx(e,t,n){e=aw(e,fw);for(var r=aw(e.firestore,kw),i=Vw(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return Hx(r,[("string"==typeof(t=ui(t))||t instanceof Aw?$w(i,"updateDoc",e._key,t,n,o):Qw(i,"updateDoc",e._key,t)).toMutation(e._key,fp.exists(!0))])}function Gx(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=ui(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||gw(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(gw(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof fw)l=aw(e.firestore,kw),f=gd(e._key.path),c={next:function(t){n[s]&&n[s](Wx(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=aw(e,lw);l=aw(p.firestore,kw),f=p._query;var v=new Fx(l);c={next:function(e){n[s]&&n[s](new Ox(l,v,p,e))},error:n[s+1],complete:n[s+2]},cx(e._query)}return function(e,t,n,r){var i=new Tk(r),a=new yb(t,i,n);return e.asyncQueue.enqueueAndForget(li(si().mark((function t(){return si().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=lb,t.next=3,Qk(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Ca(),e.asyncQueue.enqueueAndForget(li(si().mark((function t(){return si().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=hb,t.next=3,Qk(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(ww(l),f,h,c)}function Kx(e,t){return function(e,t){var n=new Tk(t);return e.asyncQueue.enqueueAndForget(li(si().mark((function t(){return si().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){gl(e).O_.add(t),t.next()},t.next=3,Qk(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Ca(),e.asyncQueue.enqueueAndForget(li(si().mark((function t(){return si().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){gl(e).O_.delete(t)},t.next=3,Qk(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(ww(e=aw(e,kw)),gw(t)?t:{next:t})}function Hx(e,t){return function(e,t){var n=new wl;return e.asyncQueue.enqueueAndForget(li(si().mark((function r(){return si().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Ob,r.next=3,Hk(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(ww(e),t)}function Wx(e,t,n){var r=n.docs.get(t._key),i=new Fx(e);return new Rx(e,i,t._key,r,new Ax(n.hasPendingWrites,n.fromCache),t.converter)}var Qx={maxAttempts:5},$x=function(){function e(t,n){l(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Vw(t)}return p(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=Yx(e,this._firestore),i=Tx(r.converter,t,n),a=zw(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,fp.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=Yx(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ui(t))||t instanceof Aw?$w(this._dataReader,"WriteBatch.update",i._key,t,n,o):Qw(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,fp.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=Yx(e,this._firestore);return this._mutations=this._mutations.concat(new Np(t._key,fp.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new kl(bl.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function Yx(e,t){if((e=ui(e)).firestore!==t)throw new kl(bl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Xx=function(e){m(n,e);var t=k(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,r))._firestore=e,i}return p(n,[{key:"get",value:function(e){var t=this,r=Yx(e,this._firestore),i=new Fx(this._firestore);return Ma(y(n.prototype),"get",this).call(this,e).then((function(e){return new Rx(t._firestore,i,r._key,e._document,new Ax(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){l(this,e),this._firestore=t,this._transaction=n,this._dataReader=Vw(t)}return p(e,[{key:"get",value:function(e){var t=this,n=Yx(e,this._firestore),r=new Dx(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return ml();var i=e[0];if(i.isFoundDocument())return new ox(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new ox(t._firestore,r,n._key,null,n.converter);throw ml()}))}},{key:"set",value:function(e,t,n){var r=Yx(e,this._firestore),i=Tx(r.converter,t,n),a=zw(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=Yx(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ui(t))||t instanceof Aw?$w(this._dataReader,"Transaction.update",i._key,t,n,o):Qw(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=Yx(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Jx(e,t,n){e=aw(e,kw);var r=Object.assign(Object.assign({},Qx),n);return function(e){if(e.maxAttempts<1)throw new kl(bl.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new wl;return e.asyncQueue.enqueueAndForget(li(si().mark((function i(){var a;return si().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Wk(e);case 2:a=i.sent,new Rk(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(ww(e),(function(n){return t(new Xx(e,n))}),r)}function Zx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Kw("arrayUnion",t)}function e_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Hw("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){cl=e}(aa),Ji(new fi("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new kw(new El(e.getProvider("auth-internal")),new Tl(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new kl(bl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dh(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),fa(ul,"4.1.0",e),fa(ul,"4.1.0","esm2017")}();function t_(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new kl("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function n_(){if("undefined"===typeof Uint8Array)throw new kl("unimplemented","Uint8Arrays are not available in this environment.")}function r_(){if("undefined"==typeof atob)throw new kl("unimplemented","Blobs are unavailable in Firestore in this environment.")}var i_=function(){function e(t){l(this,e),this._delegate=t}return p(e,[{key:"toBase64",value:function(){return r_(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return n_(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return r_(),new e(Dw.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return n_(),new e(Dw.fromUint8Array(t))}}]),e}();function a_(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=N(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var o_=function(){function e(){l(this,e)}return p(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){Tw(e=aw(e,kw));var n=ww(e);if(n._uninitializedComponentsProvider)throw new kl(bl.FAILED_PRECONDITION,"SDK cache is already specified.");pl("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new Ck;return _w(n,i,new Ek(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){Tw(e=aw(e,kw));var t=ww(e);if(t._uninitializedComponentsProvider)throw new kl(bl.FAILED_PRECONDITION,"SDK cache is already specified.");pl("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new Ck;return _w(t,r,new Nk(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new kl(bl.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new wl;return e._queue.enqueueAndForgetEvenWhileRestricted(li(si().mark((function n(){return si().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=li(si().mark((function e(t){var n;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(rf.v()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,rf.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(by(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),u_=function(){function e(t,n,r){var i=this;l(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof dh||(this._appCompat=t)}return p(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||pl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};cw(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return Ew(this._delegate)}},{key:"disableNetwork",value:function(){return Nw(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&tw("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return Sw(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return Kx(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new kl("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new w_(this,dw(this._delegate,e))}catch(t){throw d_(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new h_(this,pw(this._delegate,e))}catch(t){throw d_(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new g_(this,function(e,t){if(e=aw(e,sw),ew("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new kl(bl.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new lw(e,null,function(e){return new md(Ml.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw d_(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return Jx(this._delegate,(function(n){return e(new c_(t,n))}))}},{key:"batch",value:function(){var e=this;return ww(this._delegate),new l_(new $x(this._delegate,(function(t){return Hx(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return Cw(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return Iw(this._delegate,e).then((function(e){return e?new g_(t,e):null}))}}]),e}(),s_=function(e){m(n,e);var t=k(n);function n(e){var r;return l(this,n),(r=t.call(this)).firestore=e,r}return p(n,[{key:"convertBytes",value:function(e){return new i_(new Dw(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return h_.forKey(t,this.firestore,null)}}]),n}(Ix);var c_=function(){function e(t,n){l(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new s_(t)}return p(e,[{key:"get",value:function(e){var t=this,n=x_(e);return this._delegate.get(n).then((function(e){return new m_(t._firestore,new Rx(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=x_(e);return n?(t_("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=x_(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=x_(e);return this._delegate.delete(t),this}}]),e}(),l_=function(){function e(t){l(this,e),this._delegate=t}return p(e,[{key:"set",value:function(e,t,n){var r=x_(e);return n?(t_("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=x_(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=x_(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),f_=function(){function e(t,n,r){l(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return p(e,[{key:"fromFirestore",value:function(e,t){var n=new Px(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new y_(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new s_(t),n),i.set(n,a)),a}}]),e}();f_.INSTANCES=new WeakMap;var h_=function(){function e(t,n){l(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new s_(t)}return p(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new w_(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new w_(this.firestore,dw(this._delegate,e))}catch(t){throw d_(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=ui(e))instanceof fw&&vw(this._delegate,e)}},{key:"set",value:function(e,t){t=t_("DocumentReference.set",t);try{return t?Bx(this._delegate,e,t):Bx(this._delegate,e)}catch(n){throw d_(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?qx(this._delegate,e):qx.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw d_(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return Hx(aw(e.firestore,kw),[new Np(e._key,fp.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=p_(n),a=v_(n,(function(t){return new m_(e.firestore,new Rx(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Gx(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Mx(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=aw(e,fw);var t=aw(e.firestore,kw);return Yk(ww(t),e._key,{source:"server"}).then((function(n){return Wx(t,e,n)}))}(this._delegate):function(e){e=aw(e,fw);var t=aw(e.firestore,kw);return Yk(ww(t),e._key).then((function(n){return Wx(t,e,n)}))}(this._delegate),t.then((function(e){return new m_(n.firestore,new Rx(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(f_.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new kl("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new fw(n._delegate,r,new zl(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new fw(n._delegate,r,t))}}]),e}();function d_(e,t,n){return e.message=e.message.replace(t,n),e}function p_(e){var t,n=N(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!a_(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function v_(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=a_(e[0])?e[0]:a_(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var m_=function(){function e(t,n){l(this,e),this._firestore=t,this._delegate=n}return p(e,[{key:"ref",get:function(){return new h_(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return Lx(this._delegate,e._delegate)}}]),e}(),y_=function(e){m(n,e);var t=k(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||ml()}(void 0!==t),t}}]),n}(m_),g_=function(){function e(t,n){l(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new s_(t)}return p(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,hx(this._delegate,function(e,t,n){var r=t,i=sx("where",e);return dx._create(i,r,n)}(t,n,r)))}catch(i){throw d_(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,hx(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=sx("orderBy",e);return vx._create(n,t)}(t,n)))}catch(r){throw d_(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,hx(this._delegate,function(e){return ow("limit",e),mx._create("limit",e,"F")}(t)))}catch(n){throw d_(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,hx(this._delegate,function(e){return ow("limitToLast",e),mx._create("limitToLast",e,"L")}(t)))}catch(n){throw d_(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,hx(this._delegate,gx.apply(void 0,arguments)))}catch(t){throw d_(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,hx(this._delegate,bx.apply(void 0,arguments)))}catch(t){throw d_(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,hx(this._delegate,wx.apply(void 0,arguments)))}catch(t){throw d_(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,hx(this._delegate,xx.apply(void 0,arguments)))}catch(t){throw d_(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return mw(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?Vx(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?zx(this._delegate):Ux(this._delegate)).then((function(e){return new k_(t.firestore,new Ox(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=p_(n),a=v_(n,(function(t){return new k_(e.firestore,new Ox(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Gx(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(f_.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),b_=function(){function e(t,n){l(this,e),this._firestore=t,this._delegate=n}return p(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new y_(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),k_=function(){function e(t,n){l(this,e),this._firestore=t,this._delegate=n}return p(e,[{key:"query",get:function(){return new g_(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new y_(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new b_(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new y_(n._firestore,r))}))}},{key:"isEqual",value:function(e){return Lx(this._delegate,e._delegate)}}]),e}(),w_=function(e){m(n,e);var t=k(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return p(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new h_(this.firestore,e):null}},{key:"doc",value:function(e){try{return new h_(this.firestore,void 0===e?pw(this._delegate):pw(this._delegate,e))}catch(t){throw d_(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=aw(e.firestore,kw),r=pw(e),i=Tx(e.converter,t);return Hx(n,[zw(Vw(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,fp.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new h_(t.firestore,e)}))}},{key:"isEqual",value:function(e){return vw(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(f_.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(g_);function x_(e){return aw(e,fw)}var __,S_=function(){function e(){l(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=w(Aw,n)}return p(e,[{key:"isEqual",value:function(e){return(e=ui(e))instanceof Aw&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Vl.keyField().canonicalString())}}]),e}(),E_=function(){function e(t){l(this,e),this._delegate=t}return p(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Gw("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Bw("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=Zx.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=e_.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new Ww("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),N_={Firestore:u_,GeoPoint:Pw,Timestamp:jl,Blob:i_,Transaction:c_,WriteBatch:l_,DocumentReference:h_,DocumentSnapshot:m_,Query:g_,QueryDocumentSnapshot:y_,QuerySnapshot:k_,CollectionReference:w_,FieldPath:S_,FieldValue:E_,setLogLevel:function(e){!function(e){ll.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new fi("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},N_)))})(__=Fa,(function(e,t){return new u_(e,t,new o_)})),__.registerVersion("@firebase/firestore-compat","0.3.14");var C_,I_="firebasestorage.googleapis.com",T_="storageBucket",D_=function(e){m(n,e);var t=k(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return l(this,n),(i=t.call(this,A_(e),"Firebase Storage: ".concat(r," (").concat(A_(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(b(i),n.prototype),i}return p(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return A_(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(Jr);function A_(e){return"storage/"+e}function R_(){return new D_(C_.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function P_(){return new D_(C_.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function O_(){return new D_(C_.CANCELED,"User canceled the upload/download.")}function j_(){return new D_(C_.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function L_(e){return new D_(C_.INVALID_ARGUMENT,e)}function F_(){return new D_(C_.APP_DELETED,"The Firebase app was deleted.")}function M_(e){return new D_(C_.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function U_(e,t){return new D_(C_.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function V_(e){throw new D_(C_.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(C_||(C_={}));var z_,B_=function(){function e(t,n){l(this,e),this.bucket=t,this.path_=n}return p(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r,i;try{r=e.makeFromUrl(t,n)}catch(a){return new e(t,"")}if(""===r.path)return r;throw i=t,new D_(C_.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===I_?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new D_(C_.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return r}}]),e}(),q_=function(){function e(t){l(this,e),this.promise_=Promise.reject(t)}return p(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function G_(e){return"string"===typeof e||e instanceof String}function K_(e){return H_()&&e instanceof Blob}function H_(){return"undefined"!==typeof Blob&&!Yr()}function W_(e,t,n,r){if(r<t)throw L_("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw L_("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Q_(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function $_(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function Y_(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(z_||(z_={}));var X_=function(){function e(t,n,r,i,a,o,u,s,c,f,h){var d=this,p=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];l(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=f,this.connectionFactory_=h,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){d.resolve_=e,d.reject_=t,d.start_()}))}return p(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=R_();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?F_():O_());else i(P_())}};this.canceled_?t(0,new J_(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new J_(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===z_.NO_ERROR,a=r.getStatus();if(!n||Y_(a,e.additionalRetryCodes_)&&e.retry){var o=r.getErrorCode()===z_.ABORT;t(!1,new J_(!1,null,o))}else{var u=-1!==e.successCodes_.indexOf(a);t(!0,new J_(u,r))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),J_=p((function e(t,n,r){l(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function Z_(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function eS(){for(var e=Z_(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(H_())return new Blob(n);throw new D_(C_.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function tS(e){if("undefined"===typeof atob)throw t="base-64",new D_(C_.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}var nS={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},rS=p((function e(t,n){l(this,e),this.data=t,this.contentType=n||null}));function iS(e,t){switch(e){case nS.RAW:return new rS(aS(t));case nS.BASE64:case nS.BASE64URL:return new rS(oS(e,t));case nS.DATA_URL:return new rS(function(e){var t=new uS(e);return t.base64?oS(nS.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw U_(nS.DATA_URL,"Malformed data URL.")}return aS(t)}(t.rest)}(t),new uS(t).contentType)}throw R_()}function aS(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function oS(e,t){switch(e){case nS.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw U_(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case nS.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw U_(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=tS(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw U_(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var uS=p((function e(t){l(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw U_(nS.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){var n=e.length>=t.length;if(!n)return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}));var sS=function(){function e(t,n){l(this,e);var r=0,i="";K_(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return p(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(K_(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(H_()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(eS.apply(null,i))}var a=n.map((function(e){return G_(e)?iS(nS.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function cS(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function lS(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function fS(e,t){return t}var hS=p((function e(t,n,r,i){l(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||fS})),dS=null;function pS(){if(dS)return dS;var e=[];e.push(new hS("bucket")),e.push(new hS("generation")),e.push(new hS("metageneration")),e.push(new hS("name","fullPath",!0));var t=new hS("name");t.xform=function(e,t){return function(e){return!G_(e)||e.length<2?e:lS(e)}(t)},e.push(t);var n=new hS("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new hS("timeCreated")),e.push(new hS("updated")),e.push(new hS("md5Hash",null,!0)),e.push(new hS("cacheControl",null,!0)),e.push(new hS("contentDisposition",null,!0)),e.push(new hS("contentEncoding",null,!0)),e.push(new hS("contentLanguage",null,!0)),e.push(new hS("contentType",null,!0)),e.push(new hS("metadata","customMetadata",!0)),dS=e}function vS(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new B_(n,r);return t._makeStorageReference(i)}})}(r,e),r}function mS(e,t,n){var r=cS(t);return null===r?null:vS(e,r,n)}function yS(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var gS="prefixes",bS="items";function kS(e,t,n){var r=cS(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[gS]){var i,a=N(n[gS]);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new B_(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n[bS]){var s,c=N(n[bS]);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new B_(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var wS=p((function e(t,n,r,i){l(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function xS(e){if(!e)throw R_()}function _S(e,t){return function(n,r){var i=mS(e,r,t);return xS(null!==i),i}}function SS(e,t){return function(n,r){var i=mS(e,r,t);return xS(null!==i),function(e,t,n,r){var i=cS(t);if(null===i)return null;if(!G_(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return Q_("/b/"+o(i)+"/o/"+o(a),n,r)+$_({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function ES(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new D_(C_.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new D_(C_.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new D_(C_.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new D_(C_.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function NS(e){var t=ES(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new D_(C_.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function CS(e,t,n){var r=Q_(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new wS(r,"GET",_S(e,n),i);return a.errorHandler=NS(t),a}function IS(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=Q_(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new wS(o,"GET",function(e,t){return function(n,r){var i=kS(e,t,r);return xS(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=ES(t),s}function TS(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function DS(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=TS(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+yS(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=sS.getBlob(c,r,l);if(null===f)throw j_();var h={name:s.fullPath},d=Q_(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new wS(d,"POST",_S(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=ES(t),v}var AS=p((function e(t,n,r,i){l(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function RS(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){xS(!1)}return xS(!!n&&-1!==(t||["active"]).indexOf(n)),n}var PS=262144;function OS(e,t,n,r,i,a,o,u){var s=new AS(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new D_(C_.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":0===l?"finalize":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},p=r.slice(f,h);if(null===p)throw j_();var v=t.maxUploadRetryTime,m=new wS(n,"POST",(function(e,n){var i,o=RS(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?_S(t,a)(e,n):null,new AS(u,c,"final"===o,i)}),v);return m.headers=d,m.body=p.uploadData(),m.progressCallback=u||null,m.errorHandler=ES(e),m}var jS={STATE_CHANGED:"state_changed"},LS={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function FS(e){switch(e){case"running":case"pausing":case"canceling":return LS.RUNNING;case"paused":return LS.PAUSED;case"success":return LS.SUCCESS;case"canceled":return LS.CANCELED;default:return LS.ERROR}}var MS=p((function e(t,n,r){if(l(this,e),function(e){return"function"===typeof e}(t)||null!=n||null!=r)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var i=t;this.next=i.next,this.error=i.error,this.complete=i.complete}}));function US(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var VS=null,zS=function(){function e(){var t=this;l(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=z_.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=z_.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=z_.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return p(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw V_("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw V_("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw V_("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw V_("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw V_("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),BS=function(e){m(n,e);var t=k(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(zS);function qS(){return VS?VS():new BS}var GS=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;l(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=pS(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){if(r._request=void 0,r._chunkMultiplier=1,e._codeEquals(C_.CANCELED))r._needToFetchStatus=!0,r.completeTransitions_();else{var t=r.isExponentialBackoffExpired();if(Y_(e.status,[])){if(!t)return r.sleepTime=Math.max(2*r.sleepTime,1e3),r._needToFetchStatus=!0,void r.completeTransitions_();e=P_()}r._error=e,r._transition("error")}},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals(C_.CANCELED)?r.completeTransitions_():(r._error=e,r._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return p(e,[{key:"isExponentialBackoffExpired",value:function(){return this.sleepTime>this.maxSleepTime}},{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){var e=this;"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((function(){e.pendingTimeout=void 0,e._continueUpload()}),this.sleepTime):this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=E(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=TS(t,r,i),u={name:o.fullPath},s=Q_(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=yS(o,n),f=e.maxUploadRetryTime,h=new wS(s,"POST",(function(e){var t;RS(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){xS(!1)}return xS(G_(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=ES(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,qS,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new wS(n,"POST",(function(e){var t=RS(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){xS(!1)}n||xS(!1);var i=Number(n);return xS(!isNaN(i)),new AS(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=ES(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,qS,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=PS*this._chunkMultiplier,n=new AS(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=OS(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,qS,i,a,!1);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){2*(PS*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=CS(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,qS,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=DS(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,qS,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=O_(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=FS(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new MS(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(FS(this._state)){case LS.SUCCESS:US(this._resolve.bind(null,this.snapshot))();break;case LS.CANCELED:case LS.ERROR:US(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(FS(this._state)){case LS.RUNNING:case LS.PAUSED:e.next&&US(e.next.bind(e,this.snapshot))();break;case LS.SUCCESS:e.complete&&US(e.complete.bind(e))();break;default:e.error&&US(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),KS=function(){function e(t,n){l(this,e),this._service=t,this._location=n instanceof B_?n:B_.makeFromUrl(n,t.host)}return p(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new B_(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return lS(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new B_(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw M_(e)}}]),e}();function HS(e,t,n){return WS.apply(this,arguments)}function WS(){return(WS=li(si().mark((function e(t,n,r){var i,a,o,u;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,QS(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,c(u.prefixes)),(a=n.items).push.apply(a,c(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,HS(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function QS(e,t){null!=t&&"number"===typeof t.maxResults&&W_("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=IS(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,qS)}function $S(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=Q_(t.fullServerUrl(),e.host,e._protocol),a=yS(n,r),o=e.maxOperationRetryTime,u=new wS(i,"PATCH",_S(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=NS(t),u}(e.storage,e._location,t,pS());return e.storage.makeRequestWithTokens(n,qS)}function YS(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=Q_(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new wS(r,"GET",SS(e,n),i);return a.errorHandler=NS(t),a}(e.storage,e._location,pS());return e.storage.makeRequestWithTokens(t,qS).then((function(e){if(null===e)throw new D_(C_.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function XS(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=Q_(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new wS(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=NS(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,qS)}function JS(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new B_(e._location.bucket,n);return new KS(e.storage,r)}function ZS(e,t){if(e instanceof nE){var n=e;if(null==n._bucket)throw new D_(C_.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+T_+"' property when initializing the app?");var r=new KS(n,n._bucket);return null!=t?ZS(r,t):r}return void 0!==t?JS(e,t):e}function eE(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof nE)return new KS(e,t);throw L_("To use ref(service, url), the first argument must be a Storage instance.")}return ZS(e,t)}function tE(e,t){var n=null===t||void 0===t?void 0:t[T_];return null==n?null:B_.makeFromBucketSpec(n,e)}var nE=function(){function e(t,n,r,i,a){l(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=I_,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?B_.makeFromBucketSpec(i,this._host):tE(this._host,this.app.options)}return p(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=B_.makeFromBucketSpec(this._url,e):this._bucket=tE(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){W_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){W_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=li(si().mark((function e(){var t,n;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=li(si().mark((function e(){var t,n;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new KS(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new q_(F_());var o=function(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=$_(e.urlParams),s=e.url+u,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new X_(s,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=li(si().mark((function e(t,n){var r,i,a,o;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=E(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),rE="@firebase/storage",iE="0.11.2",aE="storage";function oE(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new GS(e,new sS(t),n)}(e=ui(e),t,n)}function uE(e){return function(e){e._throwIfRoot("getMetadata");var t=CS(e.storage,e._location,pS());return e.storage.makeRequestWithTokens(t,qS)}(e=ui(e))}function sE(e){return function(e){var t={prefixes:[],items:[]};return HS(e,t).then((function(){return t}))}(e=ui(e))}function cE(e,t){return eE(e=ui(e),t)}function lE(e,t,n){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:Qr(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function fE(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new nE(r,i,a,n,aa)}Ji(new fi(aE,fE,"PUBLIC").setMultipleInstances(!0)),fa(rE,iE,""),fa(rE,iE,"esm2017");var hE=function(){function e(t,n,r){l(this,e),this._delegate=t,this.task=n,this.ref=r}return p(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),dE=function(){function e(t,n){l(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return p(e,[{key:"snapshot",get:function(){return new hE(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new hE(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new hE(e,i,i._ref))}:{next:t.next?function(e){return t.next(new hE(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),pE=function(){function e(t,n){l(this,e),this._delegate=t,this._service=n}return p(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new vE(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new vE(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),vE=function(){function e(t,n){l(this,e),this._delegate=t,this.storage=n}return p(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return JS(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new dE(oE(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nS.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=iS(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new dE(new GS(this._delegate,new sS(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return sE(this._delegate).then((function(t){return new pE(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return QS(e=ui(e),t)}(this._delegate,e||void 0).then((function(e){return new pE(e,t.storage)}))}},{key:"getMetadata",value:function(){return uE(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return $S(e=ui(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return YS(ui(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),XS(ui(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw M_(e)}}]),e}(),mE=function(){function e(t,n){l(this,e),this.app=t,this._delegate=n}return p(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(yE(e))throw L_("ref() expected a child path but got a URL, use refFromURL instead.");return new vE(cE(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!yE(e))throw L_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{B_.makeFromUrl(e,this._delegate.host)}catch(t){throw L_("refFromUrl() expected a valid full URL but got an invalid one.")}return new vE(cE(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};lE(this._delegate,e,t,n)}}]),e}();function yE(e){return/^[A-Za-z]+:\/\//.test(e)}function gE(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new mE(r,i)}!function(e){var t={TaskState:LS,TaskEvent:jS,StringFormat:nS,Storage:mE,Reference:vE};e.INTERNAL.registerComponent(new fi("storage-compat",gE,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.2")}(Fa);Fa.initializeApp({apiKey:"AIzaSyBhqSAcOPKc_wH15fLmh8-b3ZupGAF4w-I",authDomain:"share-readbooks.firebaseapp.com",projectId:"share-readbooks",storageBucket:"share-readbooks.appspot.com",messagingSenderId:"184347086556",appId:"1:184347086556:web:dd37bb90d8b4623b182e19",measurementId:"G-B1QRKSQYDE"});var bE,kE=Fa.firestore(),wE=Fa.storage(),xE={User:"User",BookInfo:"BookInfo",Cart:"Cart",Receive:"Receive"},_E={postalCode:"",prefecture:"",city:"",streetAddress:""},SE={userName:"",email:"",password:"",address:nn({},_E),isEnd:!1},EE={None:0,FreeDelivery:1,COD:2},NE={None:0,Non_fiction:1,Edited_non_fiction:2,Reference_non_fiction:3,Fiction:4},CE={None:0,Ordered:1,Prepare:2,Shipped:3,Cancel:4},IE={userId:"",bookName:"",bookType:"",imageUrl:"",count:0,deliveryType:EE.None,note:"",isEnd:!1,status:CE.None,orderedUserId:""},TE=(nn({},_E),["Aichi","Akita","Aomori","Chiba","Ehime","Fukui","Fukuoka","Fukushima","Gifu","Gunma","Hiroshima","Hokkaido","Hyogo","Ibaraki","Ishikawa","Iwate","Kagawa","Kagoshima","Kanagawa","Kochi","Kumamoto","Kyoto","Mie","Miyagi","Miyazaki","Nagano","Nagasaki","Nara","Niigata","Oita","Okayama","Okinawa","Osaka","Saga","Saitama","Shiga","Shimane","Shizuoka","Tochigi","Tokushima","Tokyo","Tottori","Toyama","Wakayama","Yamagata","Yamaguchi","Yamanashi"]),DE={Dashboard:0,Login:1,UserRegister:2,BookFormRegister:3,BookRegisteredList:4,CartList:5,FavoriteList:6,ReceiveFormRegister:7,Order:8},AE=new Uint8Array(16);function RE(){if(!bE&&!(bE="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return bE(AE)}var PE=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var OE=function(e){return"string"===typeof e&&PE.test(e)},jE=[],LE=0;LE<256;++LE)jE.push((LE+256).toString(16).substr(1));var FE=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(jE[e[t+0]]+jE[e[t+1]]+jE[e[t+2]]+jE[e[t+3]]+"-"+jE[e[t+4]]+jE[e[t+5]]+"-"+jE[e[t+6]]+jE[e[t+7]]+"-"+jE[e[t+8]]+jE[e[t+9]]+"-"+jE[e[t+10]]+jE[e[t+11]]+jE[e[t+12]]+jE[e[t+13]]+jE[e[t+14]]+jE[e[t+15]]).toLowerCase();if(!OE(n))throw TypeError("Stringified UUID is invalid");return n};var ME=function(e,t,n){var r=(e=e||{}).random||(e.rng||RE)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return FE(r)},UE=["bsPrefix","fluid","as","className"],VE=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.fluid,i=void 0!==r&&r,a=e.as,o=void 0===a?"div":a,u=e.className,s=Zn(e,UE),c=ur(n,"container"),l="string"===typeof i?"-".concat(i):"-fluid";return(0,Xn.jsx)(o,nn(nn({ref:t},s),{},{className:tr()(u,i?"".concat(c).concat(l):c)}))}));VE.displayName="Container";var zE=VE,BE=["bsPrefix","className","as"],qE=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.as,a=void 0===i?"div":i,o=Zn(e,BE),u=ur(n,"row"),s=sr(),c=cr(),l="".concat(u,"-cols"),f=[];return s.forEach((function(e){var t,n=o[e];delete o[e],t=null!=n&&"object"===typeof n?n.cols:n;var r=e!==c?"-".concat(e):"";null!=t&&f.push("".concat(l).concat(r,"-").concat(t))})),(0,Xn.jsx)(a,nn(nn({ref:t},o),{},{className:tr().apply(void 0,[r,u].concat(f))}))}));qE.displayName="Row";var GE=qE,KE=["as","bsPrefix","className"],HE=["className"];var WE=r.forwardRef((function(e,t){var n=function(e){var t=e.as,n=e.bsPrefix,r=e.className,i=Zn(e,KE);n=ur(n,"col");var a=sr(),o=cr(),u=[],s=[];return a.forEach((function(e){var t,r,a,c=i[e];delete i[e],"object"===typeof c&&null!=c?(t=c.span,r=c.offset,a=c.order):t=c;var l=e!==o?"-".concat(e):"";t&&u.push(!0===t?"".concat(n).concat(l):"".concat(n).concat(l,"-").concat(t)),null!=a&&s.push("order".concat(l,"-").concat(a)),null!=r&&s.push("offset".concat(l,"-").concat(r))})),[nn(nn({},i),{},{className:tr().apply(void 0,[r].concat(u,s))}),{as:t,bsPrefix:n,spans:u}]}(e),r=E(n,2),i=r[0],a=i.className,o=Zn(i,HE),u=r[1],s=u.as,c=void 0===s?"div":s,l=u.bsPrefix,f=u.spans;return(0,Xn.jsx)(c,nn(nn({},o),{},{ref:t,className:tr()(a,!f.length&&l)}))}));WE.displayName="Col";var QE=WE,$E=n(7),YE=n.n($E),XE=["as","className","type","tooltip"],JE={type:YE().string,tooltip:YE().bool,as:YE().elementType},ZE=r.forwardRef((function(e,t){var n=e.as,r=void 0===n?"div":n,i=e.className,a=e.type,o=void 0===a?"valid":a,u=e.tooltip,s=void 0!==u&&u,c=Zn(e,XE);return(0,Xn.jsx)(r,nn(nn({},c),{},{ref:t,className:tr()(i,"".concat(o,"-").concat(s?"tooltip":"feedback"))}))}));ZE.displayName="Feedback",ZE.propTypes=JE;var eN=ZE,tN=r.createContext({}),nN=["id","bsPrefix","className","type","isValid","isInvalid","as"],rN=r.forwardRef((function(e,t){var n=e.id,i=e.bsPrefix,a=e.className,o=e.type,u=void 0===o?"checkbox":o,s=e.isValid,c=void 0!==s&&s,l=e.isInvalid,f=void 0!==l&&l,h=e.as,d=void 0===h?"input":h,p=Zn(e,nN),v=(0,r.useContext)(tN).controlId;return i=ur(i,"form-check-input"),(0,Xn.jsx)(d,nn(nn({},p),{},{ref:t,type:u,id:n||v,className:tr()(a,i,c&&"is-valid",f&&"is-invalid")}))}));rN.displayName="FormCheckInput";var iN=rN,aN=["bsPrefix","className","htmlFor"],oN=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.className,a=e.htmlFor,o=Zn(e,aN),u=(0,r.useContext)(tN).controlId;return n=ur(n,"form-check-label"),(0,Xn.jsx)("label",nn(nn({},o),{},{ref:t,htmlFor:a||u,className:tr()(i,n)}))}));oN.displayName="FormCheckLabel";var uN=oN;var sN=["id","bsPrefix","bsSwitchPrefix","inline","reverse","disabled","isValid","isInvalid","feedbackTooltip","feedback","feedbackType","className","style","title","type","label","children","as"],cN=r.forwardRef((function(e,t){var n=e.id,i=e.bsPrefix,a=e.bsSwitchPrefix,o=e.inline,u=void 0!==o&&o,s=e.reverse,c=void 0!==s&&s,l=e.disabled,f=void 0!==l&&l,h=e.isValid,d=void 0!==h&&h,p=e.isInvalid,v=void 0!==p&&p,m=e.feedbackTooltip,y=void 0!==m&&m,g=e.feedback,b=e.feedbackType,k=e.className,w=e.style,x=e.title,_=void 0===x?"":x,S=e.type,E=void 0===S?"checkbox":S,N=e.label,C=e.children,I=e.as,T=void 0===I?"input":I,D=Zn(e,sN);i=ur(i,"form-check"),a=ur(a,"form-switch");var A=(0,r.useContext)(tN).controlId,R=(0,r.useMemo)((function(){return{controlId:n||A}}),[A,n]),P=!C&&null!=N&&!1!==N||function(e,t){return r.Children.toArray(e).some((function(e){return r.isValidElement(e)&&e.type===t}))}(C,uN),O=(0,Xn.jsx)(iN,nn(nn({},D),{},{type:"switch"===E?"checkbox":E,ref:t,isValid:d,isInvalid:v,disabled:f,as:T}));return(0,Xn.jsx)(tN.Provider,{value:R,children:(0,Xn.jsx)("div",{style:w,className:tr()(k,P&&i,u&&"".concat(i,"-inline"),c&&"".concat(i,"-reverse"),"switch"===E&&a),children:C||(0,Xn.jsxs)(Xn.Fragment,{children:[O,P&&(0,Xn.jsx)(uN,{title:_,children:N}),g&&(0,Xn.jsx)(eN,{type:b,tooltip:y,children:g})]})})})}));cN.displayName="FormCheck";var lN=Object.assign(cN,{Input:iN,Label:uN}),fN=(n(391),["bsPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","as"]),hN=r.forwardRef((function(e,t){var n,i,a=e.bsPrefix,o=e.type,u=e.size,s=e.htmlSize,c=e.id,l=e.className,f=e.isValid,h=void 0!==f&&f,d=e.isInvalid,p=void 0!==d&&d,v=e.plaintext,m=e.readOnly,y=e.as,g=void 0===y?"input":y,b=Zn(e,fN),k=(0,r.useContext)(tN).controlId;(a=ur(a,"form-control"),v)?n=Oe({},"".concat(a,"-plaintext"),!0):(Oe(i={},a,!0),Oe(i,"".concat(a,"-").concat(u),u),n=i);return(0,Xn.jsx)(g,nn(nn({},b),{},{type:o,size:s,ref:t,readOnly:m,id:c||k,className:tr()(l,n,h&&"is-valid",p&&"is-invalid","color"===o&&"".concat(a,"-color"))}))}));hN.displayName="FormControl";var dN=Object.assign(hN,{Feedback:eN}),pN=mr("form-floating"),vN=["controlId","as"],mN=r.forwardRef((function(e,t){var n=e.controlId,i=e.as,a=void 0===i?"div":i,o=Zn(e,vN),u=(0,r.useMemo)((function(){return{controlId:n}}),[n]);return(0,Xn.jsx)(tN.Provider,{value:u,children:(0,Xn.jsx)(a,nn(nn({},o),{},{ref:t}))})}));mN.displayName="FormGroup";var yN=mN,gN=["as","bsPrefix","column","visuallyHidden","className","htmlFor"],bN=r.forwardRef((function(e,t){var n=e.as,i=void 0===n?"label":n,a=e.bsPrefix,o=e.column,u=void 0!==o&&o,s=e.visuallyHidden,c=void 0!==s&&s,l=e.className,f=e.htmlFor,h=Zn(e,gN),d=(0,r.useContext)(tN).controlId;a=ur(a,"form-label");var p="col-form-label";"string"===typeof u&&(p="".concat(p," ").concat(p,"-").concat(u));var v=tr()(l,a,c&&"visually-hidden",u&&p);return f=f||d,u?(0,Xn.jsx)(QE,nn({ref:t,as:"label",className:v,htmlFor:f},h)):(0,Xn.jsx)(i,nn({ref:t,className:v,htmlFor:f},h))}));bN.displayName="FormLabel";var kN=bN,wN=["bsPrefix","className","id"],xN=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.className,a=e.id,o=Zn(e,wN),u=(0,r.useContext)(tN).controlId;return n=ur(n,"form-range"),(0,Xn.jsx)("input",nn(nn({},o),{},{type:"range",ref:t,className:tr()(i,n),id:a||u}))}));xN.displayName="FormRange";var _N=xN,SN=["bsPrefix","size","htmlSize","className","isValid","isInvalid","id"],EN=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.size,a=e.htmlSize,o=e.className,u=e.isValid,s=void 0!==u&&u,c=e.isInvalid,l=void 0!==c&&c,f=e.id,h=Zn(e,SN),d=(0,r.useContext)(tN).controlId;return n=ur(n,"form-select"),(0,Xn.jsx)("select",nn(nn({},h),{},{size:a,ref:t,className:tr()(o,n,i&&"".concat(n,"-").concat(i),s&&"is-valid",l&&"is-invalid"),id:f||d}))}));EN.displayName="FormSelect";var NN=EN,CN=["bsPrefix","className","as","muted"],IN=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.as,a=void 0===i?"small":i,o=e.muted,u=Zn(e,CN);return n=ur(n,"form-text"),(0,Xn.jsx)(a,nn(nn({},u),{},{ref:t,className:tr()(r,n,o&&"text-muted")}))}));IN.displayName="FormText";var TN=IN,DN=r.forwardRef((function(e,t){return(0,Xn.jsx)(lN,nn(nn({},e),{},{ref:t,type:"switch"}))}));DN.displayName="Switch";var AN=Object.assign(DN,{Input:lN.Input,Label:lN.Label}),RN=["bsPrefix","className","children","controlId","label"],PN=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.children,a=e.controlId,o=e.label,u=Zn(e,RN);return n=ur(n,"form-floating"),(0,Xn.jsxs)(yN,nn(nn({ref:t,className:tr()(r,n),controlId:a},u),{},{children:[i,(0,Xn.jsx)("label",{htmlFor:a,children:o})]}))}));PN.displayName="FloatingLabel";var ON=PN,jN=["className","validated","as"],LN={_ref:YE().any,validated:YE().bool,as:YE().elementType},FN=r.forwardRef((function(e,t){var n=e.className,r=e.validated,i=e.as,a=void 0===i?"form":i,o=Zn(e,jN);return(0,Xn.jsx)(a,nn(nn({},o),{},{ref:t,className:tr()(n,r&&"was-validated")}))}));FN.displayName="Form",FN.propTypes=LN;var MN=Object.assign(FN,{Group:yN,Control:dN,Floating:pN,Check:lN,Switch:AN,Label:kN,Text:TN,Range:_N,Select:NN,FloatingLabel:ON}),UN=r.createContext(null);UN.displayName="InputGroupContext";var VN=UN,zN=["bsPrefix","size","hasValidation","className","as"],BN=mr("input-group-text",{Component:"span"}),qN=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.size,a=e.hasValidation,o=e.className,u=e.as,s=void 0===u?"div":u,c=Zn(e,zN);n=ur(n,"input-group");var l=(0,r.useMemo)((function(){return{}}),[]);return(0,Xn.jsx)(VN.Provider,{value:l,children:(0,Xn.jsx)(s,nn(nn({ref:t},c),{},{className:tr()(o,n,i&&"".concat(n,"-").concat(i),a&&"has-validation")}))})}));qN.displayName="InputGroup";var GN=Object.assign(qN,{Text:BN,Radio:function(e){return(0,Xn.jsx)(BN,{children:(0,Xn.jsx)(iN,nn({type:"radio"},e))})},Checkbox:function(e){return(0,Xn.jsx)(BN,{children:(0,Xn.jsx)(iN,nn({type:"checkbox"},e))})}}),KN={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},HN=r.createContext&&r.createContext(KN),WN=function(){return WN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},WN.apply(this,arguments)},QN=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function $N(e){return e&&e.map((function(e,t){return r.createElement(e.tag,WN({key:t},e.attr),$N(e.child))}))}function YN(e){return function(t){return r.createElement(XN,WN({attr:WN({},e.attr)},t),$N(e.child))}}function XN(e){var t=function(t){var n,i=e.attr,a=e.size,o=e.title,u=QN(e,["attr","size","title"]),s=a||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",WN({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,u,{className:n,style:WN(WN({color:e.color||t.color},t.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),o&&r.createElement("title",null,o),e.children)};return void 0!==HN?r.createElement(HN.Consumer,null,(function(e){return t(e)})):t(KN)}function JN(e){return YN({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M923 283.6a260.04 260.04 0 0 0-56.9-82.8 264.4 264.4 0 0 0-84-55.5A265.34 265.34 0 0 0 679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 0 0-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9z"}}]})(e)}function ZN(e){return YN({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M923 283.6a260.04 260.04 0 0 0-56.9-82.8 264.4 264.4 0 0 0-84-55.5A265.34 265.34 0 0 0 679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 0 0-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9zM512 814.8S156 586.7 156 385.5C156 283.6 240.3 201 344.3 201c73.1 0 136.5 40.8 167.7 100.4C543.2 241.8 606.6 201 679.7 201c104 0 188.3 82.6 188.3 184.5 0 201.2-356 429.3-356 429.3z"}}]})(e)}function eC(e){return YN({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 0 0-44.4 0L77.5 505a63.9 63.9 0 0 0-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0 0 18.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"}}]})(e)}function tC(e){return YN({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0 0 11.6 0l43.6-43.5a8.2 8.2 0 0 0 0-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]})(e)}function nC(e){return(0,Xn.jsx)(zE,{className:"absolute "+e.className,children:(0,Xn.jsx)(GE,{children:(0,Xn.jsx)(QE,{sm:4,children:(0,Xn.jsx)(MN,{className:"d-flex",children:(0,Xn.jsxs)(GN,{children:[(0,Xn.jsx)(GN.Text,{className:"bg-white",children:(0,Xn.jsx)(tC,{style:{color:"#6b7280",fontSize:"20px"}})}),(0,Xn.jsx)(dN,{type:"search",className:"me-2",placeholder:"Search",onChange:e.onSearch})]})})})})})}function rC(e){return YN({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M3 8v11c0 2.201 1.794 3 3 3h15v-2H6.012C5.55 19.988 5 19.806 5 19c0-.101.009-.191.024-.273.112-.576.584-.717.988-.727H21V4c0-1.103-.897-2-2-2H6c-1.206 0-3 .799-3 3v3zm3-4h13v12H5V5c0-.806.55-.988 1-1z"}},{tag:"path",attr:{d:"M11 14h2v-3h3V9h-3V6h-2v3H8v2h3z"}}]})(e)}function iC(e){return YN({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 10c1.151 0 2-.848 2-2s-.849-2-2-2c-1.15 0-2 .848-2 2s.85 2 2 2zm0 1c-2.209 0-4 1.612-4 3.6v.386h8V14.6c0-1.988-1.791-3.6-4-3.6z"}},{tag:"path",attr:{d:"M19 2H5c-1.103 0-2 .897-2 2v13c0 1.103.897 2 2 2h4l3 3 3-3h4c1.103 0 2-.897 2-2V4c0-1.103-.897-2-2-2zm-5 15-2 2-2-2H5V4h14l.002 13H14z"}}]})(e)}function aC(e){return YN({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"}}]})(e)}function oC(e){return YN({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l1.313 7h8.17l1.313-7H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"}}]})(e)}function uC(e){return YN({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"}},{tag:"path",attr:{fillRule:"evenodd",d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"}}]})(e)}function sC(e){return YN({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#2196F3",d:"M37,40H11l-6,6V12c0-3.3,2.7-6,6-6h26c3.3,0,6,2.7,6,6v22C43,37.3,40.3,40,37,40z"}},{tag:"g",attr:{fill:"#fff"},child:[{tag:"rect",attr:{x:"22",y:"20",width:"4",height:"11"}},{tag:"circle",attr:{cx:"24",cy:"15",r:"2"}}]}]})(e)}nC.defaultProps={className:"mt-3"};var cC=Fn({name:"bookList",initialState:{bookList:[],favoriteList:[],cartList:[]},reducers:{setBookList:function(e,t){e.bookList=t.payload},setFavoriteList:function(e,t){e.favoriteList=t.payload},setCartList:function(e,t){e.cartList=t.payload}}}),lC=function(e){return e.bookList.bookList},fC=function(e){return e.bookList.favoriteList},hC=function(e){return e.bookList.cartList},dC=function(e,t){return e.bookList.bookList.find((function(e){return e.id===t}))},pC=cC.actions,vC=pC.setFavoriteList,mC=pC.setBookList,yC=pC.setCartList,gC=cC.reducer;function bC(e){return(0,Xn.jsx)("div",{className:"absolute z-10 w-[500px] h-fit px-3 py-1 text-[18px] bg-white border-2 border-[#60a5fa] rounded-md shadow-2xl left-[380px] top-[60px]",children:(0,Xn.jsxs)("div",{className:" py-3",children:["In Japan, the purpose is to share the books you read with people who love to read. Anyone can share and receive the books. Thank you for your cooperation.",(0,Xn.jsx)("br",{}),(0,Xn.jsx)("br",{}),"\u65e5\u672c\u3067\u3001\u8aad\u3093\u3060\u672c\u3092\u8aad\u66f8\u597d\u304d\u306a\u4eba\u305f\u3061\u3068\u5171\u6709\u3059\u308b\u3053\u3068\u3092\u76ee\u7684\u3068\u3057\u3066\u3044\u307e\u3059\u3002 \u8ab0\u3067\u3082\u3053\u306e\u672c\u3092\u5171\u6709\u3057\u3066\u53d7\u3051\u53d6\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 \u3054\u5354\u529b\u3092\u304a\u9858\u3044\u81f4\u3057\u307e\u3059\u3002"]})})}function kC(e){return YN({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}}]})(e)}function wC(e){var t=Ge(fC),n=Ge(hC),i=E((0,r.useState)(null),2),a=i[0],o=i[1];return(0,Xn.jsxs)(Xn.Fragment,{children:[(0,Xn.jsx)("div",{className:"relative bg-[#737373] h-[68px] w-[1961px] ml-[9px] rounded-md",children:(0,Xn.jsxs)("div",{className:"absolute flex",children:[(0,Xn.jsxs)("ul",{className:"mt-1 w-[385px]",children:[(0,Xn.jsx)("li",{children:(0,Xn.jsx)("div",{className:"mt-[10px] w-[70px] cursor-pointer",onClick:function(){e.setCurrPage(DE.Dashboard)},children:(0,Xn.jsx)(eC,{className:"hover:bg-[#a1a1aa]",style:{color:"white",fontSize:"34px"}})})}),(0,Xn.jsx)("li",{children:(0,Xn.jsx)("div",{className:"mt-[10px] w-[70px] cursor-pointer",onClick:function(){e.setCurrPage(DE.BookRegisteredList)},children:(0,Xn.jsx)(rC,{className:"hover:bg-[#a1a1aa]",style:{color:"white",fontSize:"34px"}})})}),(0,Xn.jsx)("li",{children:(0,Xn.jsx)("div",{className:"mt-[10px] w-[70px] cursor-pointer",onClick:function(){e.setCurrPage(DE.FavoriteList)},children:t.length>0?(0,Xn.jsx)(JN,{className:"hover:bg-[#a1a1aa]",style:{color:"white",fontSize:"34px"}}):(0,Xn.jsx)(ZN,{className:"hover:bg-[#a1a1aa]",style:{color:"white",fontSize:"34px"}})})}),(0,Xn.jsx)("li",{children:(0,Xn.jsx)("div",{className:"mt-[10px] w-[70px] cursor-pointer",onClick:function(){e.setCurrPage(DE.CartList)},children:n.length>0?(0,Xn.jsx)(aC,{className:"hover:bg-[#a1a1aa]",style:{color:"white",fontSize:"34px"}}):(0,Xn.jsx)(oC,{className:"hover:bg-[#a1a1aa]",style:{color:"white",fontSize:"34px"}})})}),(0,Xn.jsx)("li",{children:(0,Xn.jsx)("div",{className:"mt-[10px] w-[70px] cursor-pointer",onMouseOver:function(){o((0,Xn.jsx)(bC,{onClose:function(){o(null)}}))},onMouseLeave:function(){o(null)},children:(0,Xn.jsx)(sC,{className:"hover:bg-[#a1a1aa]",style:{color:"white",fontSize:"34px"}})})})]}),(0,Xn.jsx)("div",{className:"w-[1400px]",children:(0,Xn.jsx)(nC,{onSearch:e.onSearch})}),(0,Xn.jsxs)("div",{className:"flex items-center cursor-pointer w-[160px] mt-3 h-[38px] hover:bg-[#a1a1aa]",onClick:function(){e.setCurrPage(DE.Order)},children:[(0,Xn.jsx)(kC,{style:{color:"#93c5fd",fontSize:"34px"}}),(0,Xn.jsx)("label",{className:"ml-2 text-white text-[18px] cursor-pointer fontfamily",children:"Ordered List"})]})]})}),a&&a]})}var xC=Fn({name:"user",initialState:{userInfo:{id:"",userName:"",email:"",address:nn({},{postalCode:"",prefecture:"",city:"",streetAddress:""})}},reducers:{setUserInfo:function(e,t){e.userInfo=t.payload}}}),_C=function(e){return e.user.userInfo},SC=xC.actions.setUserInfo,EC=xC.reducer;function NC(e){return(0,Xn.jsx)("div",{className:"absolute inset-0 z-20",children:(0,Xn.jsxs)("div",{className:"relative bg-white border-2 border-[#cbd5e1] rounded-md shadow-2xl "+e.className,children:[(0,Xn.jsx)("div",{className:" ml-4 mt-2 text-[22px] font-bold",children:e.title}),(0,Xn.jsx)("div",{className:" ml-4 mt-2",children:e.text}),(0,Xn.jsx)(hr,{type:"submit",className:" absolute bottom-3 left-4 w-[70px]",onClick:e.onYesBtnClick,children:"Yes"}),(0,Xn.jsx)(hr,{type:"submit",className:" absolute bottom-3 left-[100px] w-[70px]",onClick:e.onNoBtnClick,children:"No"})]})})}function CC(e){return(0,Xn.jsx)("div",{className:"absolute inset-0 z-20",children:(0,Xn.jsxs)("div",{className:"relative h-fit w-fit items-center bg-white border-2 border-[#cbd5e1] rounded-md shadow-2xl "+e.className,children:[(0,Xn.jsx)("div",{className:" py-3 px-3 font-bold w-[200] h-[60px] hover:bg-[#a1a1aa] cursor-pointer",onClick:function(t){t.stopPropagation(),e.setCurrPage(DE.UserRegister)},children:"Account Setting"}),(0,Xn.jsx)("div",{className:" border-b-2 w-[170px]"}),(0,Xn.jsx)("div",{className:" py-3 px-12 font-bold w-[203] h-[60px] hover:bg-[#a1a1aa] cursor-pointer",onClick:e.onLogout,children:"Logout"}),(0,Xn.jsx)("div",{className:" border-b-2 w-[170px]"}),(0,Xn.jsx)("div",{className:"py-3 px-14 font-bold w-[203] h-[60px] hover:bg-[#a1a1aa] cursor-pointer",onClick:e.onClose,children:"Close"})]})})}function IC(e){var t=Ze(),n=Ge(_C),i=E((0,r.useState)(!1),2),a=i[0],o=i[1],u=E((0,r.useState)(!1),2),s=u[0],c=u[1],l=E((0,r.useState)(null),2),f=l[0],h=l[1];return(0,r.useEffect)((function(){var e=localStorage.getItem("userId")?localStorage.getItem("userId"):"";if(n&&0===n.id.length&&e.length>0)try{var r=function(){var n=li(si().mark((function n(){var r,i,a;return si().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=kE.collection(xE.User).doc(e),n.next=3,r.get();case 3:(i=n.sent).exists&&(a=nn({id:i.id},i.data()),t(SC({id:a.id,userName:a.userName,email:a.email,password:a.password,address:{postalCode:a.address.postalCode,prefecture:a.address.prefecture,city:a.address.city,streetAddress:a.address.streetAddress}})));case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();r()}catch(i){}}),[]),(0,Xn.jsxs)(Xn.Fragment,{children:[(0,Xn.jsxs)("div",{className:"flex items-center",children:[(0,Xn.jsx)("label",{className:"ml-[9px] font-bold text-[46px] w-[400px]",children:e.title}),(0,Xn.jsxs)("div",{className:" flex ml-8 items-center",children:[(0,Xn.jsx)("div",{className:"ml-8 w-[110px] h-[38px]",children:e.showUserLogin&&(0,Xn.jsx)(Xn.Fragment,{children:n.id.length>0?(0,Xn.jsxs)("div",{className:"flex items-center cursor-pointer w-[110px] h-[38px] hover:bg-[#a1a1aa]",onMouseOver:function(){h((0,Xn.jsx)("div",{className:"absolute z-10 w-fit h-fit px-3 py-1 text-[18px] bg-white border-2 border-[#94a3b8] rounded-sm shadow-2xl left-[500px] top-[40px]",children:n.userName}))},onMouseLeave:function(){h(null)},onClick:function(){c(!0)},children:[(0,Xn.jsx)(uC,{className:" ml-1 cursor-pointer",style:{color:"black",fontSize:"32px"}}),(0,Xn.jsx)("label",{className:"ml-2 text-[18px] cursor-pointer fontfamily",children:"Logout"})]}):(0,Xn.jsxs)("div",{className:"flex items-center cursor-pointer w-[110px] h-[38px] hover:bg-[#a1a1aa]",onMouseOver:function(){h((0,Xn.jsx)("div",{className:"absolute z-10 w-fit h-fit px-3 py-1 text-[18px] bg-white border-2 border-[#94a3b8] rounded-sm shadow-2xl left-[500px] top-[40px]",children:"Please login"}))},onMouseLeave:function(){h(null)},onClick:function(t){t.stopPropagation(),e.setCurrPage(DE.Login)},children:[(0,Xn.jsx)(uC,{className:" ml-1 cursor-pointer",style:{color:"black",fontSize:"32px"}}),(0,Xn.jsx)("label",{className:"ml-2 text-[18px] cursor-pointer fontfamily",children:"Login"})]})})}),e.showHomeIcon&&(0,Xn.jsxs)("div",{className:"flex items-center ml-8 hover:bg-[#a1a1aa] cursor-pointer w-[110px] h-[38px]",onMouseOver:function(){h((0,Xn.jsx)("div",{className:"absolute z-10 w-fit h-fit px-3 py-1 text-[18px] bg-white border-2 border-[#94a3b8] rounded-sm shadow-2xl left-[640px] top-[40px]",children:"Back Home"}))},onMouseLeave:function(){h(null)},onClick:function(){e.setCurrPage(DE.Dashboard)},children:[(0,Xn.jsx)(eC,{style:{color:"black",fontSize:"34px"}}),(0,Xn.jsx)("label",{className:"ml-2 text-[18px] cursor-pointer fontfamily",children:"Home"})]})]})]}),s&&(0,Xn.jsx)(CC,{setCurrPage:e.setCurrPage,onLogout:function(){c(!1),o(!0)},onClose:function(){c(!1)}}),a&&(0,Xn.jsx)(NC,{title:"Logout",text:"Are you sure you want to log out?",onYesBtnClick:function(){t(SC({id:""})),localStorage.removeItem("userId"),o(!1)},onNoBtnClick:function(){o(!1)}}),f&&f]})}NC.defaultProps={title:"",text:"",className:" w-[350px] h-[150px] left-[500px] top-[50px]",onYesBtnClick:function(){},onNoBtnClick:function(){}},CC.defaultProps={className:" left-[500px] top-[40px]",onLogout:function(){}},IC.defaultProps={showHomeIcon:!1,showUserLogin:!0};var TC=IC;function DC(e){var t="";switch(Number(e)){case NE.Non_fiction:t="Non-fiction.";break;case NE.Edited_non_fiction:t="Edited (non-fiction)";break;case NE.Reference_non_fiction:t="Reference (non-fiction)";break;case NE.Fiction:t="Fiction.";break;default:t="No Option"}return t}function AC(e){return YN({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}}]})(e)}function RC(e){var t=e.info;return(0,Xn.jsx)("div",{className:"absolute z-10 flex items-center justify-center left-[600px] "+e.posY,children:(0,Xn.jsx)("div",{children:(0,Xn.jsxs)("div",{className:"relative bg-white border-2 border-[#cbd5e1] rounded-md shadow-2xl w-fit h-fit ",children:[(0,Xn.jsxs)("div",{className:"inline-flex",children:[(0,Xn.jsx)("label",{className:" ml-8 mt-8 font-bold text-[46px] w-fit",children:"Book Detail"}),(0,Xn.jsx)(AC,{className:" absolute right-2 top-2 hover:bg-[#a1a1aa] cursor-pointer",style:{color:"black",fontSize:"34px"},onClick:e.onClose})]}),t&&(0,Xn.jsxs)("div",{className:"px-8 pt-8 text-[22px] w-[700px]",children:[(0,Xn.jsx)("div",{className:"w-[450px]",children:(0,Xn.jsx)("img",{src:t.imageUrl,alt:"..."})}),(0,Xn.jsxs)("div",{className:" mt-4",children:[(0,Xn.jsx)("span",{className:" font-bold",children:"Name: "}),t.bookName]}),(0,Xn.jsxs)("div",{className:" mt-4",children:[(0,Xn.jsx)("span",{className:" font-bold",children:"Type: "}),DC(t.bookType)]}),(0,Xn.jsxs)("div",{className:" mt-4",children:[(0,Xn.jsx)("span",{className:" font-bold",children:"Count: "}),t.count]}),(0,Xn.jsxs)("div",{className:" mt-4",children:[(0,Xn.jsx)("span",{className:" font-bold",children:"Delivery: "}),t.deliveryType===EE.FreeDelivery?"Free Delivery":"COD (Cash On Delivery)"]}),(0,Xn.jsxs)("div",{className:" mt-4",children:[(0,Xn.jsx)("span",{className:" font-bold",children:"Note: "}),t.note]})]}),(0,Xn.jsx)(hr,{variant:"primary",className:" ml-8 mt-4 mb-4",onClick:e.onClose,children:"Close"})]})})})}function PC(e){return(0,Xn.jsx)("div",{className:"absolute inset-0 z-10 "+e.bgColor,children:(0,Xn.jsxs)("div",{className:"relative bg-white border-2 border-[#cbd5e1] rounded-md shadow-2xl "+e.className,children:[(0,Xn.jsx)("div",{className:" ml-4 mt-2 text-[22px] font-bold",children:e.title}),(0,Xn.jsx)("div",{className:" ml-4 mt-2",children:e.text}),(0,Xn.jsx)(hr,{type:"submit",className:" absolute bottom-3 left-4 w-[70px]",onClick:e.onClick,children:"OK"})]})})}RC.defaultProps={posY:" top-[60px] "},PC.defaultProps={title:"",text:"",bgColor:"",className:" w-[400px] h-[150px] left-[780px] top-[400px]",onClick:function(){}};var OC=function(e){var t=Ze(),n=Ge(lC),i=E((0,r.useState)([]),2),a=i[0],o=i[1],u=Ge(fC),s=Ge(hC),l=E((0,r.useState)(null),2),f=l[0],h=l[1],d=E((0,r.useState)(!1),2),p=d[0],v=d[1],m=Ge(_C);return(0,r.useEffect)((function(){try{kE.collection(xE.BookInfo).where("isEnd","==",!1).get().then((function(e){if(e.empty)o([]);else{var n=[];e.docs.forEach((function(e){var t,r,i=e.data(),a=nn(nn({},IE),{},{userId:i.userId,bookName:i.bookName,bookType:i.bookType,imageUrl:i.imageUrl,count:i.count,deliveryType:i.deliveryType,note:i.note,isEnd:i.isEnd,status:null!==(t=i.status)&&void 0!==t?t:CE.None,orderedUserId:null!==(r=i.orderedUserId)&&void 0!==r?r:""});n.push(nn({id:e.id},a))})),n.sort((function(e,t){return e.bookName-t.bookName})),o(n),t(mC(n))}}))}catch(e){console.error(e)}}),[]),(0,Xn.jsxs)(Xn.Fragment,{children:[(0,Xn.jsx)("div",{className:"relative mt-8 ml-8 w-[2000px]",children:(0,Xn.jsxs)("div",{className:" absolute",children:[(0,Xn.jsx)(TC,{title:"Sharing Books",setCurrPage:e.setCurrPage}),(0,Xn.jsx)("div",{className:"mb-2 mt-3",children:(0,Xn.jsx)(wC,{onSearch:function(e){return function(e){var t=e.target.value;t.length>0?o(n.filter((function(e){return e.bookName.toLowerCase().includes(t.toLowerCase())}))):o(n),h(null)}(e)},setCurrPage:e.setCurrPage})}),(0,Xn.jsx)("div",{className:"absolute list-container w-[1990px]",children:a&&a.filter((function(e){return e.status!==CE.Shipped})).map((function(r){return(0,Xn.jsx)("div",{className:"list-item mb-4",children:(0,Xn.jsxs)(Fr,{style:{width:"23rem"},children:[(0,Xn.jsx)(Fr.Img,{variant:"top",className:"h-[250px]",src:r.imageUrl}),(0,Xn.jsx)("div",{className:" absolute right-0 cursor-pointer",children:u.length&&u.some((function(e){return e.id===r.id}))?(0,Xn.jsx)(JN,{className:" ml-4",style:{color:"white",fontSize:"34px"},onClick:function(){return function(e){var n=u.filter((function(t){return t.id!==e}));t(vC(n)),h(null)}(r.id)}}):(0,Xn.jsx)(ZN,{className:" ml-4",style:{color:"white",fontSize:"34px"},onClick:function(){return function(e){var r=n.find((function(t){return t.id===e})),i=c(u);i.push(r),t(vC(i)),h(null)}(r.id)}})}),(0,Xn.jsxs)(Fr.Body,{onClick:function(e){return function(e,t){e.preventDefault();var n=a.findIndex((function(e){return e.id===t.id})),r=Math.trunc(n/5),i=" top-["+Number(0===r?100:1===r?400:200*r)+"px]";h((0,Xn.jsx)(RC,{posY:i,info:t,onClose:function(){h(null)}}))}(e,r)},className:" cursor-pointer",children:[(0,Xn.jsx)(Fr.Title,{children:(0,Xn.jsx)("div",{className:"font-bold",children:r.bookName})}),(0,Xn.jsx)(Fr.Text,{children:"Type: "+DC(r.bookType)}),(0,Xn.jsx)(Fr.Text,{children:"Count: "+r.count}),(0,Xn.jsx)(Fr.Text,{children:"Delivery: "+(Number(r.deliveryType)===EE.FreeDelivery?"Free Delivery":"COD (Cash On Delivery)")}),(0,Xn.jsx)(Fr.Text,{className:" w-[340px] overflow-hidden whitespace-nowrap overflow-ellipsis",children:"Note: "+r.note})]}),(0,Xn.jsxs)("div",{className:"mb-3 ml-4 flex",children:[(0,Xn.jsx)(hr,{variant:"primary",onClick:function(){return function(e){var r=s.findIndex((function(t){return t.id===e}));if(0===s.length||-1===r&&s.length>0){var i=n.find((function(t){return t.id===e})),a=c(s);a.push(i),t(yC(a))}h(null)}(r.id)},children:"Add to Cart"}),m.id.length>0&&r.userId!==m.id&&(r.status===CE.None||r.status===CE.Cancel)?(0,Xn.jsx)(hr,{variant:"primary",className:" ml-4",onClick:function(t){return function(t,n){t.preventDefault(),0!==m.id.length?(e.setCurrPage(DE.ReceiveFormRegister),e.setSelectedBookId(n),h(null)):v(!0)}(t,r.id)},children:"Receive"}):r.status!==CE.None&&r.orderedUserId.length>0?(0,Xn.jsx)("label",{className:" ml-4 doubleunderline font-bold",children:r.status===CE.Ordered?"Ordered":r.status===CE.Prepare?"Preparing To Ship":""}):""]})]})},ME())}))})]})}),f,p&&(0,Xn.jsx)(PC,{title:"Book Receiving",text:"Please log in to receive the book.",bgColor:"bg-[#78716c] bg-opacity-70",onClick:function(){v(!1)}})]})};function jC(e){var t,n,r="";if("string"===typeof e||"number"===typeof e)r+=e;else if("object"===typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=jC(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function LC(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=jC(e))&&(r&&(r+=" "),r+=t);return r}var FC=["breakpoint","fluid","children","className","tag"],MC=["center","children","className","end","lg","md","offsetLg","offsetMd","offsetSm","order","size","sm","start","tag","xl","xxl","xs"],UC=["className","color","pill","light","dot","tag","children","notification"],VC=["className","rippleTag","rippleCentered","rippleDuration","rippleUnbound","rippleRadius","rippleColor","children","onMouseDown"],zC=["className","color","outline","children","rounded","disabled","floating","size","href","block","active","toggle","noRipple","tag","role"],BC=["className","children","shadow","toolbar","size","vertical","tag","role"],qC=["className","children","tag","color","grow","size"],GC=["className","children","border","background","tag","shadow","alignment"],KC=["className","children","border","background","tag"],HC=["className","children","tag"],WC=["className","children","tag"],QC=["className","children","tag"],$C=["className","children","tag"],YC=["className","children","border","background","tag"],XC=["className","children","tag"],JC=["className","children","tag"],ZC=["className","tag","horizontal","horizontalSize","light","numbered","children","small"],eI=["className","tag","active","disabled","action","color","children","noBorders"],tI=["around","between","bottom","center","children","className","evenly","end","middle","start","tag","top"],nI=["className","children","tag","variant","color","blockquote","note","noteColor","listUnStyled","listInLine"],rI=["className","color","uppercase","bold","children"],iI=["className","active","current","children"],aI=["className","children","light","dark","scrolling","fixed","sticky","scrollingNavbarOffset","color","transparent","expand","tag","bgColor"],oI=["children","className","disabled","active","tag"],uI=["className","children","tag"],sI=["children","className","active","text","tag"],cI=["children","className","right","fullWidth","left","tag"],lI=["children","className","tag"],fI=["children","bgColor","color","className"],hI=["children","size","circle","center","end","start","className"],dI=["children","className","tag"],pI=["children","className","active","disabled"],vI=["animated","children","className","style","tag","valuenow","valuemax","striped","bgColor","valuemin","width"],mI=["className","children","tag","height","style"],yI=["className","size","contrast","value","defaultValue","id","labelClass","wrapperClass","wrapperStyle","wrapperTag","label","onChange","children","labelRef","labelStyle","type","onBlur","readonly"],gI=["className","children","show","id","navbar","tag","collapseRef","style","onShow","onHide"],bI=["className","centered","children","size","scrollable","tag"],kI=["className","children","tag"],wI=["className","children","tag"],xI=["className","children","tag"],_I=["className","children","tag"],SI=["className","children","tag"],EI=["className","children","noBorder","textBefore","textAfter","noWrap","tag","textTag","textClass","size","textProps"],NI=["className","children","isValidated","onReset","onSubmit","noValidate"],CI=["className","fill","pills","justify","children"],II=["className","children","style","tag"],TI=["className","color","active","onShow","onHide","children"],DI=["className","tag","children"],AI=["className","tag","show","children"],RI=["alwaysOpen","borderless","className","flush","initialActive","tag","children","onChange"],PI=["className","bodyClassName","bodyStyle","headerClassName","collapseId","headerTitle","headerStyle","btnClassName","tag","children"];!function(){try{if("undefined"!=typeof document){var e=document.createElement("style");e.appendChild(document.createTextNode(".dropdown-menu .active:not(.form-control){color:#16181b;background-color:#eee}.dropdown-menu [data-active=true] a.dropdown-item,.dropdown-menu .dropdown-item:focus,.dropdown-menu li:focus .dropdown-item :not(.disabled){color:#16181b;background-color:#eee}.dropdown-menu li:focus{outline:none}.dropdown-menu.dropdown-menu-dark [data-active=true] a.dropdown-item,.dropdown-menu.dropdown-menu-dark .dropdown-item:focus,.dropdown-menu.dropdown-menu-dark li:focus .dropdown-item{color:#fff;background-color:#1266f1}.btn-group.dropstart>.dropdown-menu{right:0!important}")),document.head.appendChild(e)}}catch(dt){console.error("vite-plugin-css-injected-by-js",dt)}}();r.forwardRef((function(e,t){var n=e.breakpoint,r=e.fluid,i=e.children,a=e.className,o=e.tag,u=void 0===o?"div":o,s=Zn(e,FC),c=LC("".concat(r?"container-fluid":"container".concat(n?"-"+n:"")),a);return(0,Xn.jsx)(u,nn(nn({className:c},s),{},{ref:t,children:i}))})),r.forwardRef((function(e,t){var n=e.center,r=e.children,i=e.className,a=e.end,o=e.lg,u=e.md,s=e.offsetLg,c=e.offsetMd,l=e.offsetSm,f=e.order,h=e.size,d=e.sm,p=e.start,v=e.tag,m=void 0===v?"div":v,y=e.xl,g=e.xxl,b=e.xs,k=Zn(e,MC),w=LC(h&&"col-".concat(h),b&&"col-xs-".concat(b),d&&"col-sm-".concat(d),u&&"col-md-".concat(u),o&&"col-lg-".concat(o),y&&"col-xl-".concat(y),g&&"col-xxl-".concat(g),h||b||d||u||o||y||g?"":"col",f&&"order-".concat(f),p&&"align-self-start",n&&"align-self-center",a&&"align-self-end",l&&"offset-sm-".concat(l),c&&"offset-md-".concat(c),s&&"offset-lg-".concat(s),i);return(0,Xn.jsx)(m,nn(nn({className:w,ref:t},k),{},{children:r}))})),r.forwardRef((function(e,t){var n=e.className,r=e.color,i=void 0===r?"primary":r,a=e.pill,o=e.light,u=e.dot,s=e.tag,c=void 0===s?"span":s,l=e.children,f=e.notification,h=Zn(e,UC),d=LC("badge",o?i&&"badge-".concat(i):i&&"bg-".concat(i),u&&"badge-dot",a&&"rounded-pill",f&&"badge-notification",n);return(0,Xn.jsx)(c,nn(nn({className:d,ref:t},h),{},{children:l}))}));var OI=function(e){var t=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e)),n=E((0,r.useState)(!1),2),i=n[0],a=n[1],o=LC("ripple-wave",i&&"active");return(0,r.useEffect)((function(){var e=setTimeout((function(){a(!0)}),50);return function(){clearTimeout(e)}}),[]),(0,Xn.jsx)("div",nn({className:o},t))},jI=r.forwardRef((function(e,t){var n=e.className,i=e.rippleTag,a=void 0===i?"div":i,o=e.rippleCentered,u=e.rippleDuration,s=void 0===u?500:u,c=e.rippleUnbound,l=e.rippleRadius,f=void 0===l?0:l,h=e.rippleColor,d=void 0===h?"dark":h,p=e.children,v=e.onMouseDown,m=Zn(e,VC),y=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=r.useRef();return r.useEffect((function(){t.forEach((function(e){e&&("function"==typeof e?e(i.current):e.current=i.current)}))}),[t]),i}(t,(0,r.useRef)(null)),g=[0,0,0],b=["primary","secondary","success","danger","warning","info","light","dark"],k=E((0,r.useState)([]),2),w=k[0],x=k[1],_=E((0,r.useState)(!1),2),S=_[0],N=_[1],C=LC("ripple","ripple-surface",c&&"ripple-surface-unbound",S&&"ripple-surface-".concat(d),n),I=function(){if(b.find((function(e){return e===(null==d?void 0:d.toLowerCase())})))return N(!0);var e=T(d).join(",");return"radial-gradient(circle, ".concat("rgba({{color}}, 0.2) 0, rgba({{color}}, 0.3) 40%, rgba({{color}}, 0.4) 50%, rgba({{color}}, 0.5) 60%, rgba({{color}}, 0) 70%".split("{{color}}").join("".concat(e)),")")},T=function(e){return"transparent"===e.toLowerCase()?g:"#"===e[0]?function(e){return e.length<7&&(e="#".concat(e[1]).concat(e[1]).concat(e[2]).concat(e[2]).concat(e[3]).concat(e[3])),[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)]}(e):(-1===e.indexOf("rgb")&&(e=function(e){var t=document.body.appendChild(document.createElement("fictum")),n="rgb(1, 2, 3)";return t.style.color=n,t.style.color!==n||(t.style.color=e,t.style.color===n||""===t.style.color)?g:(e=getComputedStyle(t).color,document.body.removeChild(t),e)}(e)),0===e.indexOf("rgb")?function(e){return e=e.match(/[.\d]+/g).map((function(e){return+Number(e)})),e.length=3,e}(e):g)},D=function(e){var t,n=null==(t=y.current)?void 0:t.getBoundingClientRect(),r=e.clientX-n.left,i=e.clientY-n.top,a=n.height,u=n.width,c={delay:s&&.5*s,duration:s&&s-.5*s},l=function(e){var t=e.offsetX,n=e.offsetY,r=e.height,i=e.width,a=n<=r/2,o=t<=i/2,u=function(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))},s=n===r/2&&t===i/2,c=!0===a&&!1===o,l=!0===a&&!0===o,f=!1===a&&!0===o,h=!1===a&&!1===o,d={topLeft:u(t,n),topRight:u(i-t,n),bottomLeft:u(t,r-n),bottomRight:u(i-t,r-n)},p=0;return s||h?p=d.topLeft:f?p=d.topRight:l?p=d.bottomRight:c&&(p=d.bottomLeft),2*p}({offsetX:o?a/2:r,offsetY:o?u/2:i,height:a,width:u}),h=f||l/2,d={left:"".concat(o?u/2-h:r-h,"px"),top:"".concat(o?a/2-h:i-h,"px"),height:"".concat(f?2*f:l,"px"),width:"".concat(f?2*f:l,"px"),transitionDelay:"0s, ".concat(c.delay,"ms"),transitionDuration:"".concat(s,"ms, ").concat(c.duration,"ms")};return S?d:nn(nn({},d),{},{backgroundImage:"".concat(I())})};return(0,r.useEffect)((function(){var e=setTimeout((function(){w.length>0&&x(w.splice(1,w.length-1))}),s);return function(){clearTimeout(e)}}),[s,w]),(0,Xn.jsxs)(a,nn(nn({className:C,onMouseDown:function(e){return function(e){var t=D(e),n=w.concat(t);x(n),v&&v(e)}(e)},ref:y},m),{},{children:[p,w.map((function(e,t){return(0,Xn.jsx)(OI,{style:e},t)}))]}))})),LI=(r.forwardRef((function(e,t){var n=e.className,i=e.color,a=void 0===i?"primary":i,o=e.outline,u=e.children,s=e.rounded,c=e.disabled,l=e.floating,f=e.size,h=e.href,d=e.block,p=e.active,v=e.toggle,m=e.noRipple,y=e.tag,g=void 0===y?"button":y,b=e.role,k=void 0===b?"button":b,w=Zn(e,zC),x=E((0,r.useState)(p||!1),2),_=x[0],S=x[1],N=a&&["light","link"].includes(a)||o?"dark":"light",C=LC("none"!==a&&"btn","none"!==a?o?a?"btn-outline-".concat(a):"btn-outline-primary":a?"btn-".concat(a):"btn-primary":"",s&&"btn-rounded",l&&"btn-floating",f&&"btn-".concat(f),"".concat((h||"button"!==g)&&c?"disabled":""),d&&"btn-block",_&&"active",n);return h&&"a"!==g&&(g="a"),["hr","img","input"].includes(g)||m?(0,Xn.jsx)(g,nn(nn({className:C,onClick:v?function(){S(!_)}:void 0,disabled:!(!c||"button"!==g)||void 0,href:h,ref:t,role:k},w),{},{children:u})):(0,Xn.jsx)(jI,nn(nn({rippleTag:g,rippleColor:N,className:C,onClick:v?function(){S(!_)}:void 0,disabled:!(!c||"button"!==g)||void 0,href:h,ref:t,role:k},w),{},{children:u}))})),r.forwardRef((function(e,t){var n=e.className,r=e.children,i=e.shadow,a=e.toolbar,o=e.size,u=e.vertical,s=e.tag,c=void 0===s?"div":s,l=e.role,f=void 0===l?"group":l,h=Zn(e,BC),d=LC(a?"btn-toolbar":u?"btn-group-vertical":"btn-group",i&&"shadow-".concat(i),o&&"btn-group-".concat(o),n);return(0,Xn.jsx)(c,nn(nn({className:d,ref:t,role:f},h),{},{children:r}))})),r.forwardRef((function(e,t){var n=e.className,r=e.children,i=e.tag,a=void 0===i?"div":i,o=e.color,u=e.grow,s=e.size,c=Zn(e,qC),l=LC("".concat(u?"spinner-grow":"spinner-border"),o&&"text-".concat(o),"".concat(s?u?"spinner-grow-"+s:"spinner-border-"+s:""),n);return(0,Xn.jsx)(a,nn(nn({className:l,ref:t},c),{},{children:r}))})),r.forwardRef((function(e,t){var n=e.className,r=e.children,i=e.border,a=e.background,o=e.tag,u=void 0===o?"div":o,s=e.shadow,c=e.alignment,l=Zn(e,GC),f=LC("card",i&&"border border-".concat(i),a&&"bg-".concat(a),s&&"shadow-".concat(s),c&&"text-".concat(c),n);return(0,Xn.jsx)(u,nn(nn({className:f,ref:t},l),{},{children:r}))})),r.forwardRef((function(e,t){var n=e.className,r=e.children,i=e.border,a=e.background,o=e.tag,u=void 0===o?"div":o,s=Zn(e,KC),c=LC("card-header",i&&"border-".concat(i),a&&"bg-".concat(a),n);return(0,Xn.jsx)(u,nn(nn({className:c},s),{},{ref:t,children:r}))})),r.forwardRef((function(e,t){var n=e.className,r=e.children,i=e.tag,a=void 0===i?"p":i,o=Zn(e,HC),u=LC("card-subtitle",n);return(0,Xn.jsx)(a,nn(nn({className:u},o),{},{ref:t,children:r}))})),r.forwardRef((function(e,t){var n=e.className,r=e.children,i=e.tag,a=void 0===i?"h5":i,o=Zn(e,WC),u=LC("card-title",n);return(0,Xn.jsx)(a,nn(nn({className:u},o),{},{ref:t,children:r}))})),r.forwardRef((function(e,t){var n=e.className,r=e.children,i=e.tag,a=void 0===i?"p":i,o=Zn(e,QC),u=LC("card-text",n);return(0,Xn.jsx)(a,nn(nn({className:u},o),{},{ref:t,children:r}))})),r.forwardRef((function(e,t){var n=e.className,r=e.children,i=e.tag,a=void 0===i?"div":i,o=Zn(e,$C),u=LC("card-body",n);return(0,Xn.jsx)(a,nn(nn({className:u},o),{},{ref:t,children:r}))})),r.forwardRef((function(e,t){var n=e.className,r=e.children,i=e.border,a=e.background,o=e.tag,u=void 0===o?"div":o,s=Zn(e,YC),c=LC("card-footer",i&&"border-".concat(i),a&&"bg-".concat(a),n);return(0,Xn.jsx)(u,nn(nn({className:c},s),{},{ref:t,children:r}))})),r.forwardRef((function(e,t){var n=e.className,r=e.children,i=e.tag,a=void 0===i?"div":i,o=Zn(e,XC),u=LC("card-img-overlay",n);return(0,Xn.jsx)(a,nn(nn({className:u},o),{},{ref:t,children:r}))})),r.forwardRef((function(e,t){var n=e.className,r=e.children,i=e.tag,a=void 0===i?"div":i,o=Zn(e,JC),u=LC("card-group",n);return(0,Xn.jsx)(a,nn(nn({className:u},o),{},{ref:t,children:r}))})),r.forwardRef((function(e,t){var n=e.className,r=e.tag,i=void 0===r?"ul":r,a=e.horizontal,o=e.horizontalSize,u=e.light,s=e.numbered,c=e.children,l=e.small,f=Zn(e,ZC),h=LC("list-group",a&&(o?"list-group-horizontal-".concat(o):"list-group-horizontal"),u&&"list-group-light",s&&"list-group-numbered",l&&"list-group-small",n);return(0,Xn.jsx)(i,nn(nn({className:h,ref:t},f),{},{children:c}))})),r.forwardRef((function(e,t){var n=e.className,r=e.tag,i=void 0===r?"li":r,a=e.active,o=e.disabled,u=e.action,s=e.color,c=e.children,l=e.noBorders,f=Zn(e,eI),h="button"===i,d=LC("list-group-item",a&&"active",o&&!h&&"disabled",u&&"list-group-item-action",s&&"list-group-item-".concat(s),l&&"border-0",n);return(0,Xn.jsx)(i,nn(nn({className:d,disabled:h&&o,ref:t},f),{},{children:c}))})),r.forwardRef((function(e,t){var n=e.around,r=e.between,i=e.bottom,a=e.center,o=e.children,u=e.className,s=e.evenly,c=e.end,l=e.middle,f=e.start,h=e.tag,d=void 0===h?"div":h,p=e.top,v=Zn(e,tI),m=LC("row",n&&"justify-content-around",r&&"justify-content-between",i&&"align-self-end",a&&"justify-content-center",s&&"justifty-content-evenly",c&&"justify-content-end",l&&"align-self-center",f&&"justify-content-start",p&&"align-self-start",u);return(0,Xn.jsx)(d,nn(nn({className:m},v),{},{ref:t,children:o}))})),r.forwardRef((function(e,t){var n=e.className,r=e.children,i=e.tag,a=void 0===i?"p":i,o=e.variant,u=e.color,s=e.blockquote,c=e.note,l=e.noteColor,f=e.listUnStyled,h=e.listInLine,d=Zn(e,nI),p=LC(o&&o,s&&"blockquote",c&&"note",u&&"text-".concat(u),l&&"note-".concat(l),f&&"list-unstyled",h&&"list-inline",n);return s&&(a="blockquote"),(f||h)&&(a="ul"),(0,Xn.jsx)(a,nn(nn({className:p,ref:t},d),{},{children:r}))})),r.forwardRef((function(e,t){var n=e.className,r=e.color,i=e.uppercase,a=e.bold,o=e.children,u=Zn(e,rI),s=LC("breadcrumb",a&&"font-weight-bold",r&&"text-".concat(r),i&&"text-uppercase",n);return(0,Xn.jsx)("nav",{"aria-label":"breadcrumb",children:(0,Xn.jsx)("ol",nn(nn({className:s,ref:t},u),{},{children:o}))})})),r.forwardRef((function(e,t){var n=e.className,r=e.active,i=e.current,a=void 0===i?"page":i,o=e.children,u=Zn(e,iI),s=LC("breadcrumb-item",r&&"active",n);return(0,Xn.jsx)("li",nn(nn({className:s,ref:t,"aria-current":r&&a},u),{},{children:o}))})),r.forwardRef((function(e,t){var n=e.className,i=e.children,a=e.light,o=e.dark,u=e.scrolling,s=e.fixed,c=e.sticky,l=e.scrollingNavbarOffset,f=e.color,h=e.transparent,d=e.expand,p=e.tag,v=void 0===p?"nav":p,m=e.bgColor,y=Zn(e,aI),g=E((0,r.useState)(!1),2),b=g[0],k=g[1],w=LC(Oe({"navbar-light":a,"navbar-dark":o,"scrolling-navbar":u||l,"top-nav-collapse":b},"text-".concat(f),f&&h?b:f),s&&"fixed-".concat(s),c&&"sticky-top","navbar",d&&function(e){if(!1!==e)return"navbar-expand-".concat(e)}(d),m&&"bg-".concat(m),n),x=(0,r.useCallback)((function(){l&&window.pageYOffset>l?k(!0):k(!1)}),[l]);return(0,r.useEffect)((function(){return(u||l)&&window.addEventListener("scroll",x),function(){window.removeEventListener("scroll",x)}}),[x,u,l]),(0,Xn.jsx)(v,nn(nn({className:w,role:"navigation"},y),{},{ref:t,children:i}))})),r.forwardRef((function(e,t){var n=e.children,r=e.className,i=void 0===r?"":r,a=e.disabled,o=void 0!==a&&a,u=e.active,s=void 0!==u&&u,c=e.tag,l=void 0===c?"a":c,f=Zn(e,oI),h=LC("nav-link",o?"disabled":s?"active":"",i);return(0,Xn.jsx)(l,nn(nn({"data-test":"nav-link",className:h,style:{cursor:"pointer"},ref:t},f),{},{children:n}))})),r.forwardRef((function(e,t){var n=e.className,r=e.children,i=e.tag,a=void 0===i?"a":i,o=Zn(e,uI),u=LC("navbar-brand",n);return(0,Xn.jsx)(a,nn(nn({className:u,ref:t},o),{},{children:r}))})),r.forwardRef((function(e,t){var n=e.children,r=e.className,i=e.active,a=e.text,o=e.tag,u=void 0===o?"li":o,s=Zn(e,sI),c=LC("nav-item",i&&"active",a&&"navbar-text",r);return(0,Xn.jsx)(u,nn(nn({},s),{},{className:c,ref:t,children:n}))})),r.forwardRef((function(e,t){var n=e.children,r=e.className,i=e.right,a=e.fullWidth,o=void 0===a||a,u=e.left,s=e.tag,c=void 0===s?"ul":s,l=Zn(e,cI),f=LC("navbar-nav",o&&"w-100",i&&"ms-auto",u&&"me-auto",r);return(0,Xn.jsx)(c,nn(nn({className:f,ref:t},l),{},{children:n}))})),r.forwardRef((function(e,t){var n=e.children,r=e.className,i=e.tag,a=void 0===i?"button":i,o=Zn(e,lI),u=LC("navbar-toggler",r);return(0,Xn.jsx)(a,nn(nn({},o),{},{className:u,ref:t,children:n}))})),r.forwardRef((function(e,t){var n=e.children,r=e.bgColor,i=e.color,a=e.className,o=Zn(e,fI),u=LC(r&&"bg-".concat(r),i&&"text-".concat(i),a);return(0,Xn.jsx)("footer",nn(nn({className:u},o),{},{ref:t,children:n}))})),r.forwardRef((function(e,t){var n=e.children,r=e.size,i=e.circle,a=e.center,o=e.end,u=e.start,s=e.className,c=Zn(e,hI),l=LC("pagination",a&&"justify-content-center",i&&"pagination-circle",o&&"justify-content-end",r&&"pagination-".concat(r),u&&"justify-content-start",s);return(0,Xn.jsx)("ul",nn(nn({className:l},c),{},{ref:t,children:n}))})),r.forwardRef((function(e,t){var n=e.children,r=e.className,i=e.tag,a=void 0===i?"a":i,o=Zn(e,dI),u=LC("page-link",r);return(0,Xn.jsx)(a,nn(nn({className:u},o),{},{ref:t,children:n}))})),r.forwardRef((function(e,t){var n=e.children,r=e.className,i=e.active,a=e.disabled,o=Zn(e,pI),u=LC("page-item",i&&"active",a&&"disabled",r);return(0,Xn.jsx)("li",nn(nn({className:u},o),{},{ref:t,children:n}))})),r.forwardRef((function(e,t){var n,r=e.animated,i=e.children,a=e.className,o=e.style,u=e.tag,s=void 0===u?"div":u,c=e.valuenow,l=e.valuemax,f=e.striped,h=e.bgColor,d=e.valuemin,p=e.width,v=Zn(e,vI),m=LC("progress-bar",h&&"bg-".concat(h),f&&"progress-bar-striped",r&&"progress-bar-animated",a),y=nn({width:"".concat(p,"%")},o);return(0,Xn.jsx)(s,nn(nn({className:m,style:y,ref:t,role:"progressbar"},v),{},{"aria-valuenow":null!==(n=Number(p))&&void 0!==n?n:c,"aria-valuemin":Number(d),"aria-valuemax":Number(l),children:i}))}))),FI=(r.forwardRef((function(e,t){var n=e.className,i=e.children,a=e.tag,o=void 0===a?"div":a,u=e.height,s=e.style,c=Zn(e,mI),l=LC("progress",n),f=nn({height:"".concat(u,"px")},s);return(0,Xn.jsx)(o,nn(nn({className:l,ref:t,style:f},c),{},{children:r.Children.map(i,(function(e){return r.isValidElement(e)&&e.type===LI?e:void console.error("Progress component only allows ProgressBar as child")}))}))})),r.forwardRef((function(e,t){var n,i,a=e.className,o=e.size,u=e.contrast,s=e.value,c=e.defaultValue,l=e.id,f=e.labelClass,h=e.wrapperClass,d=e.wrapperStyle,p=e.wrapperTag,v=void 0===p?"div":p,m=e.label,y=e.onChange,g=e.children,b=e.labelRef,k=e.labelStyle,w=e.type,x=e.onBlur,_=e.readonly,S=void 0!==_&&_,N=Zn(e,yI),C=E((0,r.useState)(s||c),2),I=C[0],T=C[1],D=E((0,r.useState)(0),2),A=D[0],R=D[1],P=E((0,r.useState)(!1),2),O=P[0],j=P[1],L=(0,r.useRef)(null),F=function(e){var t=E((0,r.useState)(!1),2),n=t[0],i=t[1],a=(0,r.useMemo)((function(){return new IntersectionObserver((function(e){var t=E(e,1)[0];i(t.isIntersecting)}))}),[]);return(0,r.useEffect)((function(){if(e.current)return a.observe(e.current),function(){return a.disconnect()}}),[a,e]),n}(L);(0,r.useImperativeHandle)(t,(function(){return L.current}));var M=(0,r.useRef)(null),U=b||M,V=LC("form-outline",u&&"form-white",h),z=LC("form-control",O&&"active","date"===w&&"active",o&&"form-control-".concat(o),a),B=LC("form-label",f);(0,r.useEffect)((function(){if(L.current){var e=L.current.value;j(""!=e)}}),[null==(n=L.current)?void 0:n.value]),(0,r.useEffect)((function(){void 0!==s&&j(""!=s)}),[s]),(0,r.useEffect)((function(){void 0!==c&&j(""!=c)}),[c]);var q=(0,r.useCallback)((function(){var e;null!=(e=U.current)&&e.clientWidth&&R(.8*U.current.clientWidth+8)}),[U]);(0,r.useEffect)((function(){q()}),[null==(i=U.current)?void 0:i.clientWidth,q,F]);var G=(0,r.useCallback)((function(e){L.current&&(void 0!==I&&""!=I||void 0!==s&&""!=s||""!=L.current.value?j(!0):j(!1),x&&x(e))}),[I,s,x]);return(0,Xn.jsxs)(v,{className:V,style:d,children:[(0,Xn.jsx)("input",nn({type:w,readOnly:S,className:z,onBlur:G,onChange:function(e){T(e.target.value),null==y||y(e)},onFocus:q,value:s,defaultValue:c,id:l,ref:L},N)),m&&(0,Xn.jsx)("label",{className:B,style:k,htmlFor:l,ref:U,children:m}),(0,Xn.jsxs)("div",{className:"form-notch",children:[(0,Xn.jsx)("div",{className:"form-notch-leading"}),(0,Xn.jsx)("div",{className:"form-notch-middle",style:{width:A}}),(0,Xn.jsx)("div",{className:"form-notch-trailing"})]}),g]})}))),MI=function(e){var t=e.className,n=e.children,i=e.show,a=void 0!==i&&i,o=e.id,u=e.navbar,s=e.tag,c=void 0===s?"div":s,l=e.collapseRef,f=e.style,h=e.onShow,d=e.onHide,p=Zn(e,gI),v=E((0,r.useState)(!1),2),m=v[0],y=v[1],g=E((0,r.useState)(void 0),2),b=g[0],k=g[1],w=E((0,r.useState)(!1),2),x=w[0],_=w[1],S=LC(x?"collapsing":"collapse",!x&&m&&"show",u&&"navbar-collapse",t),N=(0,r.useRef)(null),C=null!==l&&void 0!==l?l:N,I=(0,r.useCallback)((function(){m&&k(void 0)}),[m]);return(0,r.useEffect)((function(){var e;void 0===b&&m&&k(null==(e=null==C?void 0:C.current)?void 0:e.scrollHeight)}),[b,m,C]),(0,r.useEffect)((function(){m!==a&&(a?null==h||h():null==d||d(),y(a)),m&&_(!0);var e=setTimeout((function(){_(!1)}),350);return function(){clearTimeout(e)}}),[a,m,h,d]),(0,r.useEffect)((function(){var e;k(m?null==(e=null==C?void 0:C.current)?void 0:e.scrollHeight:0)}),[m,C,n]),(0,r.useEffect)((function(){return window.addEventListener("resize",I),function(){window.removeEventListener("resize",I)}}),[I]),(0,Xn.jsx)(c,nn(nn({style:nn({height:b},f),id:o,className:S},p),{},{ref:C,children:n}))},UI=((0,r.createContext)(null),r.forwardRef((function(e,t){var n=e.className,r=e.centered,i=e.children,a=e.size,o=e.scrollable,u=e.tag,s=void 0===u?"div":u,c=Zn(e,bI),l=LC("modal-dialog",o&&"modal-dialog-scrollable",r&&"modal-dialog-centered",a&&"modal-".concat(a),n);return(0,Xn.jsx)(s,nn(nn({className:l},c),{},{ref:t,children:i}))})),r.forwardRef((function(e,t){var n=e.className,r=e.children,i=e.tag,a=void 0===i?"div":i,o=Zn(e,kI),u=LC("modal-content",n);return(0,Xn.jsx)(a,nn(nn({className:u},o),{},{ref:t,children:r}))})),r.forwardRef((function(e,t){var n=e.className,r=e.children,i=e.tag,a=void 0===i?"div":i,o=Zn(e,wI),u=LC("modal-header",n);return(0,Xn.jsx)(a,nn(nn({className:u},o),{},{ref:t,children:r}))})),r.forwardRef((function(e,t){var n=e.className,r=e.children,i=e.tag,a=void 0===i?"h5":i,o=Zn(e,xI),u=LC("modal-title",n);return(0,Xn.jsx)(a,nn(nn({className:u},o),{},{ref:t,children:r}))})),r.forwardRef((function(e,t){var n=e.className,r=e.children,i=e.tag,a=void 0===i?"div":i,o=Zn(e,_I),u=LC("modal-body",n);return(0,Xn.jsx)(a,nn(nn({className:u},o),{},{ref:t,children:r}))})),r.forwardRef((function(e,t){var n=e.className,r=e.children,i=e.tag,a=void 0===i?"div":i,o=Zn(e,SI),u=LC("modal-footer",n);return(0,Xn.jsx)(a,nn(nn({className:u},o),{},{ref:t,children:r}))})),r.createContext({activeElement:null,setTargets:null}),r.forwardRef((function(e,t){var n=e.className,r=e.children,i=e.noBorder,a=e.textBefore,o=e.textAfter,u=e.noWrap,s=e.tag,c=void 0===s?"div":s,l=e.textTag,f=void 0===l?"span":l,h=e.textClass,d=e.size,p=e.textProps,v=Zn(e,EI),m=LC("input-group",u&&"flex-nowrap",d&&"input-group-".concat(d),n),y=LC("input-group-text",i&&"border-0",h),g=function(e){return(0,Xn.jsx)(Xn.Fragment,{children:e&&Array.isArray(e)?e.map((function(e,t){return(0,Xn.jsx)(f,nn(nn({className:y},p),{},{children:e}),t)})):(0,Xn.jsx)(f,nn(nn({className:y},p),{},{children:e}))})};return(0,Xn.jsxs)(c,nn(nn({className:m,ref:t},v),{},{children:[a&&g(a),r,o&&g(o)]}))})),r.forwardRef((function(e,t){var n=e.className,i=e.children,a=e.isValidated,o=e.onReset,u=e.onSubmit,s=e.noValidate,c=void 0===s||s,l=Zn(e,NI),f=E((0,r.useState)(a),2),h=f[0],d=f[1],p=LC("needs-validation",h&&"was-validated",n);return(0,Xn.jsx)("form",nn(nn({className:p,onSubmit:function(e){e.preventDefault(),d(!0),u&&u(e)},onReset:function(e){e.preventDefault(),d(!1),o&&o(e)},ref:t,noValidate:c},l),{},{children:i}))})),r.forwardRef((function(e,t){var n=e.className,r=e.fill,i=e.pills,a=e.justify,o=e.children,u=Zn(e,CI),s=LC("nav",i?"nav-pills":"nav-tabs",r&&"nav-fill",a&&"nav-justified",n);return(0,Xn.jsx)("ul",nn(nn({className:s,ref:t},u),{},{children:o}))})),r.forwardRef((function(e,t){var n=e.className,r=e.children,i=e.style,a=e.tag,o=void 0===a?"li":a,u=Zn(e,II),s=LC("nav-item",n);return(0,Xn.jsx)(o,nn(nn({className:s,style:nn({cursor:"pointer"},i),role:"presentation",ref:t},u),{},{children:r}))})),r.forwardRef((function(e,t){var n=e.className,i=e.color,a=e.active,o=e.onShow,u=e.onHide,s=e.children,c=Zn(e,TI),l=LC("nav-link",a&&"active",i&&"bg-".concat(i),n);return(0,r.useEffect)((function(){a?null==o||o():null==u||u()}),[a]),(0,Xn.jsx)("a",nn(nn({className:l,ref:t},c),{},{children:s}))})),r.forwardRef((function(e,t){var n=e.className,r=e.tag,i=void 0===r?"div":r,a=e.children,o=Zn(e,DI),u=LC("tab-content",n);return(0,Xn.jsx)(i,nn(nn({className:u,ref:t},o),{},{children:a}))})),r.forwardRef((function(e,t){var n=e.className,i=e.tag,a=void 0===i?"div":i,o=e.show,u=e.children,s=Zn(e,AI),c=E((0,r.useState)(!1),2),l=c[0],f=c[1],h=LC("tab-pane","fade",l&&"show",o&&"active",n);return(0,r.useEffect)((function(){var e;return o?e=setTimeout((function(){f(!0)}),100):f(!1),function(){clearTimeout(e)}}),[o]),(0,Xn.jsx)(a,nn(nn({className:h,role:"tabpanel",ref:t},s),{},{children:u}))})),(0,r.createContext)({active:0}),r.createContext({activeItem:0,setActiveItem:null,alwaysOpen:!1,initialActive:0}));r.forwardRef((function(e,t){var n=e.alwaysOpen,i=e.borderless,a=e.className,o=e.flush,u=e.initialActive,s=void 0===u?0:u,c=e.tag,l=void 0===c?"div":c,f=e.children,h=e.onChange,d=Zn(e,RI),p=LC("accordion",o&&"accordion-flush",i&&"accordion-borderless",a),v=E((0,r.useState)(s),2),m=v[0],y=v[1];return(0,r.useEffect)((function(){m&&h&&h(m)}),[h,m]),(0,Xn.jsx)(l,nn(nn({className:p,ref:t},d),{},{children:(0,Xn.jsx)(UI.Provider,{value:{activeItem:m,setActiveItem:y,alwaysOpen:n,initialActive:s},children:f})}))})),r.forwardRef((function(e,t){var n=e.className,i=e.bodyClassName,a=e.bodyStyle,o=e.headerClassName,u=e.collapseId,s=e.headerTitle,c=e.headerStyle,l=e.btnClassName,f=e.tag,h=void 0===f?"div":f,d=e.children,p=Zn(e,PI),v=(0,r.useContext)(UI),m=v.activeItem,y=v.setActiveItem,g=v.alwaysOpen,b=v.initialActive,k=E((0,r.useState)(b),2),w=k[0],x=k[1],_=LC("accordion-item",n),S=LC("accordion-header",o),N=LC("accordion-body",i),C=LC("accordion-button",g?u!==w&&"collapsed":u!==m&&"collapsed",l);return(0,Xn.jsxs)(h,nn(nn({className:_,ref:t},p),{},{children:[(0,Xn.jsx)("h2",{className:S,style:c,children:(0,Xn.jsx)("button",{onClick:function(){return function(e){g?x(e!==w?e:0):y(e!==m?e:0)}(u)},className:C,type:"button",children:s})}),(0,Xn.jsx)(MI,{id:u.toString(),show:g?w===u:m===u,children:(0,Xn.jsx)("div",{className:N,style:a,children:d})})]}))}));var VI=function(e){return(0,Xn.jsx)("div",{className:"text-red-700 text-[18px]",children:(0,Xn.jsx)("p",{children:e.errorMessage})})};var zI=function(e){var t=Ze(),n=E((0,r.useState)(""),2),i=n[0],a=n[1],o=E((0,r.useState)(""),2),u=o[0],s=o[1],c=E((0,r.useState)(""),2),l=c[0],f=c[1],h=E((0,r.useState)(null),2),d=h[0],p=h[1];function v(){return v=li(si().mark((function n(r){return si().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r.preventDefault();try{kE.collection(xE.User).where("email","==",i).where("password","==",u).get().then((function(n){if(n.empty)f("Invalid Error!");else{var r=[];n.docs.forEach((function(e){r.push(nn({id:e.id},e.data()))}));var a=r.some((function(e){return e.email===i&&e.password===u})),o=r[0];a&&o?(t(SC({id:o.id,userName:o.userName,email:o.email,address:{postalCode:o.address.postalCode,prefecture:o.address.prefecture,city:o.address.city,streetAddress:o.address.streetAddress}})),localStorage.setItem("userId",o.id),e.setCurrPage(DE.Dashboard),console.log("OK")):f("Invalid username or password!")}}))}catch(a){console.error(a)}case 2:case"end":return n.stop()}}),n)}))),v.apply(this,arguments)}return(0,Xn.jsxs)(Xn.Fragment,{children:[(0,Xn.jsxs)("div",{className:"relative mt-8 ml-8",children:[(0,Xn.jsxs)("div",{className:"flex",children:[(0,Xn.jsx)("div",{children:(0,Xn.jsx)("label",{className:"font-bold text-[46px]",children:"Login Page"})}),(0,Xn.jsx)("div",{children:(0,Xn.jsxs)("div",{className:"ml-8 flex items-center cursor-pointer w-[110px] h-[38px] hover:bg-[#a1a1aa]",onMouseOver:function(){p((0,Xn.jsx)("div",{className:"absolute z-10 w-fit h-fit px-3 py-1 text-[18px] bg-white border-2 border-[#94a3b8] rounded-sm shadow-2xl left-[280px] top-[40px]",children:"User Register"}))},onMouseLeave:function(){p(null)},onClick:function(){e.setCurrPage(DE.UserRegister)},children:[(0,Xn.jsx)(iC,{className:" ml-1",style:{color:"black",fontSize:"24px"}}),(0,Xn.jsx)("label",{className:" ml-1 text-[18px] cursor-pointer fontfamily",children:"Register"})]})}),(0,Xn.jsxs)("div",{className:"flex items-center ml-8 hover:bg-[#a1a1aa] cursor-pointer w-[110px] h-[38px]",onMouseOver:function(){p((0,Xn.jsx)("div",{className:"absolute z-10 w-fit h-fit px-3 py-1 text-[18px] bg-white border-2 border-[#94a3b8] rounded-sm shadow-2xl left-[420px] top-[40px]",children:"Back Home"}))},onMouseLeave:function(){p(null)},onClick:function(){e.setCurrPage(DE.Dashboard)},children:[(0,Xn.jsx)(eC,{style:{color:"black",fontSize:"34px"}}),(0,Xn.jsx)("label",{className:"ml-2 text-[18px] cursor-pointer fontfamily",children:"Home"})]})]}),(0,Xn.jsxs)("div",{className:"w-[500px] text-[24px]",children:[(0,Xn.jsxs)("div",{className:"mt-4 ",children:[(0,Xn.jsx)("label",{htmlFor:"username",children:"Email:"}),(0,Xn.jsx)("br",{}),(0,Xn.jsx)(FI,{type:"text",id:"username",value:i,onChange:function(e){a(e.target.value),f("")}})]}),(0,Xn.jsxs)("div",{className:"mt-12",children:[(0,Xn.jsx)("label",{htmlFor:"password",children:"Password:"}),(0,Xn.jsx)("br",{}),(0,Xn.jsx)(FI,{type:"password",id:"password",value:u,onChange:function(e){s(e.target.value),f("")}})]}),l.length>0&&(0,Xn.jsx)(VI,{errorMessage:l})]}),(0,Xn.jsx)("div",{className:" mt-14",children:(0,Xn.jsx)(hr,{variant:"primary",onClick:function(e){return v.apply(this,arguments)},children:"Login"})})]}),d&&d]})},BI=/^\d{3}-\d{4}$/,qI=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;var GI=function(e){var t=Ze(),n=Ge(_C),i=E((0,r.useState)(""),2),a=i[0],o=i[1],u=E((0,r.useState)(""),2),s=u[0],c=u[1],l=E((0,r.useState)(""),2),f=l[0],h=l[1],d=E((0,r.useState)(""),2),p=d[0],v=d[1],m=E((0,r.useState)(""),2),y=m[0],g=m[1],b=E((0,r.useState)(""),2),k=b[0],w=b[1],x=E((0,r.useState)(""),2),_=x[0],S=x[1],N=E((0,r.useState)(!1),2),C=N[0],I=N[1],T=E((0,r.useState)(!1),2),D=T[0],A=T[1],R=E((0,r.useState)(!1),2),P=R[0],O=R[1],j=E((0,r.useState)(!1),2),L=j[0],F=j[1];(0,r.useEffect)((function(){n&&n.id.length>0&&(o(n.userName),c(n.email),h(n.password),v(n.address.postalCode),g(n.address.prefecture),w(n.address.city),S(n.address.streetAddress))}),[]);var M=function(){var n=li(si().mark((function n(r){var i,o;return si().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),!1!==U()){n.next=17;break}return t($n(!0)),n.prev=4,i=nn(nn({},SE),{},{userName:a,email:s,password:f,isEnd:!1,address:nn(nn({},_E),{},{postalCode:p,prefecture:y,city:k,streetAddress:_})}),o=kE.collection(xE.User),n.next=9,o.add(i);case 9:console.log("Document added successfully!"),e.setCurrPage(DE.Login),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(4),console.error("Error adding document:",n.t0);case 16:t($n(!1));case 17:case"end":return n.stop()}}),n,null,[[4,13]])})));return function(e){return n.apply(this,arguments)}}();function U(){var e=!1;return!1===BI.test(p)&&(F(!0),e=!0),0===a.length&&(I(!0),e=!0),0!==s.length&&!1!==qI.test(s)||(A(!0),e=!0),(0===f.length||f.length<8)&&(O(!0),e=!0),e}function V(){return V=li(si().mark((function r(i){var o,u,c,l,h;return si().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i.preventDefault(),t($n(!0)),r.prev=2,o=nn(nn({},SE),{},{userName:a,email:s,password:f,isEnd:!1,address:nn(nn({},_E),{},{postalCode:p,prefecture:y,city:k,streetAddress:_})}),u=kE.collection(xE.User).doc(n.id),r.next=7,u.update(o);case 7:return console.log("Document updated successfully!"),e.setCurrPage(DE.Dashboard),c=kE.collection(xE.User).doc(n.id),r.next=12,c.get();case 12:(l=r.sent).exists&&(h=nn({id:l.id},l.data()),t(SC({id:h.id,userName:h.userName,email:h.email,password:h.password,address:{postalCode:h.address.postalCode,prefecture:h.address.prefecture,city:h.address.city,streetAddress:h.address.streetAddress}}))),r.next=19;break;case 16:r.prev=16,r.t0=r.catch(2),console.error(r.t0);case 19:t($n(!1));case 20:case"end":return r.stop()}}),r,null,[[2,16]])}))),V.apply(this,arguments)}var z=function(){return 0===a.length||0===s.length||0===f.length||0===p.length||0===y.length||0===k.length||0===_.length||C||D||P||L};return(0,Xn.jsxs)("div",{className:"relative mt-8 ml-8 w-[800px]",children:[(0,Xn.jsx)(TC,{title:"User Registration Form",showHomeIcon:!0,showUserLogin:!1,setCurrPage:e.setCurrPage}),(0,Xn.jsxs)("form",{className:"text-[24px]",children:[(0,Xn.jsxs)("div",{className:"mt-4",children:[(0,Xn.jsx)("label",{className:"w-[100px]",htmlFor:"username",children:"Username:"}),(0,Xn.jsx)(FI,{type:"text",id:"username",value:a,onChange:function(e){o(e.target.value),I(!1)},placeholder:"Enter your name"}),C&&(0,Xn.jsx)(VI,{errorMessage:"Invalid user name"})]}),(0,Xn.jsxs)("div",{className:"mt-4",children:[(0,Xn.jsx)("label",{className:"w-[100px]",htmlFor:"email",children:"Email:"}),(0,Xn.jsx)(FI,{type:"email",id:"email",value:s,onChange:function(e){c(e.target.value),A(!1)},placeholder:"Enter email address"}),D&&(0,Xn.jsx)(VI,{errorMessage:"Invalid email"})]}),(0,Xn.jsxs)("div",{className:"mt-4",children:[(0,Xn.jsx)("label",{className:"w-[100px]",htmlFor:"password",children:"Password:"}),(0,Xn.jsx)(FI,{type:"password",id:"password",value:f,onChange:function(e){h(e.target.value),O(!1)},placeholder:"Enter a strong password (at least 8 characters)"}),P&&(0,Xn.jsx)(VI,{errorMessage:"Invalid password"})]}),(0,Xn.jsxs)("div",{className:"mt-4",children:[(0,Xn.jsx)("label",{htmlFor:"postalCode",children:"Postal Code:"}),(0,Xn.jsx)(FI,{type:"text",id:"postalCode",value:p,onChange:function(e){v(e.target.value),F(!1)},placeholder:"e.g. 000-0000"}),L&&(0,Xn.jsx)(VI,{errorMessage:"Invalid Postal Code Format"})]}),(0,Xn.jsxs)("div",{className:"mt-4",children:[(0,Xn.jsx)("label",{htmlFor:"prefecture",children:"Prefecture:"}),(0,Xn.jsx)("div",{children:(0,Xn.jsxs)("select",{id:"prefecture",className:"w-[800px] h-[40px] rounded-md focus:outline-none custom-select text-[16px]",value:y,onChange:function(e){g(e.target.value)},children:[(0,Xn.jsx)("option",{value:"",children:"Select an option"}),TE.map((function(e,t){return(0,Xn.jsx)("option",{value:e,children:e})}))]})})]}),(0,Xn.jsxs)("div",{className:"mt-4",children:[(0,Xn.jsx)("label",{htmlFor:"city",children:"City:"}),(0,Xn.jsx)(FI,{type:"text",id:"city",value:k,onChange:function(e){w(e.target.value)}})]}),(0,Xn.jsxs)("div",{className:"mt-4",children:[(0,Xn.jsx)("label",{htmlFor:"address",children:"Address:"}),(0,Xn.jsx)(FI,{type:"text",id:"address",value:_,onChange:function(e){S(e.target.value)}})]}),(0,Xn.jsx)("div",{className:"mt-14",children:n&&n.id.length?(0,Xn.jsx)(hr,{disabled:z(),onClick:function(e){return V.apply(this,arguments)},type:"submit",children:"Update"}):(0,Xn.jsx)(hr,{disabled:z(),onClick:M,type:"submit",children:"Register"})})]})]})};var KI=function(e){var t=Ze(),n=Ge(_C),i=E((0,r.useState)([]),2),a=i[0],o=i[1],u=E((0,r.useState)([]),2),s=u[0],c=u[1],l=E((0,r.useState)(!1),2),f=l[0],h=l[1],d=E((0,r.useState)(""),2),p=d[0],v=d[1],m=E((0,r.useState)(null),2),y=m[0],g=m[1],b=E((0,r.useState)(!1),2),k=b[0],w=b[1],x=E((0,r.useState)(CE.Ordered),2),_=x[0],S=x[1],N=E((0,r.useState)(),2),C=N[0],I=N[1];function T(){return T=li(si().mark((function e(n){var r,i;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),t($n(!0)),r=kE.collection(xE.BookInfo).doc(p.id),e.next=5,r.delete();case 5:i=s.filter((function(e){return e.id!==p.id})),c(i),h(!1),D(),t($n(!1));case 10:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}function D(){return A.apply(this,arguments)}function A(){return(A=li(si().mark((function e(){var t,n,r,i;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=wE.ref(),n=p.imageUrl.split("/").pop(),r=n.split("?")[0],i=t.child(r),e.next=7,i.getDownloadURL();case 7:i.delete(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("File does not exist.");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function R(e,t){e.preventDefault(),v(t),S(t.status),w(!0)}function P(){return P=li(si().mark((function e(n){var r,i;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),t($n(!0)),r=nn(nn({},IE),{},{userId:p.userId,bookName:p.bookName,bookType:p.bookType,imageUrl:p.imageUrl,count:p.count,deliveryType:p.deliveryType,note:p.note,isEnd:!1,status:Number(_),orderedUserId:p.orderedUserId}),i=kE.collection(xE.BookInfo).doc(p.id),e.next=6,i.update(r);case 6:console.log("Document updated successfully!"),w(!1),I(Number(_)),t($n(!1));case 10:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}return(0,r.useEffect)((function(){if(n.id.length>0)try{kE.collection(xE.BookInfo).where("isEnd","==",!1).get().then((function(e){if(e.empty)c([]);else{var r=[];e.docs.forEach((function(e){var t,n,i=e.data(),a=nn(nn({},IE),{},{userId:i.userId,bookName:i.bookName,bookType:i.bookType,imageUrl:i.imageUrl,count:i.count,deliveryType:i.deliveryType,note:i.note,isEnd:i.isEnd,status:null!==(t=i.status)&&void 0!==t?t:CE.None,orderedUserId:null!==(n=i.orderedUserId)&&void 0!==n?n:""});r.push(nn({id:e.id},a))})),r.sort((function(e,t){return e.bookName-t.bookName})),t(mC(r));var i=r.filter((function(e){return e.userId===n.id}));i.sort((function(e,t){return e.bookName-t.bookName})),c(i),o(i)}}))}catch(e){console.error(e)}}),[n.id,C]),(0,Xn.jsxs)(Xn.Fragment,{children:[(0,Xn.jsx)("div",{className:"relative mt-8 ml-8 w-[2000px]",children:(0,Xn.jsxs)("div",{className:" absolute",children:[(0,Xn.jsxs)("div",{className:"flex",children:[(0,Xn.jsx)(TC,{title:"Your Registered List",setCurrPage:e.setCurrPage}),(0,Xn.jsxs)("div",{className:"ml-8 flex items-center cursor-pointer w-[110px] h-[38px] hover:bg-[#a1a1aa]",onMouseOver:function(){g((0,Xn.jsx)("div",{className:"absolute z-10 w-fit h-fit px-3 py-1 text-[18px] bg-white border-2 border-[#94a3b8] rounded-sm shadow-2xl left-[670px] top-[40px]",children:"Book Register"}))},onMouseLeave:function(){g(null)},onClick:function(){e.setCurrPage(DE.BookFormRegister)},children:[(0,Xn.jsx)(rC,{className:" ml-1",style:{color:"black",fontSize:"24px"}}),(0,Xn.jsx)("label",{className:" ml-1 text-[18px] cursor-pointer fontfamily",children:"Register"})]})]}),(0,Xn.jsx)("div",{className:"mb-2 mt-3",children:(0,Xn.jsx)(wC,{onSearch:function(e){return function(e){var t=e.target.value;t.length>0?c(a.filter((function(e){return e.bookName.toLowerCase().includes(t.toLowerCase())}))):c(a)}(e)},setCurrPage:e.setCurrPage})}),(0,Xn.jsx)("div",{className:"absolute list-container w-[1990px]",children:s.map((function(t){return(0,Xn.jsx)("div",{className:"list-item mb-4",children:(0,Xn.jsxs)(Fr,{style:{width:"23rem"},children:[(0,Xn.jsx)(Fr.Img,{variant:"top",className:"h-[250px]",src:t.imageUrl}),(0,Xn.jsxs)(Fr.Body,{children:[(0,Xn.jsx)(Fr.Title,{children:(0,Xn.jsx)("div",{className:"font-bold",children:t.bookName})}),(0,Xn.jsx)(Fr.Text,{children:"Type: "+DC(t.bookType)}),(0,Xn.jsx)(Fr.Text,{children:"Count: "+t.count}),(0,Xn.jsx)(Fr.Text,{children:"Delivery: "+(Number(t.deliveryType)===EE.FreeDelivery?"Free Delivery":"COD (Cash On Delivery)")}),(0,Xn.jsx)(Fr.Text,{className:" w-[340px] overflow-hidden whitespace-nowrap overflow-ellipsis",children:"Note: "+t.note}),(0,Xn.jsxs)("div",{className:" flex",children:[(0,Xn.jsx)(hr,{variant:"primary",onClick:function(e){h(!0),v(t)},children:"Delete"}),(0,Xn.jsx)(hr,{variant:"primary",className:" ml-4",onClick:function(n){return function(t,n){t.preventDefault(),e.setCurrPage(DE.BookFormRegister),e.setSelectedBookId(n)}(n,t.id)},children:"Edit"}),t.status!==CE.None&&t.orderedUserId.length>0&&t.status===CE.Ordered&&(0,Xn.jsx)(hr,{variant:"secondary",className:" ml-4",onClick:function(e){return R(e,t)},children:"Ordered"}),t.status!==CE.None&&t.orderedUserId.length>0&&t.status===CE.Prepare&&(0,Xn.jsx)(hr,{variant:"info",className:" ml-4",onClick:function(e){return R(e,t)},children:"Prepare"}),t.status!==CE.None&&t.orderedUserId.length>0&&t.status===CE.Shipped&&(0,Xn.jsx)(hr,{variant:"success",className:" ml-4",onClick:function(e){return R(e,t)},children:"Shipped"})]})]})]})},ME())}))})]})}),f&&(0,Xn.jsx)(NC,{title:"Delete Book",text:"Are you sure you want to delete this book?",className:"w-[380px] h-[150px] left-[900px] top-[400px]",onYesBtnClick:function(e){return T.apply(this,arguments)},onNoBtnClick:function(){h(!1)}}),y&&y,k&&(0,Xn.jsxs)("div",{className:"absolute z-10 w-fit h-fit px-3 py-1 text-[32px] bg-white border-2 border-[#94a3b8] rounded-md shadow-2xl left-[550px] top-[150px]",children:[(0,Xn.jsxs)("div",{className:"inline-flex",children:[(0,Xn.jsx)("label",{className:" ml-4 mt-3 font-bold text-[32px] w-fit",children:"Change Shipping Status"}),(0,Xn.jsx)(AC,{className:" absolute right-2 top-2 hover:bg-[#a1a1aa] cursor-pointer",style:{color:"black",fontSize:"28px"},onClick:function(){w(!1)}})]}),(0,Xn.jsxs)("div",{className:"ml-4 mt-7 mr-4",children:[(0,Xn.jsx)("label",{htmlFor:"status",children:"Shipping Status:"}),(0,Xn.jsx)("div",{children:(0,Xn.jsxs)("select",{id:"status",className:" mt-2 w-[400px] h-[40px] rounded-md focus:outline-none custom-select text-[16px]",value:_,onChange:function(e){e.preventDefault(),S(Number(e.target.value))},children:[(0,Xn.jsx)("option",{value:CE.Ordered,children:"Ordered"}),(0,Xn.jsx)("option",{value:CE.Prepare,children:"Prepare"}),(0,Xn.jsx)("option",{value:CE.Shipped,children:"Shipped"})]})}),(0,Xn.jsx)(hr,{variant:"primary",className:" mt-4 mb-10",disabled:p.status===Number(_),onClick:function(e){return P.apply(this,arguments)},children:"Update"})]})]})]})};var HI=function(e){var t,n=Ze(),i=Ge(_C),a=null!==(t=e.bookId)&&void 0!==t?t:-1,o=Ge((function(e){return dC(e,a)})),u=E((0,r.useState)(""),2),s=u[0],c=u[1],l=E((0,r.useState)(NE.None),2),f=l[0],h=l[1],d=E((0,r.useState)(null),2),p=d[0],v=d[1],m=E((0,r.useState)(null),2),y=m[0],g=m[1],b=E((0,r.useState)(1),2),k=b[0],w=b[1],x=E((0,r.useState)(""),2),_=x[0],S=x[1],N=E((0,r.useState)(EE.None),2),C=N[0],I=N[1],T=E((0,r.useState)(!1),2),D=T[0],A=T[1];(0,r.useEffect)((function(){o&&(c(o.bookName),h(o.bookType),v(o.imageUrl),w(o.count),S(o.note),I(o.deliveryType))}),[]);var R=function(){var e=li(si().mark((function e(t){return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o&&o.imageUrl.length>0&&URL.revokeObjectURL(o.imageUrl),v(URL.createObjectURL(t.target.files[0])),g(t.target.files[0]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var t=li(si().mark((function t(r){var a,o,u,c,l,h,d;return si().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),0!==i.id.length){t.next=4;break}return A(!0),t.abrupt("return");case 4:return n($n(!0)),t.prev=5,a=wE.ref(),o=y.name.split(".").pop(),u=ME()+"."+o,c=a.child(u),t.next=12,c.put(y);case 12:return t.next=14,c.getDownloadURL();case 14:if(l=t.sent,!(p.length>0)){t.next=22;break}return h=nn(nn({},IE),{},{userId:i.id,bookName:s,bookType:f,imageUrl:l,count:Number(k),deliveryType:C,note:_,isEnd:!1,status:CE.None,orderedUserId:""}),d=kE.collection(xE.BookInfo),t.next=20,d.add(h);case 20:console.log("Document added successfully!"),e.setCurrPage(DE.BookRegisteredList);case 22:t.next=27;break;case 24:t.prev=24,t.t0=t.catch(5),console.error(t.t0);case 27:n($n(!1));case 28:case"end":return t.stop()}}),t,null,[[5,24]])})));return function(e){return t.apply(this,arguments)}}();function O(){return O=li(si().mark((function t(r){var u,c,l,h,d,v,m;return si().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),0!==i.id.length){t.next=4;break}return A(!0),t.abrupt("return");case 4:if(n($n(!0)),t.prev=5,u="",!y){t.next=20;break}return c=wE.ref(),l=y.name.split(".").pop(),h=ME()+"."+l,d=c.child(h),t.next=14,d.put(y);case 14:return t.next=16,d.getDownloadURL();case 16:u=t.sent,j(),t.next=21;break;case 20:u=o.imageUrl;case 21:if(!(p.length>0)){t.next=28;break}return v=nn(nn({},IE),{},{userId:i.id,bookName:s,bookType:f,imageUrl:u,count:Number(k),deliveryType:C,note:_,isEnd:!1,status:o.status,orderedUserId:o.orderedUserId}),m=kE.collection(xE.BookInfo).doc(a),t.next=26,m.update(v);case 26:console.log("Document updated successfully!"),e.setCurrPage(DE.BookRegisteredList);case 28:t.next=33;break;case 30:t.prev=30,t.t0=t.catch(5),console.error(t.t0);case 33:n($n(!1));case 34:case"end":return t.stop()}}),t,null,[[5,30]])}))),O.apply(this,arguments)}function j(){return L.apply(this,arguments)}function L(){return(L=li(si().mark((function e(){var t,n,r,i;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=wE.ref(),n=o.imageUrl.split("/").pop(),r=n.split("?")[0],i=t.child(r),e.next=7,i.getDownloadURL();case 7:i.delete(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("File does not exist.");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var F=function(){return 0===s.length||f.length===NE.None||null===p||0===k||C===EE.None};return(0,Xn.jsxs)(Xn.Fragment,{children:[(0,Xn.jsxs)("div",{className:"relative mt-8 ml-8 w-[1200px] h-[700px]",children:[(0,Xn.jsx)(TC,{title:"Book Registration Form",showHomeIcon:!0,setCurrPage:e.setCurrPage}),(0,Xn.jsxs)("div",{className:"flex text-[24px]",children:[(0,Xn.jsxs)("form",{className:"w-[800px]",children:[(0,Xn.jsxs)("div",{className:"mt-4",children:[(0,Xn.jsx)("label",{htmlFor:"bookName",children:"Book Name:"}),(0,Xn.jsx)(FI,{type:"text",id:"bookName",value:s,onChange:function(e){c(e.target.value)},maxLength:100,placeholder:"Enter text (max 100 characters)"})]}),(0,Xn.jsxs)("div",{className:"mt-4",children:[(0,Xn.jsx)("label",{htmlFor:"bookType",children:"Book Type:"}),(0,Xn.jsx)("div",{children:(0,Xn.jsxs)("select",{id:"bookType",className:" w-[800px] h-[40px] rounded-md focus:outline-none custom-select text-[16px]",value:f,onChange:function(e){var t=e.target.value;h(Number(t))},children:[(0,Xn.jsx)("option",{value:NE.None,children:"Select an option"}),(0,Xn.jsx)("option",{value:NE.Non_fiction,children:"Non-fiction."}),(0,Xn.jsx)("option",{value:NE.Edited_non_fiction,children:"Edited (non-fiction)"}),(0,Xn.jsx)("option",{value:NE.Reference_non_fiction,children:"Reference (non-fiction)"}),(0,Xn.jsx)("option",{value:NE.Fiction,children:"Fiction."})]})})]}),(0,Xn.jsxs)("div",{className:"mt-4",children:[(0,Xn.jsx)("label",{htmlFor:"photo",children:"Book Image:"}),(0,Xn.jsx)(FI,{type:"file",id:"imageUpload",onChange:R})]}),(0,Xn.jsxs)("div",{className:"mt-4",children:[(0,Xn.jsx)("label",{htmlFor:"bookType",children:"Count:"}),(0,Xn.jsx)(FI,{type:"number",id:"count",readOnly:!0,disabled:!0,value:k})]}),(0,Xn.jsxs)("div",{className:"mt-4",children:[(0,Xn.jsx)("label",{htmlFor:"bookType",children:"Delivery Type:"}),(0,Xn.jsx)("div",{children:(0,Xn.jsxs)("select",{id:"deliveryType",className:" w-[800px] h-[40px] rounded-md focus:outline-none custom-select text-[16px]",value:C,onChange:function(e){var t=e.target.value;I(Number(t))},children:[(0,Xn.jsx)("option",{value:EE.None,children:"Select an option"}),(0,Xn.jsx)("option",{value:EE.FreeDelivery,children:"Free Delivery"}),(0,Xn.jsx)("option",{value:EE.COD,children:"COD (Cash On Delivery)"})]})})]}),(0,Xn.jsxs)("div",{className:"mt-4",children:[(0,Xn.jsx)("label",{htmlFor:"bookType",children:"Note:"}),(0,Xn.jsx)("br",{}),(0,Xn.jsx)("textarea",{className:"form-control",id:"exampleFormControlTextarea1",rows:"5",maxLength:400,value:_,onChange:function(e){S(e.target.value)},placeholder:"Enter text (max 400 characters)"})]}),(0,Xn.jsx)("div",{className:"mt-14",children:null===a?(0,Xn.jsx)(hr,{type:"submit",disabled:F(),onClick:P,children:"Register Book"}):(0,Xn.jsx)(hr,{type:"submit",disabled:F(),onClick:function(e){return O.apply(this,arguments)},children:"Update"})})]}),(0,Xn.jsx)("div",{className:"w-[450px] h-[450px] ml-8",children:p&&(0,Xn.jsx)("img",{src:p,alt:"..."})})]})]}),D&&(0,Xn.jsx)(PC,{title:"Book Registration",text:"Please log in to register your book information.",onClick:function(){A(!1)}})]})};function WI(e){var t=Ze(),n=E((0,r.useState)(""),2),i=n[0],a=n[1],o=E((0,r.useState)(""),2),u=o[0],s=o[1],c=E((0,r.useState)(""),2),l=c[0],f=c[1],h=E((0,r.useState)(""),2),d=h[0],p=h[1],v=E((0,r.useState)(!1),2),m=v[0],y=v[1],g=Ge(_C),b=E((0,r.useState)(!1),2),k=b[0],w=b[1];(0,r.useEffect)((function(){a(g.address.postalCode),s(g.address.prefecture),f(g.address.city),p(g.address.streetAddress)}),[]);function x(){return x=li(si().mark((function n(r){var a,o;return si().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),0!==g.id.length){n.next=4;break}return w(!0),n.abrupt("return");case 4:return t($n(!0)),n.prev=5,a=nn(nn({},_E),{},{postalCode:i,prefecture:u,city:l,streetAddress:d}),o=kE.collection(xE.User).doc(g.id),n.next=10,o.update({address:a});case 10:console.log("Document updated successfully!"),t(SC({id:g.id,userName:g.userName,email:g.email,address:{postalCode:a.postalCode,prefecture:a.prefecture,city:a.city,streetAddress:a.streetAddress}})),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(5),console.error(n.t0);case 17:e.onClose(),t($n(!1));case 19:case"end":return n.stop()}}),n,null,[[5,14]])}))),x.apply(this,arguments)}return(0,Xn.jsxs)(Xn.Fragment,{children:[(0,Xn.jsx)("div",{className:"absolute inset-0 z-10 ",children:(0,Xn.jsxs)("div",{className:"relative w-fit h-fit bg-white rounded-md shadow-xl left-[600px] top-[100px] ",children:[(0,Xn.jsxs)("div",{className:"inline-flex",children:[(0,Xn.jsx)("label",{className:" ml-8 mt-8 font-bold text-[46px] w-fit",children:"Change Shipping Address"}),(0,Xn.jsx)(AC,{className:" absolute right-2 top-2 hover:bg-[#a1a1aa] cursor-pointer",style:{color:"black",fontSize:"28px"},onClick:e.onClose})]}),(0,Xn.jsxs)("div",{className:"w-[700px] m-8",children:[(0,Xn.jsxs)("div",{className:"mt-4",children:[(0,Xn.jsx)("label",{htmlFor:"postalCode",children:"Postal Code:"}),(0,Xn.jsx)(FI,{type:"text",id:"postalCode",value:i,onChange:function(e){a(e.target.value),y(!1)},placeholder:"e.g. 000-0000"}),m&&(0,Xn.jsx)(VI,{errorMessage:"Invalid Postal Code Format"})]}),(0,Xn.jsxs)("div",{className:"mt-4",children:[(0,Xn.jsx)("label",{htmlFor:"prefecture",children:"Prefecture:"}),(0,Xn.jsx)("div",{children:(0,Xn.jsxs)("select",{id:"prefecture",className:"w-[700px] h-[40px] rounded-md focus:outline-none custom-select text-[16px]",value:u,onChange:function(e){s(e.target.value)},children:[(0,Xn.jsx)("option",{value:"",children:"Select an option"}),TE.map((function(e,t){return(0,Xn.jsx)("option",{value:e,children:e})}))]})})]}),(0,Xn.jsxs)("div",{className:"mt-4",children:[(0,Xn.jsx)("label",{htmlFor:"city",children:"City:"}),(0,Xn.jsx)(FI,{type:"text",id:"city",value:l,onChange:function(e){f(e.target.value)}})]}),(0,Xn.jsxs)("div",{className:"mt-4",children:[(0,Xn.jsx)("label",{htmlFor:"address",children:"Address:"}),(0,Xn.jsx)(FI,{type:"text",id:"address",value:d,onChange:function(e){p(e.target.value)}})]}),(0,Xn.jsx)(hr,{variant:"primary",className:" mt-4 mb-10",disabled:g.address.postalCode===i&&g.address.prefecture===u&&g.address.city===l&&g.address.streetAddress===d,onClick:function(e){return x.apply(this,arguments)},children:"Update"})]})]})}),k&&(0,Xn.jsx)(PC,{title:"Change Shipping Address",text:"Please log in to change shipping address.",onClick:function(){w(!1)}})]})}WI.defaultProps={onUpdate:function(){},onClose:function(){}};var QI={_origin:"https://api.emailjs.com"},$I=function(e,t,n){if(!e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0},YI=p((function e(t){l(this,e),this.status=t?t.status:0,this.text=t?t.responseText:"Network Error"})),XI=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(r,i){var a=new XMLHttpRequest;a.addEventListener("load",(function(e){var t=e.target,n=new YI(t);200===n.status||"OK"===n.text?r(n):i(n)})),a.addEventListener("error",(function(e){var t=e.target;i(new YI(t))})),a.open("POST",QI._origin+e,!0),Object.keys(n).forEach((function(e){a.setRequestHeader(e,n[e])})),a.send(t)}))},JI={init:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"https://api.emailjs.com";QI._userID=e,QI._origin=t},send:function(e,t,n,r){var i=r||QI._userID;$I(i,e,t);var a={lib_version:"3.11.0",user_id:i,service_id:e,template_id:t,template_params:n};return XI("/api/v1.0/email/send",JSON.stringify(a),{"Content-type":"application/json"})},sendForm:function(e,t,n,r){var i=r||QI._userID,a=function(e){var t;if(!(t="string"===typeof e?document.querySelector(e):e)||"FORM"!==t.nodeName)throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return t}(n);$I(i,e,t);var o=new FormData(a);return o.append("lib_version","3.11.0"),o.append("service_id",e),o.append("template_id",t),o.append("user_id",i),XI("/api/v1.0/email/send-form",o)}};function ZI(e){var t=(0,r.useRef)(),n=e.userInfo,i=e.selectedBookInfo,a=i.bookName+" ("+DC(i.bookType)+")",o=n.id.length>0?"\u3012"+n.address.postalCode+" "+n.address.prefecture+" "+n.address.city+" "+n.address.streetAddress:"",u=e.sendEmailAddress;return(0,Xn.jsx)("div",{className:"absolute inset-0 z-10",children:(0,Xn.jsxs)("div",{className:"relative bg-white border-2 left-[600px] text-[24px] w-[400px] top-[100px] border-[#cbd5e1] rounded-md shadow-2xl",children:[(0,Xn.jsxs)("div",{className:"inline-flex",children:[(0,Xn.jsx)("label",{className:" ml-8 mt-3 font-bold text-[32px] w-fit",children:"Send Request"}),(0,Xn.jsx)(AC,{className:" absolute right-2 top-2 hover:bg-[#a1a1aa] cursor-pointer",style:{color:"black",fontSize:"28px"},onClick:e.onClose})]}),(0,Xn.jsxs)("form",{ref:t,onSubmit:function(r){r.preventDefault(),n.id.length>0&&JI.sendForm("service_oqhxmdn","template_of3e5rc",t.current,"3oDkBnYSVc5dycbl0").then((function(t){console.log(t.text);var r=function(){var e=li(si().mark((function e(){var t,r;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=nn(nn({},IE),{},{userId:i.userId,bookName:i.bookName,bookType:i.bookType,imageUrl:i.imageUrl,count:i.count,deliveryType:i.deliveryType,note:i.note,isEnd:!1,status:CE.Ordered,orderedUserId:n.id}),r=kE.collection(xE.BookInfo).doc(i.id),e.next=4,r.update(t);case 4:console.log("Document updated successfully!");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();r(),e.onComplete()}),(function(e){console.log(e.text)}))},className:" m-8",children:[(0,Xn.jsx)("label",{children:"Book Name"}),(0,Xn.jsx)("br",{}),(0,Xn.jsx)(FI,{type:"text",name:"book_name",value:a,readOnly:!0}),(0,Xn.jsx)("br",{}),(0,Xn.jsx)("label",{className:" font-bold",children:"Name"}),(0,Xn.jsx)("br",{}),(0,Xn.jsx)(FI,{type:"text",name:"user_name",value:n.userName,readOnly:!0}),(0,Xn.jsx)("br",{}),(0,Xn.jsx)("label",{children:"Email"}),(0,Xn.jsx)("br",{}),(0,Xn.jsx)(FI,{type:"email",name:"user_email",value:n.email,readOnly:!0}),(0,Xn.jsx)("br",{}),(0,Xn.jsx)("label",{children:"Shipping Address"}),(0,Xn.jsx)("br",{}),(0,Xn.jsx)("textarea",{className:"form-control",name:"user_address",rows:"5",maxLength:400,value:o,readOnly:!0}),(0,Xn.jsx)("br",{}),(0,Xn.jsx)("input",{type:"email",name:"send_email",className:" w-0 h-0 outline-none",value:u}),(0,Xn.jsx)(hr,{type:"submit",className:" ml-[95px]",children:"Send Message"})]})]})})}var eT=function(e){var t,n=null!==(t=e.bookId)&&void 0!==t?t:-1,i=Ge(_C),a=Ge((function(e){return dC(e,n)})),o=E((0,r.useState)(null),2),u=o[0],s=o[1],c=E((0,r.useState)(!1),2),l=c[0],f=c[1],h=E((0,r.useState)({title:"",text:""}),2),d=h[0],p=h[1],v=E((0,r.useState)(!1),2),m=v[0],y=v[1],g=E((0,r.useState)(""),2),b=g[0],k=g[1],w=E((0,r.useState)(!0),2),x=w[0],_=w[1];return(0,r.useEffect)((function(){var e=a&&a.userId.length>0?a.userId:"";if(e.length>0)try{var t=function(){var t=li(si().mark((function t(){var n,r,i;return si().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=kE.collection(xE.User).doc(e),t.next=3,n.get();case 3:(r=t.sent).exists&&(i=nn({id:r.id},r.data()),k(i.email));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}catch(n){}}),[]),(0,Xn.jsxs)(Xn.Fragment,{children:[(0,Xn.jsxs)("div",{className:"relative mt-10 ml-8 w-[1200px] h-[700px]",children:[(0,Xn.jsx)(TC,{title:"Book Reservation",showHomeIcon:!0,setCurrPage:e.setCurrPage}),a&&(0,Xn.jsxs)("div",{className:"mt-4 ml-3 text-[22px]",children:[(0,Xn.jsx)("div",{className:"w-[450px]",children:(0,Xn.jsx)("img",{src:a.imageUrl,alt:"..."})}),(0,Xn.jsxs)("div",{className:" mt-4",children:[(0,Xn.jsx)("span",{className:" font-bold",children:"Name: "}),a.bookName]}),(0,Xn.jsxs)("div",{className:" mt-4",children:[(0,Xn.jsx)("span",{className:" font-bold",children:"Type: "}),DC(a.bookType)]}),(0,Xn.jsxs)("div",{className:" mt-4",children:[(0,Xn.jsx)("span",{className:" font-bold",children:"Count: "}),a.count]}),(0,Xn.jsxs)("div",{className:" mt-4",children:[(0,Xn.jsx)("span",{className:" font-bold",children:"Delivery: "}),a.deliveryType===EE.FreeDelivery?"Free Delivery":"COD (Cash On Delivery)"]}),(0,Xn.jsxs)("div",{className:" mt-4",children:[(0,Xn.jsx)("div",{children:(0,Xn.jsx)("span",{className:" font-bold",children:"Shipping Address: "})}),i.id.length>0&&(0,Xn.jsxs)(Xn.Fragment,{children:[(0,Xn.jsx)("div",{children:"\u3012"+i.address.postalCode}),(0,Xn.jsx)("div",{children:i.address.prefecture+" "+i.address.city}),(0,Xn.jsx)("div",{children:i.address.streetAddress})]})]}),(0,Xn.jsx)(hr,{variant:"primary",className:" mt-4",onClick:function(){i.id.length>0?s((0,Xn.jsx)(WI,{onClose:function(){s(null)}})):(p({title:"Change Shipping Address",text:"Please log in to change shipping address."}),f(!0))},children:"Change Address"}),x?(0,Xn.jsx)(hr,{variant:"primary",className:" mt-4 ml-4",onClick:function(e){e.preventDefault(),i.id.length>0&&b.length>0?y(!0):(p({title:"Send Request",text:"Please log in to send request."}),f(!0))},children:"Send Request"}):(0,Xn.jsx)(hr,{variant:"secondary",className:" mt-4 ml-4",children:"Ordered"})]})]}),u,l&&(0,Xn.jsx)(PC,{title:d.title,text:d.text,onClick:function(){f(!1)}}),m&&(0,Xn.jsx)(ZI,{userInfo:i,selectedBookInfo:a,sendEmailAddress:b,onComplete:function(){y(!1),_(!1)},onClose:function(){y(!1)}})]})};var tT=function(e){var t=Ze(),n=Ge(hC),i=E((0,r.useState)(n),2),a=i[0],o=i[1],u=Ge(fC),s=E((0,r.useState)(null),2),l=s[0],f=s[1],h=Ge(_C),d=E((0,r.useState)(!1),2),p=d[0],v=d[1];return(0,Xn.jsxs)(Xn.Fragment,{children:[(0,Xn.jsx)("div",{className:"relative mt-8 ml-8 w-[2000px]",children:(0,Xn.jsxs)("div",{className:" absolute",children:[(0,Xn.jsx)(TC,{title:"Cart",setCurrPage:e.setCurrPage}),(0,Xn.jsx)("div",{className:"mb-2 mt-3",children:(0,Xn.jsx)(wC,{onSearch:function(e){return function(e){var t=e.target.value;t.length>0?o(n.filter((function(e){return e.bookName.toLowerCase().includes(t.toLowerCase())}))):o(n)}(e)},setCurrPage:e.setCurrPage})}),(0,Xn.jsx)("div",{className:"absolute list-container w-[1990px]",children:a&&a.filter((function(e){return e.status!==CE.Shipped})).map((function(r){return(0,Xn.jsx)("div",{className:"list-item mb-4",children:(0,Xn.jsxs)(Fr,{style:{width:"23rem"},children:[(0,Xn.jsx)(Fr.Img,{variant:"top",className:"h-[250px]",src:r.imageUrl}),(0,Xn.jsx)("div",{className:" absolute right-0 cursor-pointer",children:u.length&&u.some((function(e){return e.id===r.id}))?(0,Xn.jsx)(JN,{className:" ml-4",style:{color:"white",fontSize:"34px"},onClick:function(){return function(e){var n=u.filter((function(t){return t.id!==e}));t(vC(n))}(r.id)}}):(0,Xn.jsx)(ZN,{className:" ml-4",style:{color:"white",fontSize:"34px"},onClick:function(){return function(e){var r=n.find((function(t){return t.id===e})),i=c(u);i.push(r),t(vC(i))}(r.id)}})}),(0,Xn.jsxs)(Fr.Body,{onClick:function(e){return function(e,t){e.preventDefault();var n=a.findIndex((function(e){return e.id===t.id})),r=Math.trunc(n/5),i=" top-["+Number(0===r?100:1===r?400:200*r)+"px]";f((0,Xn.jsx)(RC,{posY:i,info:t,onClose:function(){f(null)}}))}(e,r)},className:" cursor-pointer",children:[(0,Xn.jsx)(Fr.Title,{children:(0,Xn.jsx)("div",{className:"font-bold",children:r.bookName})}),(0,Xn.jsx)(Fr.Text,{children:"Type: "+DC(r.bookType)}),(0,Xn.jsx)(Fr.Text,{children:"Count: "+r.count}),(0,Xn.jsx)(Fr.Text,{children:"Delivery: "+(Number(r.deliveryType)===EE.FreeDelivery?"Free Delivery":"COD (Cash On Delivery)")}),(0,Xn.jsx)(Fr.Text,{className:" w-[340px] overflow-hidden whitespace-nowrap overflow-ellipsis",children:"Note: "+r.note})]}),(0,Xn.jsxs)("div",{className:"mb-3 ml-4 flex",children:[(0,Xn.jsx)(hr,{variant:"primary",onClick:function(){return function(e){var r=n.filter((function(t){return t.id!==e}));t(yC(r)),o(r)}(r.id)},children:"Remove"}),h.id.length>0&&r.userId!==h.id&&(r.status===CE.None||r.status===CE.Cancel)?(0,Xn.jsx)(hr,{variant:"primary",className:" ml-4",onClick:function(t){return function(t,n){t.preventDefault(),0!==h.id.length?(e.setCurrPage(DE.ReceiveFormRegister),e.setSelectedBookId(n)):v(!0)}(t,r.id)},children:"Receive"}):r.status!==CE.None&&r.orderedUserId.length>0?(0,Xn.jsx)("label",{className:" ml-4 doubleunderline font-bold",children:r.status===CE.Ordered?"Ordered":r.status===CE.Prepare?"Preparing To Ship":""}):""]})]})},ME())}))})]})}),l,p&&(0,Xn.jsx)(PC,{title:"Book Receiving",text:"Please log in to receive the book.",bgColor:"bg-[#78716c] bg-opacity-70",onClick:function(){v(!1)}})]})};var nT=function(e){var t=Ze(),n=Ge(fC),i=E((0,r.useState)(n),2),a=i[0],o=i[1],u=Ge(hC),s=E((0,r.useState)(null),2),l=s[0],f=s[1],h=E((0,r.useState)(!1),2),d=h[0],p=h[1],v=Ge(_C);return(0,Xn.jsxs)(Xn.Fragment,{children:[(0,Xn.jsx)("div",{className:"relative mt-8 ml-8 w-[2000px]",children:(0,Xn.jsxs)("div",{className:" absolute",children:[(0,Xn.jsx)(TC,{title:"Favorite List",setCurrPage:e.setCurrPage}),(0,Xn.jsx)("div",{className:"mb-2 mt-3",children:(0,Xn.jsx)(wC,{onSearch:function(e){return function(e){var t=e.target.value;t.length>0?o(n.filter((function(e){return e.bookName.toLowerCase().includes(t.toLowerCase())}))):o(n)}(e)},setCurrPage:e.setCurrPage})}),(0,Xn.jsx)("div",{className:"absolute list-container w-[1990px]",children:a&&a.filter((function(e){return e.status!==CE.Shipped})).map((function(r){return(0,Xn.jsx)("div",{className:"list-item mb-4",children:(0,Xn.jsxs)(Fr,{style:{width:"23rem"},children:[(0,Xn.jsx)(Fr.Img,{variant:"top",className:"h-[250px]",src:r.imageUrl}),(0,Xn.jsx)("div",{className:" absolute right-0 cursor-pointer",children:(0,Xn.jsx)(JN,{className:" ml-4",style:{color:"white",fontSize:"34px"},onClick:function(){return function(e){var r=n.filter((function(t){return t.id!==e}));t(vC(r)),o(r)}(r.id)}})}),(0,Xn.jsxs)(Fr.Body,{onClick:function(e){return function(e,t){e.preventDefault();var n=a.findIndex((function(e){return e.id===t.id})),r=Math.trunc(n/5),i=" top-["+Number(0===r?100:1===r?400:200*r)+"px]";f((0,Xn.jsx)(RC,{posY:i,info:t,onClose:function(){f(null)}}))}(e,r)},className:" cursor-pointer",children:[(0,Xn.jsx)(Fr.Title,{children:(0,Xn.jsx)("div",{className:"font-bold",children:r.bookName})}),(0,Xn.jsx)(Fr.Text,{children:"Type: "+DC(r.bookType)}),(0,Xn.jsx)(Fr.Text,{children:"Count: "+r.count}),(0,Xn.jsx)(Fr.Text,{children:"Delivery: "+(Number(r.deliveryType)===EE.FreeDelivery?"Free Delivery":"COD (Cash On Delivery)")}),(0,Xn.jsx)(Fr.Text,{className:" w-[340px] overflow-hidden whitespace-nowrap overflow-ellipsis",children:"Note: "+r.note})]}),(0,Xn.jsxs)("div",{className:"mb-3 ml-4 flex",children:[(0,Xn.jsx)(hr,{variant:"primary",onClick:function(){return function(e){var r=u.findIndex((function(t){return t.id===e}));if(0===u.length||-1===r&&u.length>0){var i=n.find((function(t){return t.id===e})),a=c(u);a.push(i),t(yC(a))}}(r.id)},children:"Add to Cart"}),v.id.length>0&&r.userId!==v.id&&(r.status===CE.None||r.status===CE.Cancel)?(0,Xn.jsx)(hr,{variant:"primary",className:" ml-4",onClick:function(t){return function(t,n){t.preventDefault(),0!==v.id.length?(e.setCurrPage(DE.ReceiveFormRegister),e.setSelectedBookId(n)):p(!0)}(t,r.id)},children:"Receive"}):r.status!==CE.None&&r.orderedUserId.length>0?(0,Xn.jsx)("label",{className:" ml-4 doubleunderline font-bold",children:r.status===CE.Ordered?"Ordered":r.status===CE.Prepare?"Preparing To Ship":""}):""]})]})},ME())}))})]})}),l,d&&(0,Xn.jsx)(PC,{title:"Book Receiving",text:"Please log in to receive the book.",bgColor:"bg-[#78716c] bg-opacity-70",onClick:function(){p(!1)}})]})};function rT(e){var t=Ze(),n=Ge(_C),i=E((0,r.useState)([]),2),a=i[0],o=i[1],u=[CE.Ordered,CE.Prepare,CE.Shipped];function s(){try{kE.collection(xE.BookInfo).where("isEnd","==",!1).get().then((function(e){if(!1===e.empty){var t=[];e.docs.forEach((function(e){var n,r,i=e.data(),a=nn(nn({},IE),{},{userId:i.userId,bookName:i.bookName,bookType:i.bookType,imageUrl:i.imageUrl,count:i.count,deliveryType:i.deliveryType,note:i.note,isEnd:i.isEnd,status:null!==(n=i.status)&&void 0!==n?n:CE.None,orderedUserId:null!==(r=i.orderedUserId)&&void 0!==r?r:""});t.push(nn({id:e.id},a))})),t=t.filter((function(e){return u.some((function(t){return t===e.status}))&&e.orderedUserId===n.id})),o(t)}}))}catch(e){console.error(e)}}function c(){return c=li(si().mark((function e(n,r){var i,a,o;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),t($n(!0)),i=r,a=nn(nn({},IE),{},{userId:i.userId,bookName:i.bookName,bookType:i.bookType,imageUrl:i.imageUrl,count:i.count,deliveryType:i.deliveryType,note:i.note,isEnd:!1,status:CE.Cancel,orderedUserId:i.orderedUserId}),o=kE.collection(xE.BookInfo).doc(i.id),e.next=7,o.update(a);case 7:console.log("Document updated successfully!"),s(),t($n(!1));case 10:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}return(0,r.useEffect)((function(){n.id.length>0&&s()}),[]),(0,Xn.jsx)(Xn.Fragment,{children:(0,Xn.jsxs)("div",{className:"relative mt-8 ml-8 w-[1200px] h-[700px]",children:[(0,Xn.jsx)(TC,{title:"Your Ordered List",showHomeIcon:!0,setCurrPage:e.setCurrPage}),(0,Xn.jsx)("div",{className:"absolute list-container w-[1990px] mt-4",children:a&&a.map((function(e){return(0,Xn.jsx)("div",{className:"list-item mb-4",children:(0,Xn.jsxs)(Fr,{style:{width:"23rem"},children:[(0,Xn.jsx)(Fr.Img,{variant:"top",className:"h-[250px]",src:e.imageUrl}),(0,Xn.jsxs)(Fr.Body,{className:" cursor-pointer",children:[(0,Xn.jsx)(Fr.Title,{children:(0,Xn.jsx)("div",{className:"font-bold",children:e.bookName})}),(0,Xn.jsx)(Fr.Text,{children:"Type: "+DC(e.bookType)}),(0,Xn.jsx)(Fr.Text,{children:"Count: "+e.count}),(0,Xn.jsx)(Fr.Text,{children:"Delivery: "+(e.deliveryType===EE.FreeDelivery?"Free Delivery":"COD (Cash On Delivery)")}),(0,Xn.jsx)(Fr.Text,{className:" w-[340px] overflow-hidden whitespace-nowrap overflow-ellipsis",children:"Note: "+e.note})]}),(0,Xn.jsxs)("div",{className:"mb-3 ml-4 flex",children:[e.status===CE.Ordered&&(0,Xn.jsx)(hr,{variant:"primary",onClick:function(t){return function(e,t){return c.apply(this,arguments)}(t,e)},children:"Cancel"}),e.status===CE.Shipped&&(0,Xn.jsx)(hr,{variant:"success",children:"Shipped"}),e.status!==CE.None&&e.orderedUserId.length>0?(0,Xn.jsx)("label",{className:" ml-4 doubleunderline font-bold",children:e.status===CE.Ordered?"Ordered":e.status===CE.Prepare?"Preparing To Ship":""}):""]})]})},ME())}))})]})})}function iT(e){var t=E((0,r.useState)(DE.Dashboard),2),n=t[0],i=t[1],a=E((0,r.useState)(-1),2),o=a[0],u=a[1];return(0,Xn.jsxs)(Xn.Fragment,{children:[n===DE.Dashboard&&(0,Xn.jsx)(OC,{setCurrPage:i,setSelectedBookId:u}),n===DE.Login&&(0,Xn.jsx)(zI,{setCurrPage:i}),n===DE.UserRegister&&(0,Xn.jsx)(GI,{setCurrPage:i}),n===DE.BookFormRegister&&(0,Xn.jsx)(HI,{setCurrPage:i,bookId:o}),n===DE.BookRegisteredList&&(0,Xn.jsx)(KI,{setCurrPage:i,setSelectedBookId:u}),n===DE.ReceiveFormRegister&&(0,Xn.jsx)(eT,{setCurrPage:i,bookId:o}),n===DE.CartList&&(0,Xn.jsx)(tT,{setCurrPage:i,setSelectedBookId:u}),n===DE.FavoriteList&&(0,Xn.jsx)(nT,{setCurrPage:i,setSelectedBookId:u}),n===DE.Order&&(0,Xn.jsx)(rT,{setCurrPage:i})]})}var aT=function(){return(0,Xn.jsxs)(Xn.Fragment,{children:[(0,Xn.jsx)("div",{className:"relative font-['helvetica'] text-lg w-[2040px] h-[1500px]",children:(0,Xn.jsx)(Ee,{children:(0,Xn.jsx)(_e,{path:"/readbook/",element:(0,Xn.jsx)(iT,{})})})}),(0,Xn.jsx)(Jn,{})]})},oT=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);var uT=i.startTransition;function sT(e){var t,n=e.basename,i=e.children,a=e.future,o=e.window,u=r.useRef();null==u.current&&(u.current=(void 0===(t={window:o,v5Compat:!0})&&(t={}),L((function(e,t){var n=e.location;return P("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:O(t)}),null,t)));var s=u.current,c=E(r.useState({action:s.action,location:s.location}),2),l=c[0],f=c[1],h=(a||{}).v7_startTransition,d=r.useCallback((function(e){h&&uT?uT((function(){return f(e)})):f(e)}),[f,h]);return r.useLayoutEffect((function(){return s.listen(d)}),[s,d]),r.createElement(Se,{basename:n,children:i,location:l.location,navigationType:l.action,navigator:s})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var cT,lT;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(cT||(cT={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(lT||(lT={}));var fT=function(e){var t,n=On(),r=e||{},i=r.reducer,a=void 0===i?void 0:i,o=r.middleware,u=void 0===o?n():o,s=r.devTools,c=void 0===s||s,l=r.preloadedState,f=void 0===l?void 0:l,h=r.enhancers,d=void 0===h?void 0:h;if("function"===typeof a)t=a;else{if(!Dn(a))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=ln(a)}var p=u;"function"===typeof p&&(p=p(n));var v=hn.apply(void 0,p),m=fn;c&&(m=Tn(Nn({trace:!1},"object"===typeof c&&c)));var y=new Rn(v),g=y;return Array.isArray(d)?g=gn([v],d):"function"===typeof d&&(g=d(y)),cn(t,f,m.apply(void 0,g))}({reducer:{bookList:gC,loading:Yn,user:EC}});a.createRoot(document.getElementById("root")).render((0,Xn.jsx)(r.StrictMode,{children:(0,Xn.jsx)(Qe,{store:fT,children:(0,Xn.jsx)(sT,{children:(0,Xn.jsx)(aT,{})})})})),oT()}()}();
//# sourceMappingURL=main.29da0a8b.js.map